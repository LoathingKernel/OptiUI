<?xml version="1.0" encoding="UTF-8"?>
<interface name="game" onshowlua="Cmd('Trigger movf_interfacegame 1')" onhidelua="Cmd('Trigger movf_interfacegame 0')" scenex="0" sceney="0" scenewidth="100%" sceneheight="88h" luatable="true"
	onloadlua="
		Trigger('MiniMapPosition')
		Set('ui_gameInterfaceLoaded', true, 'bool')
	"
>
	<!-- Search for 'UIScript' to find stuff that still needs to be replaced with LUA, also probably search for UICmd -->

	<lua file="/ui/scripts/game_ui_manager.lua" />

	<lua file="/ui/scripts/optiui_game_new.lua" />

	<panel name="lod_game_unload_delay" noclick="1" onloadlua="RegisterScript2('Game_Interface', '38') Game:InitializeGameInterface()"/>

	<!-- Packages -->
	<childinterface file="ui_items_1.interface" />
	<include file="movf.package"/>
	<childinterface file="/ui/game_chat.interface" />
	<childinterface file="/ui/game_vote.interface" />
	<childinterface file="/ui/game_mentor.interface" />
	<include file="optiui_stash.package"/>
	<childinterface file="/ui/tooltips.interface" />
	<childinterface file="/ui/confirmations.interface" />
	<childinterface file="/ui/testpp/game_dev.interface" />
	<include file="game_radialmenu.package" />
		
	<if condition="(releaseStage_dev or releaseStage_test) and !releaseStage_stable and !ui_disableQAChecklist" >
		<panel y="-1" x="-26h" width="3.0h" height="3.0h" grow="1" align="right" name="game_qa_mini_button" visible="1" noclick="0" valign="top" passivechildren="1" color="0 0 0 1" onshow="BringToFront();"
			onclicklua="local widg = GetWidget('game_qa_mini_panel_parent', 'game') widg:SetVisible(not widg:IsVisible())"
		>
			<image texture="/ui/icons/tech_support.tga" height="90%" width="90%" align="center" valign="center" />
			<frame color="invisible" borderthickness="1" bordercolor="#074880" visible="1" />
		</panel>
		<childinterface file="/ui/game_qa.interface" />
	</if>

	<!-- Triggers -->
	<trigger name="gameBuycourierStatus"/>
	<trigger name="gameBuycourierResults"/>
	<trigger name="MiniMapPosition" />
	<trigger name="GameImagePreviewVis"/>
	<trigger name="GameImagePreviewInit"/>
	<trigger name="GameMenuTooltipText"/>
	<trigger name="CourierUpgrade"/>
	<trigger name="ItemTooltip"/>

	<trigger name="DicePrompt" />
	<panel noclick="1" color="invisible"
		onloadlua="Cmd('UnAlias DiceHotkey; Alias DiceHotkey Trigger DicePrompt')"
	/>

	<!-- OptiUI: New triggers -->
	<trigger name="optiui_AllyInfoPosition"/>
	<trigger name="optiui_BottomCenterPosition"/>

	<!-- Couriers -->
	<!-- UIScript -->
	<panel noclick="true" color="invisible"
		watch1="gameBuycourierResults"
		ontrigger1lua="
			if ((tonumber(param2) >= 2) and (tonumber(param1) == 1)) then
				GetWidget('game_buycourier_Error', 'game'):DoEventN(0)
			elseif (tonumber(param1) == 3) then
				GetWidget('game_buycourier_Success', 'game'):DoEventN(0)

				self:UICmd('ChatRefreshUpgrades(); ClientRefreshUpgrades(); ServerRefreshUpgrades()')
			end
		"

		watch2="gameBuycourierStatus"
		ontrigger2lua="
			local requestStatus = tonumber(param0)
			
			if (requestStatus == 3) then
				GetWidget('game_buycourier_Error', 'game'):DoEventN(0)
			end
		"
		watch3="UpgradesRefreshed"
		ontrigger3lua="
			UpdateAltCourierList()
		"
	/>

	<form
		name="gameBuycourier"
		host="!masterserver"
		method="get"
		target="/store_requester.php"
		statustrigger="gameBuycourierStatus"
		resulttrigger="gameBuycourierResults"
		resultparam0="responseCode"
		resultparam1="popupCode"
		resultparam2="errorCode"
		ssl="false"
	/>

	<!-- Templates -->
	<template name="promptReviveButtonOKState">
		<widgetstate statename="{statename}" x="{x}" y="{y}">
			<image texture="{texture=/ui/common/prompt_revive_button_ok.tga}" rendermode="{rendermode=normal}" color="{color=white}"/>
		</widgetstate>
	</template>

	<template name="promptReviveButtonOK">
		<button name="{id}" width="{width=100%}" height="{height=100%}" x="{x}" y="{y}" align="{align}" valign="{valign}" color="invisible" watch="{watch}" ontriggerlua="{ontriggerlua}">
			<instance name="promptReviveButtonOKState" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" statename="up" color="0.9 0.9 0.9"/>
			<instance name="promptReviveButtonOKState" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" statename="over"/>
			<instance name="promptReviveButtonOKState" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" statename="down" color="0.65 0.65 0.65" x="1" y="1"/>
			<instance name="promptReviveButtonOKState" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" statename="disabled" rendermode="grayscale" color="0.75 0.75 0.75"/>
		</button>
	</template>

	<template name="promptReviveButtonCancel">
		<instance name="promptReviveButtonOK" id="{id}" width="{width=100%}" height="{height=100%}" x="{x}" y="{y}" align="{align}" valign="{valign}" texture="{texture=/ui/common/prompt_revive_button_ok.tga}" watch="{watch}" ontriggerlua="{ontriggerlua}"/>
	</template>
	<template name="kick_button">
		<button
			x="{x=}" y="{y=}" width="{width=100%}" height="{height=100%}" align="{align=}" valign="{valign=}"
			group="{group}"
			name="{button_name}"
			color="invisible"
			visible="{visible=true}"
			watch="{watch=}"
			enabled="{enabled=true}"
			ontrigger="{ontrigger=}"
			ontriggerlua="{ontriggerlua=}"
			watch1="{watch1=}"
			ontrigger1="{ontrigger1=}"
			ontrigger1lua="{ontrigger1lua=}"
			watch2="{watch2=}"
			ontrigger2="{ontrigger2=}"
			ontrigger2lua="{ontrigger2lua=}"
			onmouseover="{onmouseover}"
			onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav') PlaySound('/shared/sounds/ui/ccpanel/button_over_01.wav') {onmouseoverlua}"
			onmouseout="{onmouseout}"
			onclick="{onclick}"
			onclicklua="PlaySound('{sound=/shared/sounds/ui/ccpanel/button_click_02.wav}') {onclicklua}"
			onenter="{onenter}"
			onenterlua="PlaySound('{sound='/shared/sounds/ui/ccpanel/button_click_02.wav}') {onenterlua}"
			onshow="{onshow}"
			onhide="{onhide}"
			onhidelua="{onhidelua}"
			hotkey="{hotkey}"
			onhotkey="{onhotkey}"
			onhotkeylua="PlaySound('{sound=/shared/sounds/ui/ccpanel/button_click_02.wav}') {onhotkeylua}"
			interactive="{interactive=true}"
			onevent="{onevent=}"
		>
			<widgetstate statename="up">
				<image texture="/ui/elements/kick_up.tga"/>
			</widgetstate>

			<widgetstate statename="over">
				<image texture="/ui/elements/kick_over.tga"/>
			</widgetstate>

			<widgetstate statename="down" x="1" y="1">
				<image texture="/ui/elements/kick_down.tga"/>
			</widgetstate>
			<widgetstate statename="disabled">
				<image texture="/ui/elements/kick_disabled.tga"/>
			</widgetstate>
		</button>
	</template>

	<template name="kick_player_item">
		<panel width="100%" height="1.75h"
			name="kick_player_item_{index}"
			visible="false"
			sticky="true" stickytoinvis="false"
		>
			<label font="dyn_9" color="white" textvalign="center" shadow="true" noclick="true" watch="MenuPlayerInfo{index}" ontriggerlua="self:SetColor(param1) self:SetText(param2);"/>
			<instance name="kick_button" button_name="kick_player_item_{index}_button" width="100@" height="100%" align="right" watch1="VotePermissions" ontrigger1lua="self:SetEnabled((not AtoB(param0)) and (not AtoB(param1)) and AtoB(param8))"/>
			<label align="right" width="3h" font="dyn_9" color="white" textalign="right" textvalign="center" shadow="true" noclick="true" visible="false" content="0" watch="MenuPlayerInfo{index}" ontriggerlua="if (tonumber(param17) > 0) then self:SetText(math.ceil(tonumber(param17) / 1000.0)) self:SetVisible(1) end"/>
		</panel>
	</template>

	<template name="killBoardEntry">
		<panel noclick="true" height="3.5h" visible="0"
			name="killBoardEntry{id}"
			onevent0lua="
				GetWidget('killBoardNameA{id}', 'game'):DoEventN(0)
				GetWidget('killBoardIconA{id}', 'game'):Sleep(50, function() self:DoEventN(0) end)
				GetWidget('killBoardSkull{id}', 'game'):Sleep(100, function() self:DoEventN(0) end)
				GetWidget('killBoardIconB{id}', 'game'):Sleep(150, function() self:DoEventN(0) end)
				GetWidget('killBoardNameB{id}', 'game'):Sleep(200, function() self:DoEventN(0) end)
				self:SetVisible(1)
			"
			onhidelua="
				GetWidget('killBoardNameA{id}', 'game'):SetVisible(0)
				GetWidget('killBoardIconA{id}', 'game'):SetVisible(0)
				GetWidget('killBoardSkull{id}', 'game'):SetVisible(0)
				GetWidget('killBoardIconB{id}', 'game'):SetVisible(0)
				GetWidget('killBoardNameB{id}', 'game'):SetVisible(0)
			"
		>
			<panel noclick="true" height="-0.25h" float="right" padding="0.5h" grow="true" align="center">
				<panel noclick="true" width="20h">
					<label noclick="true" textvalign="center" shadow="true" font="dyn_11" textalign="right" width="-120@" visible="false" name="killBoardNameA{id}" onevent0lua="self:FadeIn(250)"/>
					<panel noclick="true" height="100%" width="100@" align="right" name="killBoardIconA{id}" visible="false" onevent0lua="self:FadeIn(250)">
						<image name="killBoardHeroIconA{id}" noclick="true"/>
						<frame name="killBoardTeamA{id}" color="invisible" borderthickness="1" noclick="true" />
					</panel>
				</panel>
				<panel noclick="true" width="100@" align="center">
					<panel width="70%" height="70%" align="center" valign="center">
						<image noclick="true" width="300@" height="300%" valign="center" align="center" texture="/shared/effects/textures/ping_death.tga" rendermode="additive" name="killBoardSkull{id}" visible="false"
							onevent0lua="
								self:SetVisible(0) self:SetWidth('400%') self:SetHeight('400%') self:FadeIn(200) self:ScaleWidth('70%', 250) self:ScaleHeight('70%', 250) self:Sleep(250, function() self:DoEventN(1) end)
							"
							onevent1lua="
								self:ScaleWidth('100%', 100) self:ScaleHeight('100%', 100)
							"
						/>
					</panel>

					<!--<image noclick="true" width="100@" height="100%" align="center" texture="/ui/elements/stat_icons/total_kills.tga"/>-->
				</panel>
				<panel noclick="true" width="20h">
					<panel noclick="true" height="100%" width="100@" name="killBoardIconB{id}" visible="false" onevent0lua="self:FadeIn(250)">
						<image name="killBoardHeroIconB{id}" noclick="true" />
						<frame name="killBoardTeamB{id}" color="invisible" borderthickness="1" noclick="true" />
					</panel>
					<label noclick="true" textvalign="center" shadow="true" font="dyn_11" visible="false" onevent0lua="self:FadeIn(250)" width="-120@" x="120@" name="killBoardNameB{id}"/>
				</panel>
			</panel>
		</panel>
	</template>

	<template name="multi_select_unit">
		<panel width="4.0h" watch="SelectedVisible{index}" ontriggerlua="self:SetVisible(AtoB(param))">
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="3" watch="SelectedColor{index}" ontriggerlua="self:SetBorderColor(param)"/>
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="3" color="0 0 0 .9"/>
			<frame texture="/ui/frames/roundframe.tga" watch="SelectedColor{index}" ontriggerlua="self:SetBorderColor(param)" borderthickness="3"/>

			<panel align="center" valign="center" width="85%" height="85%" float="bottom" padding="1%" color="invisible">
				<panel align="center" height="85@" width="85%" color="invisible" >
					<image
						watch="SelectedIcon{index}"
						ontriggerlua="self:SetTexture(param)"
						watch0="SelectedIllusion{index}"
						ontrigger0lua="	if (AtoB(param)) then
											self:SetRenderMode('grayscale')
											self:SetColor('0.35 1.3 0.35')
										else
											self:SetRenderMode('normal')
											self:SetColor('white')
										end"
					/>
				</panel>
				<panel height="7%" width="85%" color="black" watch="SelectedHealth{index}" ontriggerlua="self:SetVisible(tonumber(param1) > 0)">
					<!--
					<panel watch="SelectedHealth{index}" ontrigger="SetColor(Saturate(1 - (param2 - 0.50) / 0.50), (param2 + (((param2 - 0.05) / 1.0)*0.2)) / 0.45, 0, 1); ScaleWidth(FtoP(param2), 500);" color="0 1 0 0" noclick="1">
						<panel color="0 0 0 .5"/>
					</panel>
					-->
					<panel watch="SelectedHealth{index}" ontriggerlua="self:SetWidth(FtoP(param2)) self:SetColor(Saturate(1 - (tonumber(param2) - 0.50) / 0.50), (tonumber(param2) + (((tonumber(param2) - 0.05) / 1.0) * 0.2)) / 0.45, 0, 1)" color="0 1 0 0" noclick="1">
						<panel color="1 1 1 .1" align="right" width=".1h" rendermode="additive"/>
					</panel>
				</panel>
				<panel height="7%" width="85%" color="black" watch="SelectedMana{index}" ontriggerlua="self:SetVisible(tonumber(param1) > 0)">
					<!--
					<panel color="0 0.2 1 .8" watch="SelectedMana{index}"  ontrigger="ScaleWidth(FtoP(param2), 500, -1);"/>
					-->
					<panel color="0 0.4 1 1" watch="SelectedMana{index}"  ontriggerlua="self:SetWidth(FtoP(param2))"/>
				</panel>
			</panel>

			<image
				texture="/ui/info/drop.tga"
				rendermode="additive"
				color="white"
				watch="SelectedActive{index}"
				ontriggerlua="self:SetVisible(AtoB(param))"
			/>
			<!-- UIScript -->
			<button
				color="invisible"
				onclick="If(GetModifier1(), DeselectUnit({index}), SetControlUnit({index}));"
				onrightclick="DeselectUnit({index});"
				onmouseoverlua="GetWidget('unit_tooltip_info{index}', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('unit_tooltip_info{index}', 'game'):SetVisible(0)"
				interactive="false"
			/>
		</panel>
	</template>

	<template name="command_tooltip">
		<floater name="command_tooltip{slot}" width="20h" x="0" y="0.8h" align="center" valign="bottom" grow="true" color="invisible" visible="false" group="tooltip_group">
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .88"/>
			<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" bordercolor="#434d50"/>
			<panel grow="true" regrow="true" growinvis="false" y="0.8h" width="-1.2h" align="center" float="bottom" padding="0.5h">
				<panel width="100%" height="3.6h">
					<panel float="right" sticky="true" stickytoinvisible="false" padding="0.5h">
						<!-- Icon -->
						<panel width="100@" height="100%">
							<image texture="{texture}" />
							<frame color="invisible" borderthickness="1" bordercolor=".3 .3 .3 1" />
						</panel>
						<!-- Name / Lvl -->
						<panel width="-120@" height="100%" float="bottom" padding="0">
							<label fity="true" font="dyn_12" color="#ffab01" shadow="true" content="{header}" />
						</panel>
					</panel>
					<!-- Shortcut -->
					<panel x="0" y="-0.2h" grow="true" regrow="true" height="2.0h" align="right" visible="1" >
						<frame texture="/ui/frames/key.tga" width="100%" height="100%" borderthickness="33@" />
						<label y="-1" fitx="true" fitxpadding="0.7h" font="dyn_10" textalign="center" textvalign="center" color=".1 .1 .1 1" shadow="true" shadowcolor=".8 .8 .8 1"
							onshow="SetText(GetKeybindButton('game', '{command}', ''));"
						/>
					</panel>
				</panel>
				<panel width="100%" height="0.2h">
					<panel width="100%" height="1" valign="bottom" color=".2 .2 .2 1" />
				</panel>
				<panel grow="true" regrow="true" width="100%">
					<label fity="true" font="dyn_10" wrap="true" color="1 1 1 1" shadow="true" content="{description}" />
				</panel>
				<panel height="0.3h" width="100%"/>
			</panel>
		</floater>
	</template>

	<template name="command_button">
		<panel>
			<image texture="{texture}" rendermode="{rendermode=normal}" watch="{trigger}" ontriggerlua="if (AtoB(param)) then self:SetRenderMode('normal') else self:SetRenderMode('grayscale') end"/>
			<panel>
				<button
					texture="/ui/elements/optiui_button_bevel.tga"
					onclicklua="PlaySound('/shared/sounds/ui/button_click_04.wav') {onclicklua}"
					onclick="{onclick}"
					onrightclick="SecondaryAction({slot});"
					onmouseoverlua="GetWidget('command_tooltip{slot}', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('command_tooltip{slot}', 'game'):SetVisible(0)"
					interactive="false"
					enabled="{enabled=true}"
					watch="{trigger}"
					ontriggerlua="self:SetEnabled(AtoB(param))"
				/>
			</panel>
		</panel>
	</template>

	<!-- ability frame templates-->
	<template name="ability_frame_shared">
		<!-- SINGLE-->
		<panel name="ability_frame_shared_{slot}"
			width="4.0h"
			height="100%"
			align="{align}"
			valign="center"
			color="invisible"
			watch="ActiveInventoryExists{slot}"
			ontriggerlua="self:SetVisible(AtoB(param))"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
		>
			<panel x="0" y="0" align="center" valign="center" height="4.0h" width="4.0h" >
				<instance name="shared_ability_button" slot="{slot}" bordercolor="{bordercolor}"/>
			</panel>
		</panel>
	</template>

	<!-- OptiUI: Manacost label -->
	<template name="ability_frame_manacost">
		<label x="{x}" fitx="1" align="right" textalign="center" textvalign="center" color="gray" font="{font=dyn_10}" outline="1"
			watch="ActiveInventoryDescription{slot}"
			ontriggerlua="
				if (tonumber(param2) and (tonumber(param2) > 0.0)) then
					self:SetColor('cyan')
					self:SetText(round(param2))
				else
					self:SetText('-')
					self:SetColor('gray')
				end
				Game.manaCost{slot} = tonumber(param2)
			"
			watch2="ActiveInventoryExists{slot}"
			ontrigger2lua="
				if (not AtoB(param)) then
					self:SetText('-')
					self:SetColor('gray')
				elseif ((Game.manaCost{slot} ~= nil) and (Game.manaCost{slot} > 0.0)) then
					self:SetColor('cyan')
					self:SetText(round(Game.manaCost{slot}))
				end
			"
			onshowlua="
				local widget = self
				widget:SetColor('gray')
				local f = function(_, mana)
					if ((tonumber(widget:GetValue()) ~= nil) and (tonumber(mana) >= tonumber(widget:GetValue()))) then
						widget:SetColor('cyan')
					else
						widget:SetColor('gray')
					end
				end
				self:RegisterWatch('ActiveMana', f)
			"
			onhidelua="self:UnregisterWatch('ActiveMana')"
		/>
	</template>

	<!-- ability frame templates-->
	<template name="ability_frame_multi_slots">
		<!-- SINGLE, used for the multiabilities feature-->
		<panel
			width="5.9h"
			height="4.9h"
			align="center"
			valign="center"
			color="invisible"
			sticky="true"
			stickytoinvis="false"
			visible="true"
			noclick="1"
		>
			<panel align="center" width="100@" height="100%" color="invisible" noclick="true">
				<frame borderthickness="1" bordercolor="gray" color="black" noclick="true" />
				
				<instance name="ability_button" slot="{slot}"/>

				<!-- mana cost -->
				<panel x="1" y="-1" width="-2" height="30.0%" valign="bottom" passivechildren="true" noclick="true"
					watch="ActiveInventoryExists{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .6" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 0 0 .7" />

					<label x="0h" fitx="1" align="left" textalign="center" textvalign="center" color="yellow" font="dyn_10" outline="1"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetText(tonumber(param5)) self:SetVisible(tonumber(param5))"
					/>
					<label x="0h" fitx="1" align="right" textalign="center" textvalign="center" color="cyan" font="dyn_10" outline="1"
						watch="ActiveInventoryHotkeys{slot}"
						ontriggerlua="self:SetText(param1)"
					/>
				</panel>
			</panel>
		</panel>
	</template>

	<template name="ability_frame_single">
		<!-- SINGLE-->
		<panel
			width="9.0h"
			height="5.5h"
			align="center"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'single')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="true"
		>
			<panel align="center" width="100@" height="100%" color="invisible" noclick="true">
				<frame borderthickness="1" bordercolor="gray" color="black" noclick="true" />

				<instance name="ability_button" slot="{slot}"/>

				<!-- mana cost -->
				<panel x="1" y="-1" width="-2" height="30.0%" valign="bottom" passivechildren="true" noclick="true"
					watch="ActiveInventoryExists{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .6" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 0 0 .7" />

					<label x="0h" fitx="1" align="left" textalign="center" textvalign="center" color="yellow" font="dyn_10" outline="1"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetText(tonumber(param5)) self:SetVisible(tonumber(param5))"
					/>
					<instance name="ability_frame_manacost" slot="{slot}" x="-05%" font="dyn_10" />
				</panel>
			</panel>
			<frame width="100@" height="100%" align="center" valign="center" color="invisible" bordercolor="#00FF00" borderthickness="0.1h" visible="false" watch="HeroLevelupMode" ontriggerlua="self:SetVisible(AtoB(param))" noclick="true"/>
		</panel>
	</template>

	<template name="ability_frame_single_plus_one">
		<!-- SINGLE plus ONE-->
		<panel
			width="9.0h"
			height="5.5h"
			align="center"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'single_plus_one')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="true"
		>
			<panel align="center" width="100%" height="100%" color="invisible" noclick="true">
				<frame borderthickness="1" bordercolor="gray" color="black" noclick="true" />

				<panel width="50%" height="50@" noclick="true">
					<instance name="ability_button" slot="{slot_a}"/>
				</panel>
				<panel width="50%" height="50@" align="right" noclick="true">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<!-- mana cost -->
				<panel x="1" y="-1" width="-2" height="30.0%" valign="bottom" passivechildren="true" noclick="true"
					watch="ActiveInventoryExists{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .6" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 0 0 .7" />

					<label x="0h" fitx="1" align="left" textalign="center" textvalign="center" color="yellow" font="dyn_10" outline="1"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetText(tonumber(param5)) self:SetVisible(tonumber(param5))"
					/>
					<instance name="ability_frame_manacost" slot="{slot_a}" x="-55%" font="dyn_10" />
					<instance name="ability_frame_manacost" slot="{slot_b}" x="-05%" font="dyn_9" />
				</panel>
			</panel>
		</panel>
	</template>

	<template name="ability_frame_double">
		<!-- double-->
		<panel
			width="9.0h"
			height="5.5h"
			align="center"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'double')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="true"
		>
			<panel align="center" width="100%" height="100%" color="invisible" noclick="true">
				<frame borderthickness="1" bordercolor="gray" color="black" noclick="true" />

				<panel width="50%"  height="50@" >
					<instance name="ability_button_small" slot="{slot_a}"/>
				</panel>
				<panel width="50%" height="50@" align="right" >
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<!-- mana cost -->
				<panel x="1" y="-1" width="-2" height="30.0%" valign="bottom" passivechildren="true" noclick="true"
					watch="ActiveInventoryExists{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .6" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 0 0 .7" />

					<label x="0h" fitx="1" align="left" textalign="center" textvalign="center" color="yellow" font="dyn_10" outline="1"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetText(tonumber(param5)) self:SetVisible(tonumber(param5))"
					/>
					<instance name="ability_frame_manacost" slot="{slot_a}" x="-55%" font="dyn_9" />
					<instance name="ability_frame_manacost" slot="{slot_b}" x="-05%" font="dyn_9" />
				</panel>
			</panel>
		</panel>
	</template>

	<template name="ability_frame_single_plus_two">
		<!-- SINGLE plus TWO-->
		<panel
			width="9.0h"
			height="5.5h"
			align="center"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'single_plus_two')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="1"
		>
			<panel y="1.7h" noclick="1">
				<panel align="center" x="0" y="-.13h" height="3.5h" width="3.5h" noclick="1">
					<instance name="ability_button" slot="{slot_a}"/>
				</panel>

				<panel x="1.7h" y="3.44h" height="1.9h" width="1.9h" noclick="1">
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<panel x="3.62h" y="3.44h" height="1.9h" width="1.9h" noclick="1">
					<instance name="ability_button_small" slot="{slot_c}"/>
				</panel>
				<image height="14h" width="7h" y="-4.5h" texture="/ui/common/ability_frame_2.tga" noclick="1" />
			</panel>

			<!-- I DONT HAVE A MANA COST THING BECAUSE I AM NEVER USED LOLWUT -->
		</panel>
	</template>

	<template name="ability_frame_triple">
		<!-- Triple-->
		<panel
			width="9.0h"
			height="5.5h"
			align="center"
			valign="center"
			color="invisible"
			watch="ActiveInventoryInterface{slot}"
			ontriggerlua="self:SetVisible(param == 'triple')"
			sticky="true"
			stickytoinvis="false"
			visible="false"
			noclick="true"
		>
			<panel align="center" width="100%" height="100%" color="invisible" noclick="true">
				<frame borderthickness="1" bordercolor="gray" color="black" noclick="true" />

				<panel width="33.0%" height="33.0@" >
					<instance name="ability_button_small" slot="{slot_a}"/>
				</panel>

				<panel width="33.0%" height="33.0@" align="center" >
					<instance name="ability_button_small" slot="{slot_b}"/>
				</panel>

				<panel width="33.0%" height="33.0@" align="right" >
					<instance name="ability_button_small" slot="{slot_c}"/>
				</panel>

				<!-- mana cost -->
				<panel x="1" y="-1" width="-2" height="30.0%" valign="bottom" passivechildren="true" noclick="true"
					watch="ActiveInventoryExists{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .6" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 0 0 .7" />

					<label x="0h" fitx="1" align="left" textalign="center" textvalign="center" color="yellow" font="dyn_10" outline="1"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetText(tonumber(param5)) self:SetVisible(tonumber(param5))"
					/>
					<instance name="ability_frame_manacost" slot="{slot}" x="-05%" font="dyn_10" />
				</panel>
			</panel>
		</panel>
	</template>

	<template name="ability_button">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(not AtoB(param))"
			>
				<image texture="/ui/legion/ability_coverup.tga"/>
			</panel>
			<!-- UIScript -->
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(AtoB(param))"
				onclick="PrimaryAction({slot});"
				onrightclick="SecondaryAction({slot});"
				onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
				onmouseoutlua="
					if (GetCvarBool('cg_useLongTooltips')) then
						GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
					else
						GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
					end
					if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
				watch2="EventActiveInventoryUpgrade{slot}"
				ontrigger2="If(IsVisible(), Call('effect_panel', 'StartEffect(\'/ui/common/models/choose/choose.effect\', ' # GetAbsoluteFractionX(0.5) / GetScreenWidth() # ', ' # GetAbsoluteFractionY(0.5) / GetScreenHeight() # ', \'1 1 1 1\');'));"
			>

				<!-- Ability Icon -->
				<image noclick="true" onloadlua="Game:RegisterAbilityIcon(self, {slot})" />

				<piegraph start="270" end="-90" square="true" color="#000000cc" noclick="true"
					onloadlua="Game:RegisterAbilityPie(self, {slot})"
				/>

				<!-- Ability Cooldown -->
				<label noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" outline="1" font="dyn_12"
					onloadlua="Game:RegisterAbilityCooldown(self, {slot})"
				/>
				
				<!-- Ability Timer -->
				<label
					y="0%"
					width="100%"
					height="33%"
					valign="top"
					textvalign="center"
					textalign="center"
					color="white"
					outline="true"
					font="dyn_12"
					noclick="true"
					onloadlua="Game:RegisterAbilityTimer(self, {slot})"
					watch="ActiveInventoryCharges{slot}"
					ontriggerlua="if (tonumber(param) > 0) then self:SetVAlign('center') else self:SetVAlign('top') end"
				/>

				<!-- UIScript -->
				<panel
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="
						if ((tonumber(param5) > 0) or (tonumber(param7) == 0)) then
							self:SetVisible(1)
							self:SetColor('white')
						else
							self:SetVisible(0)
							self:SetColor('invisible')
						end"
				/>

				<!-- UIScript -->
				<button
					rendermode="overlay"
					onclick="PrimaryAction({slot}); ActivateTool({slot});"
					onrightclick="SecondaryAction({slot}); ActivateToolSecondary({slot});"
					onclicklua="PlaySound('/shared/sounds/ui/ability_select.wav')"
					onrightclicklua="PlaySound('/shared/sounds/ui/ability_select.wav')"
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					watch="ActiveInventoryCanActivate{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1lua="
						if ((tonumber(param5) > 0) or (tonumber(param7) == 0)) then
							self:SetEnabled(1)
						else
							self:SetEnabled(0)
						end"
					interactive="false"
				/>

				<image
					texture="$white"
					rendermode="overlay"
					noclick="true"
					onloadlua="Game:RegisterAbilityOverlay(self, {slot})"
				/>

				<!--  silenced intentory section... can move or add a timer later -->
				<image align="center" valign="center" width="90%" height="90%" texture="elements/silence.tga" watch="Silenced" ontriggerlua="self:SetVisible(AtoB(param))" color="1 1 1 1" noclick="1" visible="0"/>

				<!-- Ability Charges -->
				<panel
					width="35%"
					height="35%"
					align="right"
					valign="top"
					watch="ActiveInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					noclick="true"
					passivechildren="true"
					color="0 0 0 .6"
				>
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9"
						watch="ActiveInventoryCharges{slot}"
						ontriggerlua="self:SetText(param); if (tonumber(param) > 99) then self:SetFont('dyn_8') else self:SetFont('dyn_9') end"
					/>
					<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1" />
				</panel>

				<panel x="2" y="2" width="-4" height="-4" noclick="true" passivechildren="true" >
					<!-- Ability Refresh effect -->
					<!-- UIScript -->
					<modelpanel
						visible="0"
						noclick="true"
						model="common/models/refresh/refresh.mdf"
						anim="idle"
						effect="common/models/refresh/refresh.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
						watch="EventActiveInventoryReady{slot}"
						ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/refresh/refresh.effect'); SleepWidget(1333, 'SetVisible(false);');"
						onshowlua="PlaySound('/shared/sounds/ui/ability_refresh.wav')"
					/>

					<!-- Ability Targeting -->
					<frame
						borderthickness="1"
						bordercolor="orange"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param8))"
						noclick="true"
						passivechildren="true"
					>
						<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive" />
						<!-- <modelpanel
							noclick="true"
							model="effects/portrait_lvlup/portrait_emitter.mdf"
							anim="idle"
							effect="effects/portrait_lvlup/ability_active.effect"
							camerapos="-1 10 0"
							cameraangles="0 0 180"
							camerafov="60"
							depthclear="false"
							depthcompress="true"
							onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
						/> -->
					</frame>

					<!-- Ability Toggle active -->
					<frame
						borderthickness="1"
						bordercolor="orange"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param1))"
						noclick="true"
						passivechildren="true"
					>
						<!-- <image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive" /> -->
						<modelpanel x="2" y="2" width="-4" height="-4"
							visible="1"
							noclick="true"
							model="common/models/toggle/toggle.mdf"
							anim="idle"
							effect="common/models/toggle/toggle.effect"
							camerapos="0 1 0"
							cameraangles="0 0 180"
							camerafov="45"
							cameranear="1"
							carmerafar="100"
							depthclear="false"
							depthcompress="true"
							onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
						/>
					</frame>

					<!-- Ability Activating -->
					<frame
						borderthickness="1"
						bordercolor="yellow"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param4))"
						noclick="true"
						passivechildren="true"
					>
						<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
					</frame>
				</panel>
			</panel>
			<frame borderthickness="1" bordercolor="{bordercolor=gray}" color="invisible" noclick="true" />
		</panel>
	</template>

	<template name="ability_button_small">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(not AtoB(param))"
			>
				<image texture="/ui/legion/ability_coverup.tga"/>
			</panel>
			<!-- UIScript -->
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(AtoB(param))"
				onclick="PrimaryAction({slot});"
				onrightclick="SecondaryAction({slot});"
				onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
				onmouseoutlua="
					if (GetCvarBool('cg_useLongTooltips')) then
						GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
					else
						GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
					end
					if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
			>

				<!-- OptiUI: Ability Icon -->
				<image noclick="true" onloadlua="Game:RegisterAbilityIcon(self, {slot})" />

				<piegraph start="270" end="-90" square="true" color="#000000cc" noclick="true"
					onloadlua="Game:RegisterAbilityPie(self, {slot})"
				/>

				<!-- OptiUI: Ability Cooldown -->
				<label noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" outline="1" font="dyn_10"
					onloadlua="Game:RegisterAbilityCooldown(self, {slot})"
				/>
				
				<!-- Ability Timer -->
				<label
					y="10%"
					width="100%"
					height="33%"
					valign="top"
					textvalign="center"
					textalign="center"
					color="white"
					outline="true"
					font="dyn_10"
					noclick="true"
					onloadlua="Game:RegisterAbilityTimer(self, {slot})"
					watch="ActiveInventoryCharges{slot}"
					ontriggerlua="if (tonumber(param) > 0) then self:SetVAlign('center') else self:SetVAlign('top') end"
				/>

				<!-- UIScript -->
				<button
					rendermode="overlay"
					onclick="PrimaryAction({slot}); ActivateTool({slot});"
					onrightclick="SecondaryAction({slot});"
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					onhidelua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0)
						end"
					watch="ActiveInventoryCanActivate{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1lua="
						if ((tonumber(param5) > 0) or (tonumber(param7) == 0)) then
							self:SetEnabled(1)
						else
							self:SetEnabled(0)
						end"
					interactive="false"
				/>

				<image
					texture="$white"
					rendermode="overlay"
					noclick="true"
					onloadlua="Game:RegisterAbilityOverlay(self, {slot})"
				/>

				<!-- OptiUI: Ability Charges -->
				<panel
					width="40%"
					height="40%"
					align="right"
					valign="top"
					watch="ActiveInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					noclick="true"
					passivechildren="true"
					color="0 0 0 .6"
				>
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_8"
						watch="ActiveInventoryCharges{slot}"
						ontriggerlua="self:SetText(param)"/>
					<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1" />
				</panel>

				<panel x="2" y="2" width="-4" height="-4" noclick="true" passivechildren="true" >
					<!-- Ability Refresh effect -->
					<!-- UIScript -->
					<modelpanel
						visible="0"
						noclick="true"
						model="common/models/refresh/refresh.mdf"
						anim="idle"
						effect="common/models/refresh/refresh.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
						watch="EventActiveInventoryReady{slot}"
						ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/refresh/refresh.effect'); SleepWidget(1333, 'SetVisible(false);');"
						onshowlua="PlaySound('/shared/sounds/ui/ability_refresh.wav')"
					/>

					<!-- Ability Targeting -->
					<frame
						borderthickness="1"
						bordercolor="orange"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param8))"
						noclick="true"
						passivechildren="true"
					>
						<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive" />
						<!-- <modelpanel
							noclick="true"
							model="effects/portrait_lvlup/portrait_emitter.mdf"
							anim="idle"
							effect="effects/portrait_lvlup/ability_active.effect"
							camerapos="-1 10 0"
							cameraangles="0 0 180"
							camerafov="60"
							depthclear="false"
							depthcompress="true"
							onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
						/> -->
					</frame>

					<!-- Ability Toggle active -->
					<frame
						borderthickness="1"
						bordercolor="orange"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param1))"
						noclick="true"
						passivechildren="true"
					>
						<modelpanel x="2" y="2" width="-4" height="-4"
							visible="1"
							noclick="true"
							model="common/models/toggle/toggle.mdf"
							anim="idle"
							effect="common/models/toggle/toggle.effect"
							camerapos="0 1 0"
							cameraangles="0 0 180"
							camerafov="45"
							cameranear="1"
							carmerafar="100"
							depthclear="false"
							depthcompress="true"
							onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
						/>
					</frame>

					<!-- Ability Activating -->
					<frame
						borderthickness="1"
						bordercolor="yellow"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param4))"
						noclick="true"
						passivechildren="true"
					>
						<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
					</frame>
				</panel>
			</panel>
			<!-- UIScript -->
			<!-- <panel
				color="invisible"
				texture="/ui/info/drop.tga"
				watch="ItemCursorVisible"
				ontrigger="SetVisible(param); RefreshCursor();"
				onmouseoverlua="self:SetColor('white');"
				onmouseoutlua="self:SetColor('invisible');"
				onclick="ItemPlace({slot});"
				onrightclick="ItemPlace({slot});"
			/> -->
			<frame borderthickness="1" bordercolor="{bordercolor=gray}" color="invisible" noclick="true" />
		</panel>
	</template>

	<template name="ability_button_lvlup">
		<panel>
			<!-- OptiUI: New effect is silly and it lags. Remove it -->
			<image texture="/ui/legion/ability_coverup.tga"/>
			<panel name="ability_lvlup_button_{slot}">
				<image name="ability_lvlup_button_icon_{slot}" noclick="1" />
				<button name="ability_lvlup_button_button_{slot}"
					color="invisible"
					onmouseoverlua="if (GetCvarBool('cg_useLongTooltips')) then GetWidget('ability_levelup_tooltip{slot}', 'game'):SetVisible(1) else GetWidget('ability_levelup_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(1) end"
					onmouseoutlua="if (GetCvarBool('cg_useLongTooltips')) then GetWidget('ability_levelup_tooltip{slot}', 'game'):SetVisible(0) else GetWidget('ability_levelup_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0) end"
					onhidelua="if (GetCvarBool('cg_useLongTooltips')) then GetWidget('ability_levelup_tooltip{slot}', 'game'):SetVisible(0) else GetWidget('ability_levelup_tooltip_simple{slot}', 'game_shop_shared'):SetVisible(0) end"
					interactive="false"
				/>
				<panel name="ability_lvlup_button_label_parent_{slot}" y="-0.23h" width="1.7h" height="1.4h" align="center" valign="bottom" color="invisible" noclick="true" passivechildren="true" >
					<label name="ability_lvlup_button_label_{slot}" width="100%" height="100%" textalign="center" textvalign="center" color="white" font="dyn_9" outline="1" />
				</panel>
			</panel>
			<frame name="level_up_effect_{slot}" borderthickness="1" bordercolor="gray" color="invisible" noclick="true" />
		</panel>
	</template>

	<template name="shared_ability_button">
		<panel>
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(not AtoB(param))"
			>
				<image texture="/ui/legion/ability_coverup.tga"/>
			</panel>
			<!-- UIScript -->
			<panel
				watch="ActiveInventoryExists{slot}"
				ontriggerlua="self:SetVisible(AtoB(param))"
				onmouseoverlua="GetWidget('ability_levelup_tooltip_shared{slot}', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('ability_levelup_tooltip_shared{slot}', 'game'):SetVisible(0)"
				watch2="EventActiveInventoryUpgrade{slot}"
				ontrigger2="If(IsVisible(), Call('effect_panel', 'StartEffect(\'/ui/common/models/choose/choose.effect\', ' # GetAbsoluteFractionX(0.5) / GetScreenWidth() # ', ' # GetAbsoluteFractionY(0.5) / GetScreenHeight() # ', \'1 1 1 1\');'));"
			>
				<image
					watch="ActiveInventoryIcon{slot}"
					ontriggerlua="self:SetTexture(param);"
					watch0="ActiveInventoryStatus{slot}"
					ontrigger0lua="	if (AtoB(param0) and AtoB(param11)) then
										self:SetRenderMode('normal')
									else
										self:SetRenderMode('grayscale')
									end"
					noclick="true"
				/>

				<piegraph start="270" end="-90" square="true" color="#000000cc" noclick="true"
					onloadlua="Game:RegisterAbilityPie(self, {slot})"
				/>

				<panel
					onmouseoverlua="GetWidget('ability_tooltip_shared{slot}', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('ability_tooltip_shared{slot}', 'game'):SetVisible(0)"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="
						if (tonumber(param5) > 0 or tonumber(param7) == 0) then
							self:SetVisible(1)
							self:SetColor('white')
						else
							self:SetVisible(0)
							self:SetColor('invisible')
						end"
				/>
				<!-- UIScript -->
				<button
					rendermode="overlay"
					onclicklua="PlaySound('/shared/sounds/ui/ability_select.wav')"
					onclick="ActivateSharedTool({slot});"
					onrightclicklua="PlaySound('/shared/sounds/ui/ability_select.wav')"
					onrightclick="ActivateSharedToolSecondary({slot});"
					onmouseoverlua="GetWidget('ability_tooltip_shared{slot}', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('ability_tooltip_shared{slot}', 'game'):SetVisible(0)"
					watch="ActiveInventoryCanActivate{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
					watch1="ActiveInventoryStatus{slot}"
					ontrigger1lua="
						if (tonumber(param5) > 0 or tonumber(param7) == 0) then
							self:SetEnabled(1)
						else
							self:SetEnabled(0)
						end"
					interactive="false"
				/>

				<image
					texture="$white"
					rendermode="overlay"
					noclick="true"
					onloadlua="Game:RegisterAbilityOverlay(self, {slot})"
				/>

				<panel
					width="35%"
					height="35%"
					align="right"
					valign="top"
					watch="ActiveInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					noclick="true"
					passivechildren="true"
					color="0 0 0 .6"
				>
					<label width="100%" height="100%" textalign="center" textvalign="center" color="white" shadow="true" font="dyn_9" watch="ActiveInventoryCharges{slot}" ontriggerlua="self:SetText(param);"/>
					<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1" />
				</panel>

				<panel x="2" y="2" width="-4" height="-4" noclick="true" passivechildren="true" >

					<!-- Refresh effect -->
					<!-- UIScript -->
					<modelpanel
						visible="0"
						noclick="true"
						model="common/models/refresh/refresh.mdf"
						anim="idle"
						effect="common/models/refresh/refresh.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
						watch="EventActiveInventoryReady{slot}"
						ontrigger="SetVisible(true); SetAnim('idle'); SetEffect('/ui/common/models/refresh/refresh.effect'); SleepWidget(1333, 'SetVisible(false);');"
						onshow="PlaySound('/shared/sounds/ui/ability_refresh.wav'); "
					/>

					<!-- Targeting -->
					<frame
						borderthickness="1"
						bordercolor="orange"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param8))"
						noclick="true"
						passivechildren="true"
					>
						<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>
						<!-- <modelpane
							noclick="true"
							model="effects/portrait_lvlup/portrait_emitter.mdf"
							anim="idle"
							effect="effects/portrait_lvlup/ability_active.effect"
							camerapos="-1 10 0"
							cameraangles="0 0 180"
							camerafov="60"
							depthclear="false"
							depthcompress="true"
							onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
						/> -->
					</frame>

					<!-- Toggle active -->
					<frame
						borderthickness="1"
						bordercolor="orange"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param1))"
						noclick="true"
						passivechildren="true"
					>
						<modelpanel x="2" y="2" width="-4" height="-4"
							visible="1"
							noclick="true"
							model="common/models/toggle/toggle.mdf"
							anim="idle"
							effect="common/models/toggle/toggle.effect"
							camerapos="0 1 0"
							cameraangles="0 0 180"
							camerafov="45"
							cameranear="1"
							carmerafar="100"
							depthclear="false"
							depthcompress="true"
							onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
						/>
					</frame>

					<!-- Activating -->
					<frame
						borderthickness="1"
						bordercolor="yellow"
						color="invisible"
						visible="false"
						watch="ActiveInventoryStatus{slot}"
						ontriggerlua="self:SetVisible(AtoB(param4))"
						noclick="true"
						passivechildren="true"
					>
						<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
					</frame>
				</panel>

				<panel color="invisible" noclick="1" >
					<label noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" shadow="1" font="dyn_10"
						onloadlua="Game:RegisterAbilityCooldown(self, {slot})"
					/>
				</panel>
			</panel>
			<frame borderthickness="1" bordercolor="{bordercolor=gray}" color="invisible" noclick="true" />
		</panel>
	</template>

	<template name="inventory_button">
		<panel noclick="1">
			<panel name="inventory_button_bg_empty_{slot}" color="invisible" noclick="1">
				<image texture="/ui/common/empty_pack.tga"/>
			</panel>
			<panel name="inventory_button_parent_{slot}"
				onclick="PrimaryAction({slot});"
				onrightclick="SecondaryAction({slot});"
				onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
				onmouseoutlua="
					if (GetCvarBool('cg_useLongTooltips')) then
						GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
					else
						GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(0)
					end
					if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
			>
				<!-- Icon -->
				<image name="inventory_button_icon_{slot}" noclick="true" />

				<!-- Recipe scroll -->
				<panel name="inventory_button_recipe_parent_{slot}" color="black" noclick="true" passivechildren="true" >
					<image name="inventory_button_recipe_icon_{slot}"  width="55%" height="55%" align="center" valign="center" noclick="1" />
					<image texture="/ui/elements/shop/scroll_overlay.tga" noclick="1"/>
				</panel>

				<!-- Inventory Cooldown overlay-->
				<piegraph name="inventory_button_cooldown_overlay_{slot}" start="270" end="-90" square="true" color="#000000cc" noclick="true"/>
				<!-- Inventory Numeric cooldown timer -->
				<label name="inventory_button_cooldown_label_{slot}" noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" outline="1" font="dyn_12" />

				<!-- Inventory Timer -->
				<!-- OptiUI: Moved charge timer to the center of the item button -->
				<label name="inventory_button_timer_{slot}"
					y="0h"
					width="100%"
					height="33%"
					valign="center"
					textvalign="center"
					textalign="center"
					color="white"
					outline="true"
					font="dyn_11"
					noclick="true"
				/>
				<!-- UIScript -->
				<button name="inventory_button_activate_{slot}"
					texture="/ui/elements/optiui_button_bevel.tga"
					onclick="PrimaryAction({slot}); ActivateTool({slot});"
					onrightclick="SecondaryAction({slot});"
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					interactive="false"
				/>

				<!-- Bevel -->
				<!-- UIScript -->
				<image name="inventory_button_bevel_{slot}" texture="/ui/elements/optiui_button_bevel_up.tga"
					onmouseoverlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(1)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(1)
						end

						if (GetCvarBool('cg_showAreaCast')) then
							self:UICmd('ShowRangeIndicator(Evaluate(\'cvar_ability_tooltip{slot}_def\'), Evaluate(\'cvar_ability_tooltip{slot}_level\'));')
						end"
					onmouseoutlua="
						if (GetCvarBool('cg_useLongTooltips')) then
							GetWidget('ability_tooltip{slot}', 'game'):SetVisible(0)
						else
							GetWidget('ability_tooltip_simple{slot}', '{simple_tooltip_interface=game}'):SetVisible(0)
						end
						if (GetCvarBool('cg_showAreaCast')) then self:UICmd('HideRangeIndicator()') end"
					noclick="true"
				/>

				<!-- Color overlay -->
				<image name="inventory_button_color_overlay_{slot}" texture="$white" rendermode="overlay" noclick="true" />

				<!-- Purchased Recently -->
				<!-- OptiUI: Moved icon to the top left -->
				<image name="inventory_button_recent_{slot}" width="33%" height="33%" texture="/ui/icons/purchased_recently.tga" noclick="true" />

				<!-- Shared -->
				<image name="inventory_button_shared_{slot}" width="33%" height="33%" texture="/ui/icons/shared.tga" noclick="true" />

				<!-- Muted -->
				<image name="inventory_button_muted_{slot}"  width="33%" height="33%" texture="/ui/icons/muted.tga" noclick="true" />

				<!-- Inventory Charges -->
				<!-- OptiUI: Move charges counter to the top right -->
				<panel name="inventory_button_charges_parent_{slot}"
					width="33%"
					height="33%"
					align="right"
					valign="top"
					noclick="true"
					passivechildren="true"
					color="0 0 0 .6"
				>
					<!-- OptiUI: Made charge counter less intrusive -->
					<label name="inventory_button_charges_label_{slot}"
						width="100%"
						height="100%"
						textalign="center"
						textvalign="center"
						color="white"
						shadow="true"
						font="dyn_9"
					/>
					<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1" />
				</panel>

				<panel x="2" y="2" width="-4" height="-4" noclick="true" passivechildren="true" >
					<!-- Refresh effect -->
					<modelpanel name="inventory_button_refresh_{slot}" visible="0" noclick="true"
						model="common/models/refresh/refresh.mdf"
						anim="idle"
						effect="common/models/refresh/refresh.effect"
						camerapos="0 1 0"
						cameraangles="0 0 180"
						camerafov="45"
						cameranear="1"
						carmerafar="100"
						depthclear="false"
						depthcompress="true"
					/>

					<!-- Targeting -->
					<frame name="inventory_button_target_parent_{slot}" borderthickness="1" bordercolor="orange" color="invisible" visible="false" noclick="true" passivechildren="true" >
						<image x="2" y="2" width="-4" height="-4" color="orange" texture="/ui/fps/selected.tga" rendermode="additive"/>
						<!-- <modelpanel
							noclick="true"
							model="effects/portrait_lvlup/portrait_emitter.mdf"
							anim="idle"
							effect="effects/portrait_lvlup/ability_active.effect"
							camerapos="-1 10 0"
							cameraangles="0 0 180"
							camerafov="60"
							depthclear="false"
							depthcompress="true"
							onshow="SetEffect('/ui/effects/portrait_lvlup/ability_active.effect');"
						/> -->
					</frame>

					<!-- Toggle active -->
					<frame name="inventory_button_toggle_{slot}"
						borderthickness="1"
						bordercolor="orange"
						color="invisible"
						visible="false"
						noclick="true"
						passivechildren="true"
					>
						<modelpanel x="2" y="2" width="-4" height="-4"
							visible="1"
							noclick="true"
							model="common/models/toggle/toggle.mdf"
							anim="idle"
							effect="common/models/toggle/toggle.effect"
							camerapos="0 1 0"
							cameraangles="0 0 180"
							camerafov="45"
							cameranear="1"
							carmerafar="100"
							depthclear="false"
							depthcompress="true"
							onshow="SetAnim('idle'); SetEffect('/ui/common/models/toggle/toggle.effect');"
						/>
					</frame>

					<!-- Activating -->
					<frame name="inventory_button_activating_{slot}" borderthickness="1" bordercolor="yellow" color="invisible" visible="false" noclick="true" passivechildren="true" >
						<image x="2" y="2" width="-4" height="-4" color="yellow" texture="/ui/fps/selected.tga" rendermode="additive"/>
					</frame>
				</panel>

				<!-- OptiUI: Level, Mana and Status labels for items -->
				<panel height="33%" valign="bottom" noclick="true" passivechildren="true" >
					<frame name="inventory_button_level_parent_{slot}" width="33%" color="0 0 0 .6" bordercolor="gray" borderthickness="1" >
						<label name="inventory_button_level_label_{slot}" textalign="center" textvalign="center" color="yellow" font="dyn_9" outline="1" />
					</frame>
					<frame width="60%" align="right" color="0 0 0 .6" bordercolor="gray" borderthickness="1"
						watch="ActiveInventoryDescription{slot}"
						ontriggerlua="self:SetVisible(tonumber(param2))"
					>
						<label textalign="center" textvalign="center" color="cyan" font="dyn_9" outline="1"
							watch="ActiveInventoryDescription{slot}"
							ontriggerlua="self:SetText(round(param2))"
						/>
					</frame>
				</panel>
			</panel>
			<!-- UIScript -->
			<panel name="inventory_button_item_cursor_{slot}" visible="0"
				color="invisible"
				texture="/ui/info/drop.tga"
				onmouseoverlua="self:SetColor('white')"
				onmouseoutlua="self:SetColor('invisible')"
				onclick="ItemPlace({slot});"
				onrightclick="ItemPlace({slot});"
				watch="ItemCursorVisible"
				ontriggerlua="self:SetVisible(AtoB(param)) self:UICmd('RefreshCursor();')"
			/>
			<panel color="invisible" noclick="true" name="player_inventory_slot_{slot}" />
			<frame borderthickness="1" bordercolor="{bordercolor=gray}" color="invisible" noclick="1"/>
		</panel>
	</template>
	
	<template name="inventory_game_button">
		<panel noclick="1"
			watch="{main_watch}"
			ontriggerlua="{main_ontriggerlua}"
			visible="{visible=1}"
		>
			<!-- Icon -->
			<image noclick="true"
				texture="{texture}"
				watch="{image_watch}"
				ontriggerlua="{image_ontriggerlua}"
				watch2="{cooldown_timer}"
				ontrigger2lua="
					if (tonumber(param) > 0) then
						self:SetRenderMode('grayscale')
					else
						self:SetRenderMode('normal')
					end
				"
			/>

			<!-- UIScript -->
			<button
				texture="/ui/elements/optiui_button_bevel.tga"
				onclicklua="{onclicklua}"
				onclick="{onclick}"
				onmouseoverlua="{onmouseoverlua}"
				onmouseoutlua="{onmouseoutlua}"
				watch="{button_watch}"
				ontriggerlua="{button_ontriggerlua}"
				interactive="false"
			/>

			<!-- charges -->
			<panel
				width="33.0%"
				height="33.0%"
				align="right"
				valign="top"
				noclick="true"
				passivechildren="true"
				color="0 0 0 .6"
				visible="{hasCharges=false}"
				watch="{charges_panel_watch}"
				ontriggerlua="{charges_panel_ontriggerlua}"
			>
				<label noclick="1"
					watch="{charges_watch}"
					ontriggerlua="{charges_ontriggerlua}"
					width="100%"
					height="100%"
					textalign="center"
					textvalign="center"
					color="white"
					shadow="true"
					font="dyn_8"
				/>
				<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1" />
			</panel>

			<!-- cover -->
			<panel
				visible="0"
				watch="{cover_watch}"
				ontriggerlua="{cover_ontriggerlua}"
				onmouseoverlua="{cover_onmouseoverlua}"
				onmouseoutlua="{cover_onmouseoutlua}"
			/>

			<!-- cooldown stuff -->
			<piegraph
				visible="0"
				start="270" end="-90"
				square="true"
				color="#000000cc"
				watch="{cooldown_timer}"
				ontriggerlua="self:SetVisible(tonumber(param) > 0)"
				watch2="{cooldown_percent}"
				ontrigger2lua="self:SetValue(tonumber(param))"
			/>
			<label
				font="dyn_12"
				color="#87CEEB"
				outline="1"
				visible="0"
				watch="{cooldown_timer}"
				ontriggerlua="self:SetVisible(tonumber(param) > 0) self:SetText(param..'s')"
				textalign="center"
				textvalign="center"
			/>
			<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1" />
		</panel>
	</template>

	<template name="inventory_game_icon">
		<panel noclick="1">
			<!-- Icon -->
			<image
				watch="{watch}"
				ontriggerlua="{ontriggerlua}"
				watch2="{watch2}"
				ontrigger2lua="{ontrigger2lua}"
				onmouseoverlua="{onmouseoverlua}"
				onmouseoutlua="{onmouseoutlua}"
			/>
			<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1" />
		</panel>
	</template>

	<template name="inventory_info_ward" >
		<panel noclick="1" visible="0"
			watch="SelectedInventoryExists{slot}"
			ontriggerlua="self:SetVisible(AtoB(param))"
		>
			<panel align="center" valign="center" 
				onmouseoverlua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(0)"
				onhidelua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(0)"
			>
				<image usealphamask="true" alphamaskfile="/ui/masks/circle_mask.tga" noclick="true"
					watch="SelectedInventoryIcon{slot}"
					ontriggerlua="self:SetTexture(param)"
				/>

				<piegraph start="270" end="-90" color="#000000cc" noclick="true"
					watch="SelectedInventoryCooldown{slot}"
					ontriggerlua="self:SetVisible(tonumber(param1) > 0) self:SetValue(param2)"
				/>

				<!-- Info Charges -->
				<panel
					width="50.00%"
					height="50.00%"
					align="right"
					valign="top"
					watch="SelectedInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					noclick="true"
					passivechildren="true"
					color="0 0 0 .6"
				>
					<label textalign="center" textvalign="center" color="white" font="dyn_10"
						watch="SelectedInventoryCharges{slot}"
						ontriggerlua="self:SetText(param);"
					/>
					<frame borderthickness="1" bordercolor="{bordercolor=gray}" color="invisible"/>
				</panel>
			</panel>
			<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1" />
		</panel>
	</template>

	<template name="inventory_info">
		<panel>
			<panel
				watch="SelectedInventoryExists{slot}"
				ontriggerlua="self:SetVisible(not AtoB(param))"
			>
				<image texture="/ui/legion/empty_pack.tga"/>
			</panel>
			<panel
				watch="SelectedInventoryExists{slot}"
				ontriggerlua="self:SetVisible(AtoB(param));"
				onmouseoverlua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(0)"
				onhidelua="GetWidget('inventory_info_tooltip{slot}', 'game'):SetVisible(0)"
				passivechildren="true"
			>
				<!-- Info Icon -->
				<image
					watch="SelectedInventoryIcon{slot}"
					ontriggerlua="self:SetTexture(param);"
					watch0="SelectedInventoryStatus{slot}"
					ontrigger0lua="	if (AtoB(param5)) then
										self:SetRenderMode('normal')
								   	else
								   		self:SetRenderMode('grayscale')
								   	end"
					watch1="SelectedInventoryRecipe{slot}"
					ontrigger1lua="self:SetVisible(not AtoB(param))"
				/>

				<!-- Recipe scroll -->
				<panel color="black" watch="SelectedInventoryRecipe{slot}" ontriggerlua="self:SetVisible(AtoB(param))">
					<image
						width="55%" height="55%"
						align="center" valign="center"
						watch="SelectedInventoryIcon{slot}"
						ontriggerlua="self:SetTexture(param);"
					/>
					<image texture="/ui/elements/shop/scroll_overlay.tga"/>
				</panel>

				<!-- Bevel -->
				<image texture="/ui/elements/optiui_button_bevel_up.tga" />

				<!-- Info Cooldown overlay-->
				<piegraph start="270" end="-90" square="true" color="#000000cc" watch="SelectedInventoryCooldown{slot}" ontriggerlua="self:SetVisible(tonumber(param1) > 0) self:SetValue(param2)" noclick="true"/>
				<!-- Info Numeric cooldown timer -->
				<!-- UIScript -->
				<panel color="invisible" noclick="1">
					<label noclick="1" valign="center" align="center" textvalign="center" textalign="center" color="#87CEEB" shadow="1" font="dyn_9" watch="SelectedInventoryCooldown{slot}" ontriggerlua="self:SetVisible(AtoB(param0)) self:SetText(self:UICmd('FtoT('..param0..', 0, 0, \'-\')')..'s')" />
				</panel>

				<!-- Info Timer -->
				<!-- UIScript -->
				<!-- OptiUI: Moved charge timer to the center of the icon -->
				<label
					y="0h"
					width="100%"
					height="33%"
					valign="top"
					textvalign="center"
					textalign="center"
					color="white"
					shadow="true"
					font="dyn_9"
					watch="SelectedInventoryHasTimer{slot}"
					ontriggerlua="self:SetVisible(AtoB(param))"
					watch1="SelectedInventoryTimer{slot}"
					ontrigger1="SetText(FtoT(param + 949));"
					watch2="SelectedInventoryCharges{slot}"
					ontrigger2lua="if (tonumber(param) > 0) then self:SetVAlign('center') else self:SetVAlign('top') end"
					noclick="true"
				/>

				<!-- Color overlay -->
				<image
					texture="$white"
					rendermode="overlay"
					watch="SelectedInventoryStatus{slot}"
					ontriggerlua="
						if (tonumber(param3) == 0 and tonumber(param4) > 0) then
							self:SetColor('#404040')
							self:SetVisible(1)
						elseif (AtoB(param1)) then
							self:SetColor('#676045')
							self:SetVisible(1)
						elseif (AtoB(param2)) then
							self:SetColor('#4444ff')
							self:SetVisible(1)
						else
							self:SetVisible(0)
						end
					"
					noclick="true"
				/>

				<!-- Shared -->
				<image
					width="40%" height="40%"
					texture="/items/icons/shared.tga"
					watch="SelectedInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param8) and AtoB(param7))"
					noclick="true"
				/>

				<!-- Purchased Recently -->
				<!-- OptiUI: Moved icon to the top left -->
				<image
					align="left"
					valign="top"
					width="40%"
					height="40%"
					texture="/items/icons/PurchasedRecently.tga"
					watch="ActiveInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param12) and (not AtoB(param10)))"
					noclick="true"
				/>

				<!-- Muted -->
				<image
					width="40%" height="40%"
					texture="/items/icons/muted.tga"
					watch="SelectedInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(AtoB(param8) and (not AtoB(param7)))"
					noclick="true"
				/>

				<!-- Info Charges -->
				<!-- OptiUI: Move charges counter to the top right -->
				<panel
					width="42.00%"
					height="42.00%"
					align="right"
					valign="top"
					watch="SelectedInventoryCharges{slot}"
					ontriggerlua="self:SetVisible(tonumber(param) > 0)"
					noclick="true"
					passivechildren="true"
					color="0 0 0 .6"
				>
					<label textalign="center" textvalign="center" color="white" font="dyn_9"
						watch="SelectedInventoryCharges{slot}"
						ontriggerlua="self:SetText(param);"
					/>
					<frame borderthickness="1" bordercolor="{bordercolor=gray}" color="invisible"/>
				</panel>

				<!-- OptiUI: Added item level indicator (yeah parasite/fayde, this is for you, luvs) -->
				<!-- Info Level -->
				<panel
					width="42.00%"
					height="42.00%"
					align="left"
					valign="bottom"
					watch="SelectedInventoryStatus{slot}"
					ontriggerlua="self:SetVisible(tonumber(param4) > 1)"
					passivechildren="true"
					color="0 0 0 .6"
				>
					<label textalign="center" textvalign="center" color="yellow" font="dyn_9"
						watch="SelectedInventoryStatus{slot}" 
						ontriggerlua="self:SetText(param3);"
					/>
					<frame borderthickness="1" bordercolor="{bordercolor=gray}" color="invisible"/>
				</panel>				

			</panel>
			<frame borderthickness="1" bordercolor="{bordercolor=gray}" color="invisible" noclick="true" />
		</panel>
	</template>

	<template name="addfriend_button">
		<panel
			width="1.5h" height="1.5h"
			valign="center"
		>
			<!-- UIScript -->
			<button
				group="{group}"
				color="invisible"
				watch="MenuPlayerInfo{index}"
				ontriggerlua="
					if (not IsBuddy(param2) and (param2 ~= GetAccountName())) then
						self:SetVisible(1)
					else
						self:SetVisible(0)
					end

					local player = param1..param2
					local mouseOver = function()
						GetWidget('tooltip_label', 'game'):SetText(Translate('game_menu_add_friend_tip', 'player', player))
						GetWidget('menu_tooltip', 'game'):SetVisible(1)
					end

					local buddy = param2
					local onClick = function()
						PlaySound('/shared/sounds/ui/button_click_05.wav')
						self:UICmd('ChatAddBuddy(\''..buddy..'\')')
						self:SetVisible(0)
					end
					self:SetCallback('onmouseover', mouseOver)
					self:SetCallback('onclick', onClick)
					self:RefreshCallbacks()
				"
				onmouseoutlua="GetWidget('menu_tooltip', 'game'):SetVisible(0)"
				interactive="false"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/addfriend_up.tga" />
				</widgetstate>

				<widgetstate statename="over">
					<image texture="/ui/elements/addfriend_over.tga" />
				</widgetstate>

				<widgetstate statename="down">
					<image x="1" y="1" texture="/ui/elements/addfriend_over.tga" />
				</widgetstate>

				<widgetstate statename="disabled">
					<image texture="/ui/elements/addfriend_over.tga" />
				</widgetstate>
			</button>
		</panel>
	</template>

	<template name="reportplayer_button">
		<panel
			width="100@" height="100%"
			valign="center"
		>
			<button
				name="rap_scoreboard_{index}"
				visible="false"
				group="{group}"
				color="invisible"
				watch="MenuPlayerInfo{index}"
				ontriggerlua="
					local player = param1..param2
					local mouseOver = function()
						GetWidget('tooltip_label', 'game'):SetText(Translate('tooltip_report', 'player', player))
						GetWidget('menu_tooltip', 'game'):SetVisible(1)
					end

					local buddy = param2
					local onClick = function()
						PlaySound('/shared/sounds/ui/button_click_05.wav')
						Trigger('show_rap_panel', buddy)
					end
					self:SetCallback('onmouseover', mouseOver)
					self:SetCallback('onclick', onClick)
					self:RefreshCallbacks()
				"
				onmouseoutlua="GetWidget('menu_tooltip', 'game'):SetVisible(0)"
				interactive="false"
			>
				<widgetstate statename="up">
					<image texture="/ui/icons/ban_hammer.tga" color="1 1 1 1" />
				</widgetstate>

				<widgetstate statename="over">
					<image texture="/ui/icons/ban_hammer.tga" color=".8 .8 1 1" />
				</widgetstate>

				<widgetstate statename="down" x="1" y="1">
					<image texture="/ui/icons/ban_hammer.tga" color=".8 .8 1 1" />
				</widgetstate>

				<widgetstate statename="disabled">
					<image texture="/ui/icons/ban_hammer.tga" color=".8 .8 .8 .5" rendermode="grayscale" />
				</widgetstate>
			</button>

			<panel name="maintenance_rap_scoreboard_{index}" visible="0"
				watch="MenuPlayerInfo{index}"
				ontriggerlua="
								if (param0 ~= '-1') then
									Game:ScoreboardRapButtonSetVisFlag(param0, {index}, param18, param2)
								end"

			/>
		</panel>
	</template>

	<template name="score_entry">
		<panel
			height="1.8h" align="center"
			watch="ScoreboardPlayer{index}"
			ontriggerlua="self:SetVisible(string.len(param0) > 0)"
			visible="false"
			noclick="true"
			sticky="true" stickytoinvis="false"
		>
			<panel width="100%" align="center" float="right" color="invisible" noclick="true" passivechildren="false">

				<panel width="0.6h" height="96%" noclick="true">
					<panel width="0.3h" color="white" noclick="true" watch="ScoreboardPlayer{index}" ontriggerlua="self:SetColor(param3)" />
				</panel>

				<image
					name="game_scoreboard_hero_image_{index}"
					x="0.5h"
					width="96@"
					height="96%"
					noclick="false"
					onmouseoverlua="Game.HoverScoreboardHero({index})"
					watch="ScoreboardPlayer{index}"
					ontriggerlua="
						self:SetTexture(param2)
						if (AtoB(param8)) then
							self:SetRenderMode('normal')
						else
							self:SetRenderMode('grayscale')
						end
					"
					onmouseoutlua="
							self:DoEventN(1)
							GetWidget('genericGameFloatingTip', 'game'):SetVisible(0)
					"
					onhidelua="
							self:DoEventN(1)
					"
					onevent1lua="
						Trigger('GameImagePreviewVis', 'false', '100%');
					"

				/>

				<image
					x="0.5h"
					width="96@"
					height="96%"
					noclick="true"
					texture="/ui/legion/dead.tga"
					watch="ScoreboardPlayer{index}"
					ontriggerlua="self:SetVisible(not AtoB(param8))"
				/>



				<panel width="130@" height="100%" noclick="true">

					<label textalign="center" textvalign="center" font="dyn_9" color="#f6cd6d" shadow="true" noclick="true"
						watch="ScoreboardPlayer{index}"
						ontriggerlua="self:SetText(param4)"
					/>

					<!-- Status Icon -->
					<image
						x="0.5h"
						width="96@" height="96%"
						valign="center"
						watch="MenuPlayerInfo{index}"
						noclick="true"
						visible="false"
						texture="$invis"
						ontriggerlua="
							if (tonumber(param12) ~= 0) then
								self:SetTexture('$invis')
								self:SetVisible(1)
							elseif (1 > tonumber(param13)) then
								self:SetTexture('/ui/elements/lobby/icon_loading.tga')
								self:SetVisible(1)
							elseif (AtoB(param8)) then
								self:SetTexture('/ui/elements/disconnect.tga')
								self:SetVisible(1)
							else
								self:SetVisible(0)
							end
						"
					/>

				</panel>

				<label height="100%" textvalign="center" font="dyn_9" color="white" shadow="true" noclick="true"
					watch="ScoreboardPlayer{index}"
					ontriggerlua="self:SetText(param0) self:SetColor(param3)"
				/>

				<panel x="-3.6h" width="10.0h" height="100%" align="right" float="right" color="invisible" noclick="true">
					<label width="30%" height="100%" textalign="center" textvalign="center" color="0 1 0 1" shadow="true" font="dyn_9" noclick="true"
						watch="ScoreboardPlayer{index}"
						ontriggerlua="self:SetText(param5)"
					/>
					<panel width="5%" height="100%" color="invisible" noclick="1">
						<label height="100%" textalign="center" textvalign="center" color=".8 .8 .8 1" shadow="true" font="dyn_9" noclick="1" content="/" />
					</panel>
					<label width="30%" height="100%" textalign="center" textvalign="center" color="1 0 0 1" shadow="true" font="dyn_9" noclick="true"
						watch="ScoreboardPlayer{index}"
						ontriggerlua="self:SetText(param6)"
					/>
					<panel width="5%" height="100%" color="invisible" noclick="1">
						<label height="100%" textalign="center" textvalign="center" color=".8 .8 .8 1" shadow="true" font="dyn_9" noclick="1" content="/" />
					</panel>
					<label width="30%" height="100%" textalign="center" textvalign="center" color="#ffaa00" shadow="true" font="dyn_9" noclick="true"
						watch="ScoreboardPlayer{index}"
						ontriggerlua="self:SetText(param7)"
					/>
				</panel>

				<!-- Add Friend Btn -->
				<instance name="addfriend_button" index="{index}" />

				<!-- Report Player Btn -->
				<instance name="reportplayer_button" index="{index}" />

				<!-- Vote Kick -->
				<!-- <panel width="1.4h" height="1.4h" valign="center" watch="MenuPlayerInfo{index}" ontrigger="SetVisible(param3 and !param10 and param16);">
					<button
						texture="/ui/elements/kick.tga"
						watch="MenuPlayerInfo{index}"
						ontrigger="
							SetOnclick('CallVote(\'kick_afk\', ' # param0 # ');');
							SetOnmouseover('
								ShowWidget(\'menu_tooltip\');
								Trigger(\'GameMenuTooltipText\', Translate(\'game_menu_kick_tooltip\', \'player\', \'' # param1 # param2 # '\'));
							');
						"
						watch0="VotePermissions"
						ontrigger0="SetEnabled(!param0 and !param1);"
						onmouseout="HideWidget('menu_tooltip');"
						interactive="false"
					/>
					<panel
						color="invisible"
						watch="VoteKickPermissions"
						ontrigger="
							SetVisible(param0 or param1);
							If(param0,
								SetOnmouseover('
									ShowWidget(\'menu_tooltip\');
									Trigger(\'GameMenuTooltipText\', Translate(\'game_menu_kick_disabled_other_vote_tooltip\'));
								'),
								If(param1,
									SetOnmouseover('
										ShowWidget(\'menu_tooltip\');
										Trigger(\'GameMenuTooltipText\', Translate(\'game_menu_kick_disabled_cooldown_tooltip\', \'time\', \'' # Round(param1 / 1000) # '\'));
									')
								)
							);
						"
						onmouseout="HideWidget('menu_tooltip');"
					/>
				</panel> -->


				<label x="0" width="2.0h" height="100%" textalign="center" textvalign="center" font="dyn_10" color="yellow" shadow="true" shadowcolor="black" noclick="true"
					watch="ScoreboardPlayerRespawn{index}"
					ontriggerlua="	self:SetVisible((tonumber(param0) > 0) and (not AtoB(param1)))
									self:SetText(param0)"
				/>
			</panel>
		</panel>
	</template>

	<!-- Attack modifiers -->
	<!-- UIScript -->
	<template name="attack_modifier">
		<panel x="{x}" align="{align}" width="100@" height="100%" watch="AttackModifier{index}" ontriggerlua="self:SetVisible(NotEmpty(param0))">
			<image watch="AttackModifier{index}" ontriggerlua="self:SetTexture(param1)" rendermode="grayscale" />
			<image watch="AttackModifier{index}" ontriggerlua="self:SetTexture(param1) self:SetVisible(AtoB(param3))" />
			<button texture="/ui/elements/optiui_button_bevel.tga" watch="AttackModifier{index}" ontrigger="SetOnclick('SetExclusiveModifierSlot(GetCurrentControlUnit(), ' # param4 # ');');" interactive="false" />
			<frame color="invisible" bordercolor="gray" borderthickness="1" watch="AttackModifier{index}" ontriggerlua="self:SetVisible(AtoB(param3))"/>
		</panel>
	</template>

	<!-- Status Bar Overlay -->
	<template name="statusbar_overlay">
		<image texture="/ui/legion/{barimage=optiui_behind_bar.tga}" rendermode="{rendermode=overlay}" color="{barcolor=1 1 1 1}"/>
		<image align="center" valign="center" texture="/ui/elements/optiui_bar_highlight.tga"/>
		<frame color="invisible" bordercolor="{bordercolor=gray}" borderthickness="1" noclick="1"/>
	</template>

	<!-- Team Member Icon -->
	<template name="ally_ability_status">
		<panel width="{width}" height="{height}" align="{align}" valign="{valign}" group="{group}" >
			<image name="ally_ability_status_image_{index}_{slot}" texture="/ui/legion/empty_pack.tga" />
			<frame name="ally_ability_status_dot_{index}_{slot}" color="invisible" bordercolor="gray" borderthickness="1"/>
			<label name="ally_ability_status_level_{index}_{slot}" textalign="right" textvalign="bottom" color="gray" outline="1" font="dyn_8" />
			<label name="ally_ability_status_cooldown_{index}_{slot}" textalign="center" textvalign="center" color="white" outline="1" font="dyn_10" visible="false" />
		</panel>
	</template>

	<template name="team_member_icon_buttons_panel">
		<panel name="game_top_left_ally_buttons_parent_{index}" x="1.0h" y="0" width="6.0h" height="4.0h" align="right" valign="bottom" >
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 .8" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor=".3 .3 .3 1" borderthickness=".6h" />

			<panel width="100@" height="100%" align="center" noclick="true" >
				<!-- Ally Share -->
				<panel x="1" y="1" width="45%" height="45%" color="invisible">
					<image
						watch="AllyControlSharing{index}"
						ontriggerlua="
							local partOne = 'none'
							local partTwo = 'none'

							if (tonumber(param1) == 1) then
								partOne = 'courier'
							elseif (tonumber(param1) == 3) then
								partOne = 'full'
							end

							if (tonumber(param0) == 1) then
								partTwo = 'courier'
							elseif (tonumber(param0) == 3) then
								partTwo = 'full'
							end

							self:SetTexture('/ui/common/share_'..partOne..'_'..partTwo..'.tga')
						"
					/>
					<!-- UIScript -->
					<button color="invisible" watch="AllyPlayerInfo{index}" ontrigger="SetOnclick('CycleSharedControl(' # param2 # ');');" interactive="false" onmouseoverlua="GetWidget('game_menu_tip_sharing', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('game_menu_tip_sharing', 'game'):SetVisible(0)" />
				</panel>

				<!-- No Help -->
				<panel x="1" y="-1" width="45%" height="45%" valign="bottom" color="invisible">
					<image texture="/ui/common/ally_ability_led.tga" watch="AllyNoHelp{index}" ontriggerlua="if AtoB(param) then self:SetColor('red') else self:SetColor('lime') end"/>
					<!-- UIScript -->
					<button color="invisible" watch="AllyPlayerInfo{index}" ontrigger="SetOnclick('ToggleNoHelp(' # param2 # ');');" interactive="false" onmouseoverlua="GetWidget('game_menu_tip_nohelp', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('game_menu_tip_nohelp', 'game'):SetVisible(0)" />
				</panel>

				<!-- Ally Chat -->
				<panel x="-1" y="1" width="45%" height="45%" align="right" color="invisible">
					<image name="game_top_left_ally_voip_indicator_{index}"
						texture="/ui/common/chat.tga"
					/>
					<!-- UIScript -->
					<button watch="AllyPlayerInfo{index}"
						color="invisible"
						interactive="false"
						ontrigger="SetOnclick('ToggleVoiceMute(' # param2 # ');');"
						onmouseoverlua="GetWidget('game_menu_tip_voice', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('game_menu_tip_voice', 'game'):SetVisible(0)"
						/>
				</panel>

				<!-- RAP -->
				<panel name="ally_rap_indicator_{index}" x="-1" y="-1" width="45%" height="45%" align="right" valign="bottom" color="invisible" visible="false"
					watch="MenuSpectatorInfo{index}"
					ontriggerlua="
						if (param0 ~= '-1') then
							Game:AllySpectatorRapButtonSetVisFlag(param0, param9, param10, param1)
						end
					"
				>
					<image name="game_top_left_ally_rap_{index}"
						texture="/ui/icons/ban_hammer.tga"

					/>
					<button	color="invisible"
						interactive="false"
						onmouseoverlua="GetWidget('game_menu_tip_RAP', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('game_menu_tip_RAP', 'game'):SetVisible(0)"
						watch2="AllyPlayerInfo{index}"
						ontrigger2lua="
							local index = param0
							local onClick = function()
								Trigger('show_rap_panel', index)
							end
							self:SetCallback('onclick', onClick)
							self:RefreshCallbacks()
						"
					/>
				</panel>
			</panel>

			<panel x="0.0h" width="1.0h" height="100%" align="right" >
				<panel name="game_top_left_ally_buttons_show_{index}" visible="true" >
					<!-- <image width="1.0h" height="1.0h" texture="/ui/info/combobox_button_up.tga" rotation="270" valign="center" /> -->
					<button 
						color="invisible"
						onclicklua="
							GetWidget('game_top_left_ally_buttons_parent_{index}', 'game'):SlideX('5.0h', 100)
							GetWidget('game_top_left_ally_buttons_hide_{index}', 'game'):SetVisible(true)
							GetWidget('game_top_left_ally_buttons_show_{index}', 'game'):SetVisible(false)
							PlaySound('/shared/sounds/ui/popup.wav')
						"
					>
						<widgetstate statename="up">
							<image width="95%" height="95@" texture="/ui/info/combobox_button_up.tga" rotation="270" valign="center" noclick="true" />
						</widgetstate>
						<widgetstate statename="over">
							<image width="95%" height="95@" texture="/ui/info/combobox_button_over.tga" rotation="270" valign="center" noclick="true" />
						</widgetstate>
						<widgetstate statename="down">
							<image y="1" x="1" width="95%" height="95@" texture="/ui/info/combobox_button_up.tga" rotation="270" valign="center" noclick="true" />
						</widgetstate>
					</button>
				</panel>
				<panel name="game_top_left_ally_buttons_hide_{index}" visible="false" >
					<!-- <image width="1.0h" height="1.0h" texture="/ui/info/combobox_button_over.tga" rotation="90" valign="center" /> -->
					<button 
						color="invisible"
						onclicklua="
							GetWidget('game_top_left_ally_buttons_parent_{index}', 'game'):SlideX('1.0h', 100)
							GetWidget('game_top_left_ally_buttons_show_{index}', 'game'):SetVisible(true)
							GetWidget('game_top_left_ally_buttons_hide_{index}', 'game'):SetVisible(false)
							PlaySound('/shared/sounds/ui/popup.wav')
						"
					>
						<widgetstate statename="up">
							<image width="95%" height="95@" texture="/ui/info/combobox_button_up.tga" rotation="90" valign="center" noclick="true" />
						</widgetstate>
						<widgetstate statename="over">
							<image width="95%" height="95@" texture="/ui/info/combobox_button_over.tga" rotation="90" valign="center" noclick="true" />
						</widgetstate>
						<widgetstate statename="down">
							<image y="1" x="1" width="95%" height="95@" texture="/ui/info/combobox_button_up.tga" rotation="90" valign="center" noclick="true" />
						</widgetstate>
					</button>
				</panel>
			</panel>
		</panel>
	</template>

	<template name="team_member_icon_menu" >
		<!-- Right Click Menu -->
		<!-- UIScript -->
		<menu
			name="ally_right_click_menu_{index}"
			width="0" height="0"
			color="red"
			listwidth="16.0h"
			listpaddingy="1.0h"
			itemoffsetx="0.5h"
			itemoffsety="0.5h"
			itemheight="2.2h"
			itemwidth="94%"
			highlight="under"
			exteriorscrollbars="false"
			onevent="	OpenMenu(true);
						MoveToCursor();
						UpdateMenuConditions();
						BringToFront();"
			onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav')"
			onloadlua="Set('right_click_ally_player_name_{index}', 'DefaultName', 'string');"
			watch="AllyPlayerInfo{index}"
			ontriggerlua="Set('right_click_ally_player_name_{index}', StripClanTag(param0))"
		>
			<widgetstate statename="listbg">
				<frame texture="/ui/frames/glass_header_big.tga" color="#233749" />
				<frame color="invisible" bordercolor="#455166" borderthickness="3" />
				<frame color="invisible" bordercolor="black" borderthickness="2" />
			</widgetstate>
			<widgetstate statename="itemhighlight">
				<panel color="#263e51" />
			</widgetstate>

			<instance name="rightclick_menu_item2" index="0" commandlua="PlaySound('/shared/sounds/ui/ccpanel/button_click_01.wav') Trigger('show_rap_panel', GetCvarString('right_click_ally_player_name_{index}'))" label="game_menu_report_a_player" condition="ally_rap_available_{index}" />
			<instance name="rightclick_menu_item2" index="1" commandlua="PlaySound('/shared/sounds/ui/ccpanel/button_click_01.wav') Game:ToggleIgnore(GetCvarString('right_click_ally_player_name_{index}'))" label="chat_opt_mute_player" condition="(!ChatIsIgnored(right_click_ally_player_name_{index}))" />
			<instance name="rightclick_menu_item2" index="2" commandlua="PlaySound('/shared/sounds/ui/ccpanel/button_click_01.wav') Game:ToggleIgnore(GetCvarString('right_click_ally_player_name_{index}'))" label="chat_opt_unmute_player" condition="(ChatIsIgnored(right_click_ally_player_name_{index}))" />
		</menu>
	</template>

	<template name="team_member_icon_portrait">
		<panel x="{x}" y="{y}" width="{width}" height="{height}" noclick="true" >
			<frame name="game_top_left_ally_image_parent_{index}" texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" bordercolor="gray" color="invisible" noclick="true" />
			<frame name="game_top_left_ally_image_frame_{index}" texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="gray" color="invisible" noclick="true"/>

			<panel name="game_top_left_ally_image_bg_{index}" width="100@" height="100%" align="right" noclick="true" color="gray" >
				<panel x="1" y="1" width="-2" height="-2" color="invisible" >
					<image name="game_top_left_ally_image_{index}" />
					<panel name="game_top_left_ally_dead_{index}" >
						<!-- <image texture="/ui/legion/dead.tga" /> -->
						<label name="game_top_left_ally_respawn_{index}" font="dyn_14" color="yellow" shadow="true" textalign="center" textvalign="center" />
					</panel>

					<panel name="game_top_left_ally_gold_{index}" height="33%" valign="bottom" color="0 0 0 .6" noclick="true" >
						<label width="70%" align="right" textalign="center" textvalign="center" color="white" font="dyn_8" watch="AllyGold{index}" ontriggerlua="self:SetText(param)" />
					</panel>

					<!--  Voip Mic  -->
					<panel name="game_top_left_ally_voip_{index}" visible="false" >
						<panel color="0 0 0 .1"/>
						<image texture="/ui/elements/optiui_voip_talking.tga" />
					</panel>

					<panel name="game_top_left_ally_afk_{index}" >
						<label
							width="100%" height="100%"
							textalign="center" textvalign="top"
							color="white" shadow="true"
							font="dyn_14"
							content="AFK"
						/>
					</panel>

					<panel name="game_top_left_ally_dc_{index}" >
						<panel color="0 0 0 .5"/>
						<image texture="/ui/elements/disconnect.tga" />
						<label name="game_top_left_ally_dc_label_{index}"
							width="100%" height="100%"
							textalign="center" textvalign="center"
							color="white" shadow="true"
							font="dyn_10"
						/>
					</panel>

					<panel name="game_top_left_ally_load_{index}" >
						<panel color="0 0 0 .5"/>
						<image texture="/ui/elements/lobby/icon_loading.tga" />
						<label name="game_top_left_ally_load_label_{index}"
							width="100%" height="100%"
							textalign="center" textvalign="center"
							color="white" outline="true"
							font="dyn_10"
							content="20%"
						/>
					</panel>

					<!-- UIScript -->
					<button name="ally_right_click_menu_button_{index}"
						color="invisible"
						onclick="SelectUnit(AllyIndex{index});"
						onmouseoverlua="GetWidget('ally_tooltip{index}', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('ally_tooltip{index}', 'game'):SetVisible(0)"
						interactive="false"
					/>

					<!-- Item catcher -->
					<!-- UIScript -->
					<panel
						color="invisible"
						texture="/ui/info/drop.tga"
						watch="ItemCursorVisible"
						ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
						onmouseoverlua="self:SetColor('white')"
						onmouseoutlua="self:SetColor('invisible')"
						onclick="ItemPlaceEntity(AllyIndex{index});"
						onrightclick="ItemPlaceEntity(AllyIndex{index});"
					/>

					<!-- Black Framing -->
					<frame color="invisible" bordercolor="black" borderthickness="1" noclick="true" />
				</panel>
			</panel>

			<!-- Ally Level -->
			<panel width="38@" height="38%" align="left" valign="bottom" noclick="true" passivechildren="true" >
				<frame name="game_top_left_ally_level_bg_{index}" texture="/ui/frames/rounded_bg_white.tga" borderthickness="{lvl_borderthickness=.2h}" >
					<label name="game_top_left_ally_level_label_{index}" textalign="center" textvalign="center" font="dyn_9" color="yellow" outline="true" />
				</frame>
			</panel>
		</panel>
	</template>

	<template name="team_member_icon">
		<!-- OptiUI: Added x position variable -->
		<panel name="game_top_left_ally_parent_{index}" x="{x}" y="{y}" width="6.3h" height="6.8h" align="{align}" valign="{valign}" sticky="true" stickytoinvis="false" group="{group}">
			
			<!-- Side panel -->
			<instance name="team_member_icon_buttons_panel" index="{index}" />

			<!-- Framing -->
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 1" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" noclick="true" />

			<panel float="right" color="invisible" padding="0" noclick="true" >	
				<panel width="4.3h" float="bottom" color="invisible" padding="0" noclick="true" >	
					<!-- OptiUI: Portrait -->
					<instance name="team_member_icon_portrait" width="100%" height="100@" index="{index}" />

					<!-- Health / Mana Bars -->
					<!-- OptiUI: Fixed width to fully cover background -->
					<panel name="game_top_left_ally_bar_parent_{index}" height="2.5h" color="black" passivechildren="true" noclick="true" >
						<frame height="50%" valign="top" color="0 .1 0 .7" bordercolor="gray" borderthickness="1">
							<panel name="game_top_left_ally_health_{index}" color="0 1 0 0" >
								<instance name="statusbar_overlay" />
							</panel>
							<label name="game_top_left_ally_health_label_{index}" textalign="center" textvalign="center" font="dyn_8" color="white" shadow="true"/>
						</frame>
						<frame height="49%" valign="bottom" color="0 .0 .1 .7" bordercolor="gray" borderthickness="1">
							<panel name="game_top_left_ally_mana_{index}" color="0 .4 1 1" >
								<instance name="statusbar_overlay" />
							</panel>
							<label name="game_top_left_ally_mana_label_{index}" textalign="center" textvalign="center" font="dyn_8" color="white" shadow="true"/>
						</frame>
					</panel>
				</panel>

				<!-- Ally Ability Status Lights -->
				<panel name="game_top_left_ally_status_light_{index}" width="1.6h" float="bottom" padding="0" color="invisible" noclick="1" passivechildren="true">
					<instance name="ally_ability_status" width="100%" height="100@" group="{group}" slot="0" index="{index}" />
					<instance name="ally_ability_status" width="100%" height="100@" group="{group}" slot="1" index="{index}" />
					<instance name="ally_ability_status" width="100%" height="100@" group="{group}" slot="2" index="{index}" />
					<instance name="ally_ability_status" width="100%" height="100@" group="{group}" slot="3" index="{index}" />
				</panel>
			</panel>

			<!-- Right Click Menu -->
			<instance name="team_member_icon_menu" index="{index}" />
		</panel>
	</template>

	<!-- OptiUI: Wide Ally Info frames -->
	<template name="team_member_icon_wide">
		<!-- OptiUI: Added x position variable -->
		<panel name="game_top_left_ally_parent_{index}" x="{x}" y="{y}" width="13.5h" height="4.5h" align="{align}" valign="{valign}" sticky="true" stickytoinvis="false" group="{group}">

			<!-- Side panel -->
			<instance name="team_member_icon_buttons_panel" index="{index}" />

			<!-- Framing -->
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 1" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" noclick="true" />

			<panel float="right" color="invisible" padding="1" noclick="true" >
				<!-- OptiUI: Portrait -->
				<instance name="team_member_icon_portrait" width="115@" height="100%" index="{index}" lvl_borderthickness=".6h" />

				<panel width="7.7h" float="bottom" color="invisible" padding="1" noclick="true" >
					<!-- Health / Mana Bars -->
					<!-- OptiUI: Fixed width to fully cover background -->
					<panel name="game_top_left_ally_bar_parent_{index}" height="2.9h" color="black" passivechildren="true" noclick="true" >
						<frame height="50%" valign="top" color="0 .1 0 .7" bordercolor="gray" borderthickness="1">
							<panel name="game_top_left_ally_health_{index}" color="0 1 0 0">
								<instance name="statusbar_overlay" />
							</panel>
							<label name="game_top_left_ally_health_label_{index}" textalign="center" textvalign="center" font="dyn_7" color="white" outline="true"/>
						</frame>
						<frame height="50%" valign="bottom" color="0 0 .1 .7" bordercolor="gray" borderthickness="1">
							<panel name="game_top_left_ally_mana_{index}" color="0 .4 1 1">
								<instance name="statusbar_overlay" />
							</panel>
							<label name="game_top_left_ally_mana_label_{index}" textalign="center" textvalign="center" font="dyn_7" color="white" outline="true"/>
						</frame>
					</panel>

					<!-- Ally Ability Status Lights -->
					<panel name="game_top_left_ally_status_light_{index}" height="1.5h" float="right" padding="0" color="invisible" noclick="1" passivechildren="true">
						<instance name="ally_ability_status" group="{group}" width="25%" height="25@" slot="0" index="{index}" />
						<instance name="ally_ability_status" group="{group}" width="25%" height="25@" slot="1" index="{index}" />
						<instance name="ally_ability_status" group="{group}" width="25%" height="25@" slot="2" index="{index}" />
						<instance name="ally_ability_status" group="{group}" width="25%" height="25@" slot="3" index="{index}" />
					</panel>
				</panel>
			</panel>

			<!-- Right Click Menu -->
			<instance name="team_member_icon_menu" index="{index}" />
		</panel>
	</template>

	<template name="minimap_inventory_item_hiding">
		<panel width="100@" height="100%" noclick="true" sticky="1" stickytoinvis="0"
			watch="MinimapHover"
			ontriggerlua="self:SetVisible(NotEmpty(param{param}))"
		>
			<image texture="/ui/common/empty_pack.tga" color=".6 .6 .6 1" watch="MinimapHover"
				ontriggerlua="	if (param{param} ~= '') then
									self:SetTexture(param{param})
									self:SetColor('1 1 1 1')
								else
									self:SetTexture('/ui/common/empty_pack.tga')
									self:SetColor('.6 .6 .6 1')
								end"
			/>			
			<frame color="invisible" borderthickness="1" bordercolor=".1 .1 .1 1"/>
		</panel>
	</template>

	<template name="minimap_inventory_item">
		<panel width="100@" height="100%" noclick="true">
			<image texture="/ui/common/empty_pack.tga" color=".6 .6 .6 1" watch="MinimapHover"
				ontriggerlua="	if (param{param} ~= '') then
									self:SetTexture(param{param})
									self:SetColor('1 1 1 1')
								else
									self:SetTexture('/ui/common/empty_pack.tga')
									self:SetColor('.6 .6 .6 1')
								end"
			/>
			<frame color="invisible" borderthickness="1" bordercolor=".1 .1 .1 1"/>
		</panel>
	</template>

	<template name="gamecontrol_combobox_item">
		<label y="0.7h" x="0.8h" height="100%" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" content="{label}" />
	</template>

	<template name="gamecontrol_combobox_item_unpause">
		<label y="0.7h" x="0.8h" height="100%" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" content="{label}"
			watch="gameUnpauseLerpTrigger"
			ontriggerlua="	if (tonumber(param) > 0) then
								self:SetColor('.5 .5 .5 .7')
							else
								self:SetColor('white')
							end"
		/>
		<panel align="right" width="90@" height="90%" valign="center" x="-10@" y="0.7h">
			<panel align="center" valign="center" width="-15@" height="-15%">
				<piegraph color="0 0 0 0.5"/>
				<piegraph color="1 1 1 0.75" start="270" end="-90"
					oninstantiate="
						CreateLerp('gameUnpauseLerp', 65000, 1, 0, -1);
						SleepWidget('1', 'DoEvent(0)');
					"
					onevent0="
						CreateLerp('gameUnpauseLerp', 0, 65000, 0, -1);
					"
					watch="gameUnpauseLerpTrigger"
					ontriggerlua="
						self:SetValue(tonumber(param) / 65000)
						self:SetVisible(tonumber(param) > 0)
					"
				/>
			</panel>
		</panel>
	</template>

	<template name="gamecontrol_combobox_item_disabled">
		<label y="0.7h" x="0.8h" height="100%" textvalign="center" font="dyn_9" color=".5 .5 .5 .7" shadow="true" content="{label}" />
	</template>

	<template name="gamecontrol_combobox_state">
		<widgetstate statename="{state}">
			<panel color="invisible">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="{color}"/>
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="{color}"/>
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="{color}"/>
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_{image}.tga" />
			</panel>
		</widgetstate>
	</template>

	<template name="gamecontrol_combobox">
		<combobox
			luatable="1"
			name="{id}"
			align="left" valign="top"
			color="invisible"
			itemwidth="100%"
			itemheight="2.2h"
			highlightcolor="invisible"
			highlightbordercolor="invisible"
			onload="ComboBoxCmd('clear'); {populate=}; {data}('{itemtemplate=gamecontrol_combobox_item}'); {onload=}"
			onmouseover="{onmouseover}"
			onmouseoverlua="
				PlaySound('/shared/sounds/ui/button_over_02.wav')
				GetWidget('{id}_hover', 'game'):SetVisible(1)
				{onmouseoverlua}"
			onmouseout="{onmouseout}"
			onmouseoutlua="
				GetWidget('{id}_hover', 'game'):SetVisible(0)
				{onmouseoutlua}"
			onclick="{onclick}"
			onclicklua="{onclicklua}"
			watch="{watch}"
			ontrigger="{ontrigger}"
			ontriggerlua="{ontriggerlua}"
			onselect="{onselect}"
			onselectlua="PlaySound('/shared/sounds/ui/button_click_01.wav') {onselectlua}"
			interactive="false"
			onevent="{onevent}"
			oneventlua="{oneventlua}"
		>
			<instance name="gamecontrol_combobox_state" state="up" color="1 1 1 1" image="up"/>
			<instance name="gamecontrol_combobox_state" state="over" color="#69ccff" image="over"/>
			<instance name="gamecontrol_combobox_state" state="down" color="#69ccff" image="over"/>

			<widgetstate statename="listbg">
				<frame height="+3.2h" y="-1.6h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			</widgetstate>

			<widgetstate statename="itembg">
			</widgetstate>

			<widgetstate statename="itemhighlight">
				<panel y="0.7h" width="100%" texture="/ui/info/header_bar_c.tga" color="1 1 1 1">
					<panel width="100%" height="100%" >
						<image height="50%" width="32" align="left" valign="top" color="1 1 1 1" texture="/ui/info/header_bar_tl.tga" noclick="1"/>
						<image height="50%" width="32" align="left" valign="bottom" color="1 1 1 1" texture="/ui/info/header_bar_bl.tga" noclick="1"/>
						<image height="50%" width="32" align="right" valign="top" color="1 1 1 1" texture="/ui/info/header_bar_tr.tga" noclick="1"/>
						<image height="50%" width="32" align="right" valign="bottom" color="1 1 1 1" texture="/ui/info/header_bar_br.tga" noclick="1"/>
					</panel>
				</panel>
			</widgetstate>


		</combobox>
	</template>

	<template name="channel_bar">
		<panel name="channel_bar_{slot}"
			stickytoinvis="false"
			adhere="bottom"
			spacing="0.5h"
			width="100%"
			height="2.3h"
			visible="false"
		>
			<frame hmargin="-1h" vmargin="-1h" texture="/ui/frames/shadow.tga" color="invisible" bordercolor="0 0 0 0.8" borderthickness="1.4h" noclick="1" />

			<panel color="0 0 0 1">
				<panel
					hmargin="0.2h"
					vmargin="0.2h"
				>
					<panel name="channel_bar_bg_{slot}"
						color="0 0 0 1"
						width="100@"
					>
						<image name="channel_bar_icon_{slot}"
							texture=""
							hmargin="0.1h"
							vmargin="0.1h"
						/>
					</panel>
					<panel
						align="right"
						width="-100@"
					>
						<panel name="channel_bar_right_{slot}"
							align="right"
							color="0.5 0 0.75 0.2"
							width="-0.2h"
						>
							<panel name="channel_bar_prog_{slot}"
								width="0%"
								color="0 0 0 1"
							>
								<panel color="1 1 1 .2" align="right" width=".2h" rendermode="additive" />
								<panel color="0 0 0 .5" align="right" width=".2h" x=".15h" />
							</panel>
							<image width="-0.2h" align="center" texture="/ui/elements/bar_highlight.tga" />
							<label name="channel_bar_label_{slot}"
								font="dyn_10"
								color="1 1 1 1"
								width="100%"
								outline="1"
								height="100%"
								textalign="center"
								textvalign="center"
							/>
						</panel>
					</panel>
				</panel>
			</panel>
		</panel>
	</template>

	<!-- Radial Command -->
	<instance name="radial_menu" />

	<!-- Disconnect button -->
	<!-- UIScript -->
	<panel noclick="true"
		watch="StatsStatus"
		ontriggerlua="self:SetVisible(not ((param == 'submitting') or (param == 'recording')))"
	>
		<instance
			name="button3"
			label="game_disconnect"
			id="game_disconnect"
			y="5h"
			height="3h"
			width="15h"
			align="center"
			borderthickness="0.6h"
			onclick="Disconnect(); ClearReconnectInfo();"
			font="dyn_12"
			watch="EndGame"
			ontriggerlua="if (AtoB(param)) then
							self:Sleep(750, function() self:SetVisible(1) end)
						  else
						  	self:SetVisible(0)
						  end"
		/>
	</panel>

	<!-- TOP -->
	<!-- OptiUI: Moved ally icons above other elements to autodetect their position -->

	<!-- Hero Info -->
	<panel name="game_tl_hero_info" x="0" y="0" width="15.5h" height="4.5h" noclick="true" >

		<!-- Framing -->
		<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 .8" />
		<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" noclick="true" />

		<panel float="right" color="invisible" padding="1" noclick="true" >
			<!-- Icon / Lvl -->
			<panel width="115@" height="100%" noclick="true" >
				<!-- Framing -->
				<frame name="game_top_left_hero_icon_parent" texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" bordercolor="gray" color="invisible" noclick="true"/>
				<frame name="game_top_left_hero_icon_frame" texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="gray" color="invisible" noclick="true"/>

				<!-- Icon/Buttons -->
				<panel name="game_top_left_hero_icon_bg" width="100@" height="100%" align="right" noclick="true" color="invisible" >
					<panel x="1" y="1" width="-2" height="-2" color="invisible" >
						<image name="game_top_left_hero_icon" />
						<panel name="game_top_left_hero_icon_dead" >
							<!-- <image texture="/ui/legion/dead.tga" noclick="true" /> -->
							<!-- Respawn Timer -->
							<label name="game_top_left_respawn_timer" textalign="center" textvalign="center" font="dyn_14" color="yellow" shadow="true" />
						</panel>

						<!-- LvlUp Effect -->
						<!-- OptiUI: Level up texture instead of effect -->
						<modelpanel name="game_top_left_hero_lvlup"
							noclick="true"
							model="effects/portrait_lvlup/portrait_emitter.mdf"
							anim="idle"
							effect="effects/portrait_lvlup/portrait_lvlup.effect"
							camerapos="-1 0 0"
							cameraangles="0 0 180"
							camerafov="55"
							depthclear="false"
							depthcompress="true"
							onshow="SetEffect('/ui/effects/portrait_lvlup/portrait_lvlup.effect');"
						/>

						<!-- UIScript -->
						<!-- OptiUI: Removed gloss from the Hero portraits -->
						<button
							color="invisible"
							onclick="SelectHero();"
							onmouseoverlua="GetWidget('unit_tooltip_hero', 'game'):SetVisible(1) Game:SelfHover()"
							onmouseoutlua="GetWidget('unit_tooltip_hero', 'game'):SetVisible(0) GetWidget('genericGameFloatingTip', 'game'):SetVisible(0)"
							interactive="false"
						/>

						<!-- Item catcher -->
						<!-- UIScript -->
						<panel
							color="invisible"
							texture="/ui/info/drop.tga"
							watch="ItemCursorVisible"
							ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
							onmouseoverlua="self:SetColor('white')"
							onmouseoutlua="self:SetColor('invisible')"
							onclick="ItemPlaceHero();"
							onrightclick="ItemPlaceHero();"
						/>

						<!-- Black Framing -->
						<frame color="invisible" bordercolor="black" borderthickness="1" noclick="true" />
					</panel>
				</panel>

				<!-- Level -->
				<panel width="38@" height="38%" align="left" valign="bottom" noclick="true" passivechildren="true" >
					<frame name="game_top_left_hero_level_bg"  texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" >
						<label name="game_top_left_hero_level_label" textalign="center" height="100%" textvalign="center" font="dyn_9" color="yellow" outline="true" />
					</frame>
				</panel>
			</panel>

			<panel width="9.7h" float="bottom" color="invisible" padding="1" noclick="true" >
				<!-- Health / Mana Bars -->
				<panel height="2.9h" color="black" noclick="true">
					<panel height="50%" valign="top" color="black"
						onmouseoverlua="GetWidget('health_tooltip_hero', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('health_tooltip_hero', 'game'):SetVisible(0)"
						passivechildren="true"
					>
						<panel name="game_top_left_health_lerp" color="1 0 0 1" />
						<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="1" />
						<panel name="game_top_left_health_bar" onload="SetVScale(GetHeight() # 'p'); DoEvent();" color=".2 1 .3 1" noclick="1">
							<instance name="statusbar_overlay" />
						</panel>
						<label name="game_top_left_health_label" font="dyn_8" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
					</panel>
					
					<panel height="50%" valign="bottom" color="black"
						onmouseoverlua="GetWidget('mana_tooltip_hero', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('mana_tooltip_hero', 'game'):SetVisible(0)"
						passivechildren="true"
					>
						<panel name="game_top_left_mana_lerp" color=".2 .2 .2 1" />
						<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="1" />
						<panel name="game_top_left_mana_bar" oneventlua="self:SetUScale((self:GetHeight() * 32)..'p')" onloadlua="self:SetVScale(self:GetHeight()..'p') self:DoEvent()" color="0 .4 1 1" noclick="1">
							<instance name="statusbar_overlay" />
						</panel>
						<label name="game_top_left_mana_label" font="dyn_8" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
					</panel>

					<!-- Buyback Button -->
					<panel name="game_top_left_buyback_parent" x="1" y="1" width="-2" height="-2" color="0 0 0 .8" >
						<!-- UIScript -->
						<instance
							name="button_game"
							width="-1.0h"
							height="2h"
							align="center"
							valign="center"
							borderthickness="0.6h"
							button_name="dev_buyback"
							font="dyn_9"
							onclick="BuyBack();"
						/>
						<label name="game_top_left_buyback_exhausted_label" width="57%" height="100%" font="dyn_8" shadow="true" shadowoffset="2" color="white" textvalign="center" textalign="right" noclick="1" content="game_label_buy_back" />
						<label name="game_top_left_buyback_label" x="61%" width="40%" height="100%" font="dyn_9" shadow="true" shadowoffset="2" color="yellow" textvalign="center" textalign="left" noclick="1" />
					</panel>
				</panel>

				<panel height="1.5h" color="invisible" float="right" padding=".5h" noclick="true">
					<!-- Stats Icon -->
					<panel width="90@" height="90%" color="invisible" onmouseoverlua="GetWidget('attribute_tooltip', 'game'):SetVisible(1)" onmouseoutlua="GetWidget('attribute_tooltip', 'game'):SetVisible(0)">
						<image texture="/ui/elements/options_icon_stats.tga" noclick="true"/>
					</panel>

					<label name="game_top_left_buyback_indicator" width="90@" height="90%" content="Bb" color="white" font="dyn_9" textvalign="top" noclick="true" />

					<include file="optiui_fastshare.package"/>
				</panel>
			</panel>
		</panel>
		

		<panel width="1.3h" height="1.3h" align="right" valign="bottom" color="invisible" noclick="true"
			onloadlua="GameUIManager.RegisterSection(self, 'AllyInfo')"
		>
			<!-- Collapse Team Icons Button -->
			<!-- UIScript -->
			<panel name="game_top_left_ally_collapse_btn" noclick="true" color="invisible" >
				<button
					color="invisible"
					onclick="ToggleAllies();"
					interactive="false"
				>
					<widgetstate statename="up">
						<image texture="/ui/info/combobox_button_up.tga" rotation="180" />
					</widgetstate>
					<widgetstate statename="over">
						<image texture="/ui/info/combobox_button_over.tga" rotation="180" />
					</widgetstate>
					<widgetstate statename="down">
						<image y="1" x="1" texture="/ui/info/combobox_button_up.tga" rotation="180" />
					</widgetstate>
				</button>
			</panel>
			<!-- Expand Team Icons Button -->
			<!-- UIScript -->
			<panel name="game_top_left_ally_expand_btn" noclick="true" color="invisible" >
				<button
					color="invisible"
					onclick="ToggleAllies();"
					interactive="false"
				>
					<widgetstate statename="up">
						<image texture="/ui/info/combobox_button_up.tga"  />
					</widgetstate>
					<widgetstate statename="over">
						<image texture="/ui/info/combobox_button_over.tga" />
					</widgetstate>
					<widgetstate statename="down">
						<image y="1" x="1" texture="/ui/info/combobox_button_up.tga" />
					</widgetstate>
				</button>
			</panel>
		</panel>
	</panel>

	<!-- OptiUI: Respawn timer tabs -->
	<include file="optiui_respawn_timers.package" />

	<!-- Middle Section -->
	<panel y="0" width="50.5h" height="3.3h" align="center" valign="top" noclick="1" color="invisible">
		<!-- Legion Health -->
		<panel name="game_base_health_header_0" x="0" y="0" height="1.6h" width="11.0h" align="left" valign="bottom" noclick="1" color="invisible" >
			<image texture="/ui/legion/behind_bar.tga" rendermode="overlay" color="1 1 1 1" noclick="1"/>
			<panel name="game_base_health_backer_0" align="right" color="0 0 0 0" noclick="1">
				<panel name="game_base_health_bar_0" color="0 1 0 0" noclick="1"/>
				<instance name="statusbar_overlay"/>
			</panel>
			<label name="game_base_health_percent_0" textalign="center" textvalign="center" font="dyn_9" color="white" outline="1" noclick="1" />
			<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="true"/>
			<label x="-0.5h" y="-1.7h" width="100%" height="100%" textalign="right" textvalign="center" font="dyn_9" color="green" outline="1" noclick="1" content="World Tree"/>
		</panel>

		<!-- Hellbourne Health -->
		<panel name="game_base_health_header_1" x="0" y="0" height="1.6h" width="11.0h" align="right" valign="bottom" noclick="1" color="invisible" >
			<image texture="/ui/legion/behind_bar.tga" rendermode="overlay" color="1 1 1 1" noclick="1"/>
			<panel name="game_base_health_backer_1" align="left" color="0 0 0 0" noclick="1">
				<panel name="game_base_health_bar_1" color="0 1 0 0" noclick="1"/>
				<instance name="statusbar_overlay"/>
			</panel>
			<label name="game_base_health_percent_1" textalign="center" textvalign="center" font="dyn_9" color="white" outline="1" noclick="1" />
			<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="true"/>
			<label x="0.5h" y="-1.7h" width="100%" height="100%" textalign="left" textvalign="center" font="dyn_9" color="red" outline="1" noclick="1" content="Sacrificial Shrine"/>
		</panel>
	</panel>

	<!-- Clock -->
	<panel name="game_top_clock" y="0" width="28.0h" height="3.3h" align="center" valign="top" noclick="1" color="invisible">

		<panel y="-1.0h" width="5.3h" height="5.3h" align="center" valign="bottom" noclick="1" color="invisible">
			<image name="game_clock_face" width="100%" height="100%" align="center" valign="center" texture="/ui/common/optiui_clockface.tga" rotation="0" noclick="0"/>
		</panel>

    	<!-- Clock Day/Night Glow Effect -->
		<!-- <panel y="-7.6h" x="-0.05h" width="20.0h" height="20.0h" align="center" noclick="1">
			<modelpanel name="game_clock_effect"
				noclick="true"
				model="/shared/models/invis.mdf"
				effect="effects/clock_day.effect"
				camerapos="0 10 0"
				cameraangles="0 0 180"
				camerafov="55"
				depthclear="false"
				depthcompress="true"
			/>
		</panel> -->
	

		<!-- Hero K/D/A -->
		<panel width="11.0h" height="1.6h" noclick="true" passivechildren="true" >
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .5" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" />
			<label x="0.5h" fitx="1" textalign="left" textvalign="center" font="dyn_10" color="white" content="game_label_hero_kd_hero" />
			<label name="game_player_score_1" width="7.0h" align="right" textalign="center" textvalign="center" font="dyn_10" color="white" />
		</panel>

		<!-- Creep Kills -->
		<panel width="11.0h" height="1.6h" valign="bottom" noclick="true" passivechildren="true">
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .5" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" />			
			<label x="0.5h" fitx="1" textalign="left" textvalign="center" font="dyn_10" color="white" content="game_label_creep_kills_creep" />
			<label name="game_player_score_2" width="7.0h" align="right" textalign="center" textvalign="center" font="dyn_10" color="white" />
		</panel>

		<!-- Team Scores -->
		<panel width="11.0h" height="1.6h" align="right" noclick="true" passivechildren="true">
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .5" noclick="true" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" noclick="true"/>
			<label x="0.5h" fitx="1" textvalign="center" font="dyn_10" color="white" content="Kills:" noclick="0" />
			<label name="game_team_score_1" x="7.0zh" fitx="1" textvalign="center" font="dyn_10" color="white" noclick="0" />
			<label name="game_team_score_2" x="4.0h" fitx="1" textvalign="center" font="dyn_10" color="1 1 1 1" noclick="0" />
		</panel>

		<panel width="11.0h" height="1.6h" align="right" valign="bottom" noclick="true" passivechildren="true">
			<panel width="48%" align="left" valign="bottom" >
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .5" />
				<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" />
				<label
					name="game_match_time_rune_label"
					x="0.5h"
					textalign="left" textvalign="center"
					height="100%"
					font="dyn_10"
					color="white"
				/>
			</panel>
			<panel width="48%" align="right" valign="bottom" >
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .5" />
				<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" />
				<label
					name="game_match_time_rotation_label"
					x="0.5h"
					textalign="left" textvalign="center"
					height="100%"
					font="dyn_10"
					color="white"
				/>
			</panel>
		</panel>

		<!-- Game Time -->
		<panel y="0.8h" width="5.3h" height="1.6h" align="center" valign="bottom" noclick="true" passivechildren="true" >
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .5" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" />
			<label
				name="game_match_time_label"
				textalign="center" textvalign="top"
				height="100%"
				font="dyn_10"
				color="white"
			/>
		</panel>
	</panel>

	<panel name="arcade_messages" width="100h" height="30h" y="0h" align="center" color="invisible" noclick="1">
		<modelpanel
			name="game_arcade_model_1"
			width="80h" align="center"
			visible="0"
			noclick="true"
			anim="idle"
			cameradistance="0"
			lookat="false"
			camerapos="0 1300 0"
			cameraangles="0 0 180"
			camerafov="50"
			cameranear="1"
			carmerafar="5000"
			depthclear="false"
			depthcompress="true"
			sunazimuth="-90"
			sunaltitude="180"
			suncolor="4 1 1"
		/>
		<modelpanel
			name="game_arcade_model_2"
			width="80h" align="center"
			visible="0"
			noclick="true"
			anim="idle"
			cameradistance="0"
			lookat="false"
			camerapos="0 1300 0"
			cameraangles="0 0 180"
			camerafov="50"
			cameranear="1"
			carmerafar="5000"
			depthclear="false"
			depthcompress="true"
			sunazimuth="-90"
			sunaltitude="180"
			suncolor="1 1 1"
		/>
		<modelpanel
			name="game_arcade_model_3"
			visible="0"
			noclick="true"
			anim="idle"
			cameradistance="0"
			lookat="false"
			camerapos="0 1625 0"
			cameraangles="0 0 180"
			camerafov="50"
			cameranear="1"
			carmerafar="5000"
			depthclear="false"
			depthcompress="true"				
			sunazimuth="-90"
			sunaltitude="180"
			suncolor="1 1 1"
		/>
	</panel>

	<panel valign="top" align="left" x="3h" y="12h" height="10.5h" width="45h" noclick="true" visible="true" name="KillBoard">
		<instance name="killBoardEntry" id="1" />
		<instance name="killBoardEntry" id="2" />
		<instance name="killBoardEntry" id="3" />
		<instance name="killBoardEntry" id="4" />
	</panel>

	<!-- OptiUI: VOIP bars -->
	<include file="optiui_voip_bars.package" />

	<panel width="25h" height="6h" align="center" valign="center" color="0 0 0 .5" noclick="true" passivechildren="true" watch="StatsStatus" ontriggerlua="self:SetVisible(param == 'submitting')">
		<animatedimage hmargin="10@" vmargin="10%" width="100@" height="100%" texture="/ui/elements/throb/throb.tga" noclick="true" loop="1" fps="30" onshow="StartAnim(1);" />
		<label width="-100@" align="right" font="dyn_14" textalign="center" textvalign="center" color="white" shadow="true" content="general_submitting_stats" noclick="1" />
	</panel>

	<panel width="25h" height="6h" align="center" valign="center" color="0 0 0 0.5"  noclick="true" passivechildren="true" watch="StatsStatus" ontriggerlua="self:SetVisible(param == 'successful')">
		<label align="right" font="dyn_14" textalign="center" textvalign="center" color="white" shadow="true" content="general_submission_success" noclick="1" />
	</panel>

	<!-- Scores -->
	<panel name="Nscores" height="2.0h" width="29.5h" x="23.0h" y="4.0h" align="right" noclick="true">

		<panel y="0.5h" grow="true" growinvis="false" width="28.0h" align="right" float="bottom" padding="1" noclick="true">

			<!-- Legion -->
			<panel name="Nscores_Legion" width="100%" noclick="true" >
				<frame texture="frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .8" noclick="true"/>
				<frame texture="frames/roundframe.tga" color="0 .3 0 1" borderthickness="0.6h" noclick="true" />
				<panel y="0.4h" grow="true" width="-1.0h" align="center" float="bottom" padding="0.3h" noclick="true">

					<panel grow="true" growinvis="false" width="100%" noclick="true" float="bottom" padding="0.2h">
						<instance name="score_entry" index="0"/>
						<instance name="score_entry" index="1"/>
						<instance name="score_entry" index="2"/>
						<instance name="score_entry" index="3"/>
						<instance name="score_entry" index="4"/>
						<panel sticky="true" stickytoinvis="false" width="100%" height="0.3h" noclick="true" color="invisible" />
					</panel>
				</panel>
			</panel>

			<!-- Hellbourne -->
			<panel name="Nscores_Hellbourne" width="100%" sticky="true" stickytoinvis="false" noclick="true" >
				<frame texture="frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .8" noclick="true"/>
				<frame texture="frames/roundframe.tga" color=".3 0 0 1" borderthickness="0.6h" noclick="true" />
				<panel y="0.4h" grow="true" width="-1.0h" align="center" float="bottom" padding="0.3h" noclick="true">

					<panel grow="true" growinvis="false" width="100%" noclick="true" float="bottom" padding="0.2h">
						<instance name="score_entry" index="5"/>
						<instance name="score_entry" index="6"/>
						<instance name="score_entry" index="7"/>
						<instance name="score_entry" index="8"/>
						<instance name="score_entry" index="9"/>
						<panel sticky="true" stickytoinvis="false" width="100%" height="0.3h" noclick="true" color="invisible" />
					</panel>
				</panel>
			</panel>

			<panel width="100%" height="0.1h" noclick="true" />

		</panel>

		<!-- Expand Scoreboard -->
		<button
			name="Nscores_max"
			visible="true"
			y="-0.3h" height="1.7h" width="1.7h"
			color="invisible"
			onmouseoverlua="GetWidget('score_open_tooltip', 'game'):SetVisible(1)"
			onmouseoutlua="GetWidget('score_open_tooltip', 'game'):SetVisible(0)"
			onclicklua="Game.ToggleScoreboard()"
			interactive="false"
		>
			<widgetstate statename="up">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#007191" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image width="1.3h" height="1.3h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/elements/maximize_btn.tga" noclick="true" />
			</widgetstate>
			<widgetstate statename="over">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#0096ec" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/maximize_btn.tga" noclick="true" />
			</widgetstate>
			<widgetstate statename="down" x="1" y="1">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#007191" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/maximize_btn.tga" noclick="true" />
			</widgetstate>
		</button>


		<!-- Collapse Scoreboard -->
		<button
			name="Nscores_min"
			visible="false"
			y="-0.3h" height="1.7h" width="1.7h"
			color="invisible"
			onmouseoverlua="GetWidget('score_close_tooltip', 'game'):SetVisible(1)"
			onmouseoutlua="GetWidget('score_close_tooltip', 'game'):SetVisible(0)"
			onclicklua="Game.ToggleScoreboard()"
			interactive="false"
		>
			<widgetstate statename="up">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#007191" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image width="1.3h" height="1.3h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/fe2/elements/minimize_bar.tga" noclick="true" />
			</widgetstate>
			<widgetstate statename="over">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#0096ec" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/fe2/elements/minimize_bar.tga" noclick="true" />
			</widgetstate>
			<widgetstate statename="down" x="1" y="1">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#007191" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/fe2/elements/minimize_bar.tga" noclick="true" />
			</widgetstate>
		</button>

	</panel>
	<!-- UIScript -->
	<template name="specator_kick_item">
		<panel width="100%" height="1.75h"
			visible="0"
			sticky="true" stickytoinvis="false"
			watch="MenuSpectatorInfo{index}"
			ontriggerlua="
				local kO = param0
				local onClick = function()
					self:UICmd('Kick(\''..kO..'\')')
				end
				self:SetCallback('onclick', onClick)
				self:RefreshCallbacks()

				self:SetVisible((GetAccountName() ~= param1) and (tonumber(param0) ~= -1) and (not AtoB(param3)))
			"
		>
			<!-- ## Mentor (10) - Purple | Local Spec (9) Orange | Global Spec White ## -->
			<label font="dyn_9" color="white" textvalign="center" shadow="true" noclick="true"
				watch="MenuSpectatorInfo{index}"
				ontriggerlua="
					if (AtoB(param10)) then
						self:SetColor('#E01BC6')
					elseif (AtoB(param9)) then
						self:SetColor('#FFCC00')
					else
						self:SetColor('#FFFFFF')
					end

					self:SetText(param1)
				"
			/>
			<!-- UIScript -->
			<instance name="kick_button" width="100@" height="100%" align="right" enabled="1"
				watch="MenuSpectatorInfo{index}"
				ontriggerlua="
					local kO = param0
					local onClick = function()
						self:UICmd('Kick(\''..kO..'\')')
					end
					self:SetCallback('onclick', onClick)
					self:RefreshCallbacks()

					GetWidget('game_kick_list', 'game'):DoEventN(1)
					self:SetVisible(AtoB(param9) or AtoB(param10))
				"
				onmouseoverlua="GetWidget('game_menu_tip_kick', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('game_menu_tip_kick', 'game'):SetVisible(0)"
				onhidelua="GetWidget('game_menu_tip_kick', 'game'):SetVisible(0)"
			/>

			<!-- Spec VOIP -->
			<panel x="-150@" width="100@" height="100%"  align="right" color="invisible" noclick="1">
				<image noclick="1"
					texture="/ui/common/chat.tga"
					watch="SpectatorVoice{index}"
					ontriggerlua="
						if AtoB(param1) then
							self:SetColor('red')
						elseif AtoB(param0) then
							self:SetColor('lime')
						else
							self:SetColor('white')
						end"
				/>
				<!-- UIScript -->
				<button
					color="invisible"
					interactive="false"
					watch="MenuSpectatorInfo{index}"
					ontrigger="SetOnclick('ToggleVoiceMute(' # param0 # ');');"
					onmouseoverlua="GetWidget('game_menu_tip_voice_spec', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('game_menu_tip_voice_spec', 'game'):SetVisible(0)"
				/>
			</panel>

		</panel>
	</template>

	<!-- Menu / Vote Buttons -->
	<panel name="game_dropdown_options" width="29.8h" height="7.45h" align="right" noclick="1">

		<!-- Remake Confirm -->
		<panel noclick="true" width="19h" align="right" x="-0.0h" y="-150%" visible="false" grow="true" regrow="true" name="remake_confirm"
			onevent0lua="self:SetVisible(1) self:SlideY('2.5h', 250)"
			onevent1lua="self:SlideY('-150%', 250) self:Sleep(250, function() self:SetVisible(0) end)"
		>
			<frame y="-1.6h" height="+2.25h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			<panel height="6h"/><!-- Minheight -->
			<panel width="-1h" align="center" y="1.0h" grow="true" float="bottom" padding="0.5h" regrow="true" growinvis="false">
				<label fity="true" fitypadding="0.5h" width="100%" font="dyn_10" color="1 1 1 1" shadow="true" wrap="true" content="game_menu_remake_confirm" noclick="true"/>

				<panel height="2h" width="100%">
					<instance
						name="button2"
						width="16h" align="center"
						label="game_menu_remake_btn"
						onclicklua="CallVote('remake') GetWidget('remake_confirm', 'game'):DoEventN(1)"
					/>
				</panel>

				<panel height="2h" width="100%">
					<instance
						name="button2"
						width="16h" align="center"
						label="general_cancel"
						onclicklua="GetWidget('remake_confirm', 'game'):DoEventN(1)"
					/>
				</panel>

			</panel>
		</panel>

		<!-- Conceed Confirm -->
		<panel noclick="true" width="19h" align="right" x="-0.0h" y="-150%" visible="false" grow="true" regrow="true" name="concede_confirm"
			onevent0lua="self:SetVisible(1) self:SlideY('2.5h', 250)"
			onevent1lua="self:SlideY('-150%', 250) self:Sleep(250, function() self:SetVisible(0) end)"
		>
			<frame y="-1.6h" height="+2.25h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			<panel height="6h"/><!-- Minheight -->
			<panel width="-1h" align="center" y="1.0h" grow="true" float="bottom" padding="0.5h" regrow="true" growinvis="false">
				<label fity="true" fitypadding="0.5h" width="100%" font="dyn_10" color="1 1 1 1" shadow="true" wrap="true" content="game_menu_concede_confirm" noclick="true"/>

				<panel height="2h" width="100%">
					<instance
						name="button2"
						width="16h" align="center"
						label="game_menu_concede_btn"
						onclicklua="CallVote('concede') GetWidget('concede_confirm', 'game'):DoEventN(1)"
					/>
				</panel>

				<panel height="2h" width="100%">
					<instance
						name="button2"
						width="16h" align="center"
						label="general_cancel"
						onclicklua="GetWidget('concede_confirm', 'game'):DoEventN(1)"
					/>
				</panel>

			</panel>
		</panel>

		<!-- Kick Player List -->
		<panel noclick="true" width="19h" align="right" x="-0.0h" y="-150%" visible="false" grow="true" regrow="true" name="game_kick_list"
			onevent0lua="self:SetVisible(true) self:SlideY('2.5h', 250)"
			onevent1lua="self:SlideY('-150%', 250) self:Sleep(250, function() self:SetVisible(0) end)"
		>
			<frame y="-1.6h" height="+2.25h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			<panel height="2h"/><!-- Minheight -->
			<instance height="2h" y="0.25h" name="header_bar" lbl="game_menu_vote_kick" lbl_font="dyn_10" show_close="0" />
			<panel width="-1h" align="center" y="2.5h" grow="true" float="bottom" padding="0.25h" regrow="true" growinvis="false">
				<label name="game_afk_kick_menu" font="dyn_9" color="gray" fity="1" textvalign="center" textalign="center" visible="1" shadow="true" noclick="true" content="game_menu_no_afk"/>

				<instance name="kick_player_item" index="0"/>
				<instance name="kick_player_item" index="1"/>
				<instance name="kick_player_item" index="2"/>
				<instance name="kick_player_item" index="3"/>
				<instance name="kick_player_item" index="4"/>
				<instance name="kick_player_item" index="5"/>
				<instance name="kick_player_item" index="6"/>
				<instance name="kick_player_item" index="7"/>
				<instance name="kick_player_item" index="8"/>
				<instance name="kick_player_item" index="9"/>

				<panel height="2h" width="100%">
					<instance
						name="button2"
						width="9h" align="center"
						label="general_close"
						onclicklua="GetWidget('game_kick_list', 'game'):DoEventN(1)"
					/>
				</panel>
			</panel>
		</panel>

		<!-- Spec Player List -->
		<panel noclick="true" width="19h" align="right" x="-0.0h" y="-150%" visible="false" grow="true" regrow="true" name="spec_kick_list"
			onevent0lua="self:SetVisible(true) self:SlideY('2.5h', 250); GetWidget('game_menu_tip_spec', 'game'):SetVisible(0)"
			onevent1lua="self:SlideY('-300%', 250) self:Sleep(250, function() self:FadeOut(50) end)"
		>
			<frame y="-1.6h" height="+2.25h" texture="/ui/info/combobox_dropdown.tga" borderthickness="3h" color="1 1 1 1" />
			<panel height="2h"/><!-- Minheight -->
			<instance height="2h" y="0.25h" name="header_bar" lbl="game_menu_vote_spec" lbl_font="dyn_10" show_close="0" />
			<panel width="-1h" align="center" y="2.5h" grow="true" float="bottom" padding="0.25h" regrow="true" growinvis="false">

				<instance name="specator_kick_item" index="0"/>
				<instance name="specator_kick_item" index="1"/>
				<instance name="specator_kick_item" index="2"/>
				<instance name="specator_kick_item" index="3"/>
				<instance name="specator_kick_item" index="4"/>
				<instance name="specator_kick_item" index="5"/>
				<instance name="specator_kick_item" index="6"/>
				<instance name="specator_kick_item" index="7"/>
				<instance name="specator_kick_item" index="8"/>
				<instance name="specator_kick_item" index="9"/>
				<instance name="specator_kick_item" index="10"/>
				<instance name="specator_kick_item" index="11"/>
				<instance name="specator_kick_item" index="12"/>
				<instance name="specator_kick_item" index="13"/>
				<instance name="specator_kick_item" index="14"/>
				<instance name="specator_kick_item" index="15"/>
				<instance name="specator_kick_item" index="16"/>
				<instance name="specator_kick_item" index="17"/>
				<instance name="specator_kick_item" index="18"/>
				<instance name="specator_kick_item" index="19"/>
				<instance name="specator_kick_item" index="20"/>
				<instance name="specator_kick_item" index="21"/>
				<instance name="specator_kick_item" index="22"/>
				<instance name="specator_kick_item" index="23"/>
				<instance name="specator_kick_item" index="24"/>
				<instance name="specator_kick_item" index="25"/>

				<panel height="2h" width="100%">
					<instance
						name="button2"
						width="9h" align="center"
						label="general_close"
						onclicklua="GetWidget('spec_kick_list', 'game'):DoEventN(1)"
					/>
				</panel>
			</panel>
		</panel>

		<panel x="-0.0h" y="0.0h" width="9.5h" height="2.0h" align="right" noclick="true">

			<!-- Menu Combobox -->
			<instance
				name="gamecontrol_combobox"
				id="menu_combobox_cover"
				width="100%"
				maxlistheight="4"
				lisbgheight="10.0h"
			/>
			<!-- Menu Combobox Cover -->
			<panel color="invisible" noclick="true">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="1 1 1 1" noclick="true" />
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="1 1 1 1" noclick="true" />
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="1 1 1 1" noclick="true" />
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_up.tga" noclick="true" />
			</panel>
			<panel name="menu_combobox_cover_hover" color="invisible" visible="false" noclick="true">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="#69ccff" noclick="true" />
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="#69ccff" noclick="true" />
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="#69ccff" noclick="true" />
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_over.tga" noclick="true" />
			</panel>
			<label x="0.8h" height="100%" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" noclick="true" content="game_menu_menu" />
		</panel>

		<panel x="-9.5h" y="0.0h" width="9.5h" height="2.0h" align="right" noclick="true">
			<!-- Voting Combobox -->
			<instance
				name="gamecontrol_combobox"
				id="voting_combobox_cover"
				width="100%"
				maxlistheight="3"
				lisbgheight="8.0h"
			/>
			<!-- Vote Combobox Cover -->
			<panel color="invisible" noclick="true">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="1 1 1 1" noclick="true" />
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="1 1 1 1" noclick="true" />
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="1 1 1 1" noclick="true" />
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_up.tga" noclick="true" />
			</panel>
			<panel name="voting_combobox_cover_hover" color="invisible" visible="false" noclick="true">
				<image height="100%" width="85%" align="center" texture="/ui/info/combobox_background_c.tga" color="#69ccff" noclick="true" />
				<image height="100%" width="100@" align="left" texture="/ui/info/combobox_background_l.tga" color="#69ccff" noclick="true" />
				<image height="100%" width="100@" align="right" texture="/ui/info/combobox_background_r.tga" color="#69ccff" noclick="true" />
				<image x="-1" width="100@" height="100%" align="right" valign="center" texture="/ui/info/combobox_button_over.tga" noclick="true" />
			</panel>
			<label x="0.8h" height="100%" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" noclick="true" content="game_menu_vote" />
			<label height="100%" width="-2.5h" textvalign="center" textalign="right" font="dyn_9" color="1 1 1 1" shadow="true" noclick="true" watch="VotePermissions" ontriggerlua="if (tonumber(param1) > 0) then self:SetText(math.ceil(tonumber(param1) / 1000.0)) else self:SetText('') end"  />

		</panel>

	</panel>

	<!-- END TOP -->
	<!-- Chat -->
	<panel noclick="1" passivechildren="0" >
		<instance name="game_chat_window" interface="game" xoffset="7h" yoffset="-32.5h"/>
	</panel>
	<lua file="/ui/scripts/chat.lua" />

	<!-- Walkthrough panels that needs to be in the game interface -->
	<template name="walkthrough_tip_storage_entry_template">
		<panel name="walkthrough_tip_storage_entry_{id}" height="4h" noclick="0" visible="0"
			onclicklua="Game_Walkthrough.MiscTipClicked({id})"
			onmouseover="Call('walkthrough_tip_storage_entry_color_panel_{id}', 'FadeIn(150);');"
			onmouseout="Call('walkthrough_tip_storage_entry_color_panel_{id}', 'FadeOut(150);');"
		>
			<frame texture="/ui/frames/togglebox.tga" borderthickness="1.0h" color="1 1 1 1" blockinput="false" noclick="1" />
			<image name="walkthrough_tip_storage_entry_icon_{id}" x="14@" width="58@" height="58%" valign="center" noclick="true"/>
			 
			<label name="walkthrough_tip_storage_entry_label_{id}" x="86@" textvalign="center" font="dyn_11" color=".9 .9 .9 1" shadow="true" noclick="1" blockinput="false" content="" />
			<!-- More Information -->
			<button
				x="-16@"
				width="48@" height="48%" 
				align="right" valign="center"
				color="invisible"
				onclicklua="Game_Walkthrough.MiscTipClicked({id})"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/tip_mark_up.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/elements/tip_mark_over.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="down" x="1" y="1">
					<image texture="/ui/elements/tip_mark_over.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="disabled">
					<image texture="/ui/elements/tip_mark_up.tga" rendermode="grayscale" noclick="true" />
				</widgetstate>
			</button>
			
			<!-- Use this for Flash -->
			<panel name="walkthrough_tip_storage_entry_color_panel_{id}" noclick="true" blocksinput="false">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#177bdf82" noclick="1" blocksinput="false"/>
				<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color="#0080ff" noclick="1" blocksinput="false"/>
			</panel>
			
		</panel>
	</template>
	<panel name="game_walkthrough_section" color="invisible" noclick="1" visible="0">
		<panel name="game_walkthrough_tip_parent" blockinput="0" grow="1" regrow="1" growinvis="0" noclick="1" onclick="FadeOut(150);" onrightclick="FadeOut(150);" width="70h" align="center" valign="bottom" y="-21h" visible="0"
			onshow="If(game_walkthrough_tip_duration != 0, SleepWidget(game_walkthrough_tip_duration, 'FadeOut(150)'));"
		>
			<frame texture="/ui/frames/togglebox.tga" borderthickness="1.4h" color="1 1 1 1" blockinput="false" noclick="1" />
			<panel name="game_walkthrough_tip_info_parent" grow="1" regrow="1" growinvis="0" y="1.4h" width="-2.8h" align="center" noclick="1" blockinput="0" float="bottom">			
				<panel grow="1" regrow="1" growinvis="0" width="100%" noclick="true" blockinput="0" >
					<panel width="11.0h" height="11.0h" valign="top">
						<image name="game_walkthrough_tip_icon" texture="$invis" noclick="1" blockinput="0"  visible="0"  />
						<frame color="invisible" bordercolor=".4 .4 .4 1" borderthickness="1" blockinput="0" noclick="1" />
					</panel>
					<panel grow="1" regrow="1" growinvis="0" width="-12.5h" align="right" noclick="1" blockinput="0" float="bottom" padding="0.3h">
						<label name="game_walkthrough_tip_icon_label" fity="true" color="#ffaa00" outline="1" font="dyn_16" textalign="left" content="" noclick="1" visible="0" blockinput="0"  />	
						<label name="game_walkthrough_tip_icon_desc" fity="true" wrap="true" color="1 1 1 1" shadow="1" font="dyn_14" noclick="1" visible="0" blockinput="0" 
							content=""
						/>
					</panel>
				</panel>
				<panel height="1.5h"/>
			</panel>			
		</panel>	
		
		<panel name="walkthrough_tip_storage_container" align="right" valign="bottom" x="0.5h" y="-25.0h" width="21h" float="bottom" padding="0.4h" grow="true" regrow="true" growinvis="false">
			<instance name="walkthrough_tip_storage_entry_template" id="1" />
			<instance name="walkthrough_tip_storage_entry_template" id="2" />
			<instance name="walkthrough_tip_storage_entry_template" id="3" />
			<instance name="walkthrough_tip_storage_entry_template" id="4" />
			<instance name="walkthrough_tip_storage_entry_template" id="5" />
		</panel>
	</panel>
	<!-- end of walkthrough stuff -->

	<!-- Shop / Obsv -->
	<childinterface file="game_shop_v3.interface" />
	<!-- Doesn't exist yet
		<include file="game_observatory.package"/>
	-->

	<frame y="0" width="100%" height="11.5h" align="center" valign="bottom" texture="/ui/info/backdrop.tga" color=".5 .5 .5 1" noclick="true"/>

	<!-- BOTTOM CENTER -->
	<panel name="game_bottom_center" x="0h" y="0h" width="75.0h" height="29.8h" align="center" valign="bottom" color="invisible" noclick="1">

		<!-- OptiUI: Container panel for middle screen elements. It includes mana/health bars, backpack, abilities and left side info -->
		<panel y="-0.5h" height="10.1h" valign="bottom" color="invisible" noclick="1">

			<!-- Abilities -->
			<!-- OptiUI: Adjustments to ability buttons panel size -->
			<panel name="game_center_abilities" x="2.6h" y="0h" width="36.2h" height="5.5h" align="center" valign="top" noclick="1" float="right" color="invisible"
				onloadlua="GameUIManager.RegisterSection(self, 'DefaultAbilities')"
			>
				<panel width="9.0h" noclick="1" >
					<instance name="ability_frame_single" slot="0"/>
					<instance name="ability_frame_single_plus_one" slot="0" slot_a="0" slot_b="5"/>
					<instance name="ability_frame_single_plus_two" slot="0" slot_a="0" slot_b="5" slot_c="6"/>
					<instance name="ability_frame_triple" slot="0" slot_a="5" slot_b="6" slot_c="7"/>
					<instance name="ability_frame_double" slot="0" slot_a="5" slot_b="6" />
				</panel>
				<panel width="9.0h" noclick="1" >
					<instance name="ability_frame_single" slot="1"/>
					<instance name="ability_frame_single_plus_one" slot="1" slot_a="1" slot_b="5"/>
					<instance name="ability_frame_single_plus_two" slot="1" slot_a="1" slot_b="5" slot_c="6"/>
					<instance name="ability_frame_triple" slot="1" slot_a="5" slot_b="6" slot_c="7"/>
					<instance name="ability_frame_double" slot="1" slot_a="5" slot_b="6" />
				</panel>
				<panel width="9.0h" noclick="1" >
					<instance name="ability_frame_single" slot="2"/>
					<instance name="ability_frame_single_plus_one" slot="2" slot_a="2" slot_b="5"/>
					<instance name="ability_frame_single_plus_two" slot="2" slot_a="2" slot_b="5" slot_c="6"/>
					<instance name="ability_frame_triple" slot="2" slot_a="5" slot_b="6" slot_c="7"/>
					<instance name="ability_frame_double" slot="2" slot_a="5" slot_b="6" />
				</panel>
				<panel width="9.0h" noclick="1" >
					<instance name="ability_frame_single" slot="3"/>
					<instance name="ability_frame_single_plus_one" slot="3" slot_a="3" slot_b="5"/>
					<instance name="ability_frame_single_plus_two" slot="3" slot_a="3" slot_b="5" slot_c="6"/>
					<instance name="ability_frame_triple" slot="3" slot_a="5" slot_b="6" slot_c="7"/>
					<instance name="ability_frame_double" slot="3" slot_a="5" slot_b="6" />
				</panel>
			</panel>

			<panel name="game_center_abilities_multi" x="2.6h" y="0h" width="36.2h" height="10.1h" align="center" valign="bottom" noclick="1" color="invisible"
				onloadlua="GameUIManager.RegisterSection(self, 'MultiAbilities')"
			>
				<panel float="right" width="30.0h" height="4.9h" noclick="true" align="center" valign="top" >
					<instance name="ability_frame_multi_slots" slot="0"/>
					<instance name="ability_frame_multi_slots" slot="1"/>
					<instance name="ability_frame_multi_slots" slot="2"/>
					<instance name="ability_frame_multi_slots" slot="3"/>
					<instance name="ability_frame_multi_slots" slot="5"/>
				</panel>
				<panel float="right" width="30.0h" height="4.9h" noclick="true" align="center" valign="bottom" >
					<instance name="ability_frame_multi_slots" slot="6"/>
					<instance name="ability_frame_multi_slots" slot="7"/>
					<instance name="ability_frame_multi_slots" slot="9"/>
					<instance name="ability_frame_multi_slots" slot="10"/>
					<instance name="ability_frame_multi_slots" slot="11"/>
				</panel>
			</panel>

			<panel name="game_center_health_mana" x="2.6h" y="0h" width="36.2h" height="4.0h" align="center" valign="bottom" noclick="1" color="invisible" >
				<!-- Health -->
				<panel
					name="game_center_health"
					height="1.9h"
					align="center"
					valign="top"
					color="invisible"
					watch="ActiveHealth"
					ontriggerlua="self:SetVisible(tonumber(param1) > 0)"
					onmouseoverlua="GetWidget('health_tooltip', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('health_tooltip', 'game'):SetVisible(0)"
					passivechildren="true"
				>
					<panel color="0 0 0 .5"/>
					<image texture="/ui/legion/behind_bar.tga" rendermode="additive" color="0 .9 0 .2"/>
					<panel name="game_center_health_lerp">
						<image texture="/ui/legion/optiui_behind_bar.tga" rendermode="normal" color="1 0 0 1"/>
						<image align="center" valign="center" texture="/ui/elements/optiui_bar_highlight.tga"/>
						<!-- <instance name="statusbar_overlay" barimage="optiui_behind_bar.tga" rendermode="" barcolor="1 0 0 1"/> -->
					</panel>
					<panel name="game_center_health_bar_backer" color="0 0 0 0">
						<image name="game_center_health_bar" onloadlua="self:SetVScale(self:GetHeight()..'p') self:DoEvent()" color=".2 1 .3 1" noclick="1"/>
						<instance name="statusbar_overlay"/>
					</panel>
					<label name="game_center_health_label" x="-1" font="dyn_10" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
					<label name="game_center_health_regen_label" x="-0.5h" font="dyn_10" color="white" outline="1" width="100%" height="100%" textalign="right" textvalign="center" visible="1" />
					<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="1" />
				</panel>

				<!-- Mana -->
				<panel
					name="game_center_mana"
					height="1.9h"
					align="center"
					valign="bottom"
					color="invisible"
					watch="ActiveMana"
					ontriggerlua="self:SetVisible(tonumber(param1) > 0)"
					onmouseoverlua="GetWidget('mana_tooltip', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('mana_tooltip', 'game'):SetVisible(0)"
					passivechildren="true"
				>
					<panel color="0 0 0 .5"/>
					<image texture="/ui/legion/behind_bar2.tga" rendermode="additive" color="0 .3 .9 .2"/>
					<panel name="game_center_mana_lerp" >
						<image texture="/ui/legion/optiui_behind_bar.tga" rendermode="normal" color="0.75 0.75 0.75 1"/>
						<image align="center" valign="center" texture="/ui/elements/optiui_bar_highlight.tga"/>
						<!-- <instance name="statusbar_overlay" barimage="optiui_behind_bar.tga" rendermode="" barcolor="0.75 0.75 0.75 1" /> -->
					</panel>
					<panel name="game_center_mana_bar_backer" >
						<image name="game_center_mana_bar" onloadlua="self:SetVScale(self:GetHeight()..'p') self:DoEvent()" color="0 .4 1 1" noclick="1"/>
						<instance name="statusbar_overlay"/>
					</panel>
					<label name="game_center_mana_label" x="-1" y="-1" font="dyn_10" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="center" />
					<label name="game_center_mana_regen_label" x="-0.5h" y="-1" font="dyn_10" color="white" outline="1" width="100%" height="100%" textalign="right" textvalign="center" visible="1" />
					<frame name="game_center_mana_bar_frame" borderthickness="1" bordercolor="gray" color="invisible" noclick="1" />
				</panel>
			</panel>

			<!-- OptiUI: Container panel for left side elements -->
			<panel width="21.2h" height="10.1h" align="left" valign="bottom" color="invisible" >

				<!-- Portrait -->
				<panel width="8.0h" height="8.0h" valign="top" align="left" color="invisible" noclick="true">

					<!-- OptiUI: Player color frame -->
					<frame name="game_center_portrait_bg"     texture="/ui/frames/rounded_bg_white.tga" borderthickness=".45h" bordercolor="gray" color="invisible" noclick="true"/>
					<frame name="game_center_portrait_frame"  texture="/ui/frames/roundframe.tga" borderthickness=".45h" bordercolor="gray" color="invisible" noclick="true"/>

					<panel width="-12%" height="-12%" align="center" valign="center" >
						<image name="game_center_portrait_icon" 
							onmouseldownlua="PlaySound('/shared/sounds/ui/center_view.wav') Action('PortraitCenter', 1.0)"
							onmouseluplua="Action('PortraitCenter', 0.0)"
							onmouseoverlua="GetWidget('unit_tooltip', 'game'):SetVisible(1)"
							onmouseoutlua="GetWidget('unit_tooltip', 'game'):SetVisible(0)"
						/>
						<!-- UIScript -->
						<button name="game_center_portrait_button"
							color="invisible"
							onclick="SelectUnit(ActiveIndex);"
							interactive="false"
						/>
						<panel name="game_center_portrait_model_bg" color="black" noclick="true" >
							<panel color="0 0 0 .9" noclick="true" />
						</panel>

						<!-- OptiUI: Made levelup portrait glow a texture instead of a model -->
						<modelpanel name="game_center_portrait_glow"
							noclick="true"
							model="effects/portrait_lvlup/portrait_emitter.mdf"
							anim="idle"
							effect="effects/portrait_lvlup/portrait_lvlup.effect"
							camerapos="-1 0 0"
							cameraangles="0 0 180"
							camerafov="55"
							depthclear="false"
							depthcompress="true"
							onshow="SetEffect('/ui/effects/portrait_lvlup/portrait_lvlup.effect');"
						/>

						<modelpanel name="game_center_portrait_model"
							scenebuffer="true"
							visible="1"
							noclick="true"
							model=""
							anim="portrait"
							camerapos="0 1 26"
							cameraangles="0 0 200"
							camerafov="25"
							cameranear="1"
							carmerafar="100"
							depthclear="false"
							depthcompress="true"
							sunazimuth="120"
							sunaltitude="50"
							suncolor="0.9 0.9 0.9"
							ambientcolor="0.6 0.7 0.7"
							onshow="SetAnim('portrait');"
							lookupresource="true"
						/>
						<frame color="invisible" bordercolor="black" borderthickness="1" noclick="true" />
					</panel>

					<!-- OptiUI: and Level Indicator -->
					<panel name="game_center_level_parent" height="25%" width="25%" align="right" valign="bottom" color="invisible" passivechildren="true"
						onmouseoverlua="GetWidget('experience_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('experience_tooltip', 'game'):SetVisible(0)"
					>
						<frame name="game_center_level_bg"    texture="/ui/frames/rounded_bg_white.tga" borderthickness=".45h" bordercolor="gray" color="invisible" noclick="true"/>
						<frame name="game_center_level_frame" texture="/ui/frames/roundframe.tga" borderthickness=".45h" bordercolor="gray" color="invisible" noclick="true"/>
						<label name="game_center_level_label" textalign="center" textvalign="bottom" font="dyn_10" color="yellow" outline="true" />
					</panel>

					<!-- Primary Icon -->
					<panel
						y="1"
						height="30%"
						width="30%"
						align="left"
						valign="bottom"
						color="invisible"
						onmouseoverlua="GetWidget('attribute2_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('attribute2_tooltip', 'game'):SetVisible(0)"
						passivechildren="true"
					>
						<image watch="ActiveAttributeInfo" ontriggerlua="self:SetTexture('/ui/common/optiui_primary_' .. param11 .. '.tga');" rendermode="normal" />
					</panel>

					<!-- primary icon cover, we use this so the below mouseover/out works nicely when swapping between things -->
					<image
						y="1"
						height="30%"
						width="30%"
						align="left"
						valign="bottom"
						color="invisible"
						passivechildren="true"
						watch="ActiveAttributeInfo"
						ontriggerlua="
							self:SetVisible(param11 == 'none')
						"
						texture="/ui/common/optiui_primary_none.tga"
					/>

					<!-- Alt Courier Button -->
					<panel
						y="1"
						height="30%"
						width="30%"
						align="left"
						valign="bottom"
						watch="AltCourierAccess"
						ontriggerlua="self:SetVisible(AtoB(param1))"
					>
						<button
							texture="/ui/common/optiui_alt_courier.tga"
							onmouseoverlua="GetWidget('alt_courier_select_tip', 'game'):SetVisible(1)"
							onmouseoutlua="GetWidget('alt_courier_select_tip', 'game'):SetVisible(0)"
							onclicklua="GetWidget('altcourier_select', 'game'):DoEventN(0)"
							interactive="false"
							enabled="true"
						/>
						<animatedimage onshow="StartAnim();" x="-2%" height="42@" width="42%" valign="center" align="center" fps="30" loop="true" texture="common/alt_courier/AltCourier.tga" noclick="true" />
					</panel>

					<!-- Alt Courier Lock -->
					<panel
						y="1"
						height="30%"
						width="30%"
						align="right"
						valign="bottom"
						watch="AltCourierAccess"
						ontriggerlua="self:SetVisible(AtoB(param3) and AtoB(param4))"
					>
						<!-- UIScript -->
						<button
							color="invisible"
							onmouseoverlua="
								if (self:GetButtonState() == 0) then
									GetWidget('alt_courier_lock_tip', 'game'):SetVisible(1)
								else
									GetWidget('alt_courier_unlock_tip', 'game'):SetVisible(1)
								end
							"
							onmouseoutlua="
								GetWidget('alt_courier_unlock_tip', 'game'):SetVisible(0)
								GetWidget('alt_courier_lock_tip', 'game'):SetVisible(0)
							"
							onclick="
								RequestToggleDynamicAvatarLock();
							"
							interactive="false"
							enabled="true"
							numstates="2"
							watch="AltCourierAccess"
							ontriggerlua="	if (AtoB(param2)) then
												self:SetButtonState(1)
											else
												self:SetButtonState(0)
											end
										"
						>
							<widgetstate statename="up">
								<image texture="/ui/common/optiui_alt_courier_unlock_up.tga" noclick="true" />
								<image texture="/ui/common/courier_unlock.tga" x="-0.1h" width="50@" height="50%" align="center" valign="center" noclick="true" />
							</widgetstate>
							<widgetstate statename="over">
								<image texture="/ui/common/optiui_alt_courier_unlock_over.tga" noclick="true" />
								<image texture="/ui/common/courier_unlock.tga" x="-0.1h" width="50@" height="50%" align="center" valign="center" noclick="true" />
							</widgetstate>
							<widgetstate statename="down">
								<image texture="/ui/common/optiui_alt_courier_unlock_down.tga" noclick="true" />
								<image texture="/ui/common/courier_unlock.tga" x="-0.1h" width="50@" height="50%" align="center" valign="center" noclick="true" />
							</widgetstate>
							<widgetstate statename="up2">
								<image texture="/ui/common/optiui_alt_courier_lock_up.tga" noclick="true" />
								<image texture="/ui/common/courier_lock.tga" x="-0.1h" width="50@" height="50%" align="center" valign="center" noclick="true" />
							</widgetstate>
							<widgetstate statename="over2">
								<image texture="/ui/common/optiui_alt_courier_lock_over.tga" noclick="true" />
								<image texture="/ui/common/courier_lock.tga" x="-0.1h" width="50@" height="50%" align="center" valign="center" noclick="true" />
							</widgetstate>
							<widgetstate statename="down2">
								<image texture="/ui/common/optiui_alt_courier_lock_down.tga" noclick="true" />
								<image texture="/ui/common/courier_lock.tga" x="-0.1h" width="50@" height="50%" align="center" valign="center" noclick="true" />
							</widgetstate>
						</button>
					</panel>
				</panel>

				<!-- Detail Stats -->
				<!-- OptiUI: Made panels smaller to add a little more information to the UI -->
				<panel width="13.0h" height="8.0h" align="right" valign="top" color="invisible" noclick="1">
					<!-- Damage -->
					<!-- OptiUI: Added attack cooldown value -->
					<panel name="game_center_damage" y="-6.5h" height="1.5h" valign="bottom" passivechildren="true"
						onmouseoverlua="GetWidget('attack_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('attack_tooltip', 'game'):SetVisible(0)"
					>
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".5 0 0 .25" />
						<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor=".5 0 0 .25" />
						<image width="1.4h" height="1.4h" valign="center" texture="/ui/common/damage_icon.tga" />
						<label name="game_center_damage_label" width="-2.0h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="top" />
						<label width="-2.0h" height="100%" align="right" font="dyn_9" color="gray" outline="1" textalign="right" textvalign="top"
							watch="ActiveAttackCooldown"
							ontriggerlua="self:SetText(' ' .. round(param1/1000,2) .. 's ')"
		 				/>
					</panel>
					<!-- Movement Speed -->
					<panel y="-4.7h" height="1.5h" valign="bottom" passivechildren="true"
						onmouseoverlua="GetWidget('movement_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('movement_tooltip', 'game'):SetVisible(0)"
					>
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 .5 0 .30" />
						<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 .5 0 .30" />	
						<image width="1.4h" height="1.4h" valign="center" texture="/ui/common/move_speed_icon.tga" />
						<label name="game_center_speed_label" width="-2.0h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="top" />
					</panel>
					<!-- Armor -->
					<panel y="-1.8h" height="2.5h" valign="bottom" passivechildren="true"
						onmouseoverlua="GetWidget('defense_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('defense_tooltip', 'game'):SetVisible(0)"
					>
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".5 0 0 .35" />
						<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor=".5 0 0 .35" />
						<image width="1.4h" height="1.4h" valign="center" texture="/ui/common/armor_icon.tga" />
						<label name="game_center_armor_label" width="-2.0h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="top"/>
						<label name="game_center_damage_mitigation_label" width="-2.0h" height="100%" align="right" font="dyn_8" color="gray" outline="1" textalign="left" textvalign="bottom"/>
					</panel>
					<!-- Attributes -->
					<panel name="game_center_att_parent" y="0h" height="1.5h" valign="bottom" passivechildren="true"
						onmouseoverlua="GetWidget('attribute_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('attribute_tooltip', 'game'):SetVisible(0)"
					>
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 .5 0 .40" />
						<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 .5 0 .40" />
						<image width="1.4h" height="1.4h" valign="center" texture="/ui/common/plus_icon.tga" />
						<label name="game_center_att_label" width="-2.0h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="top" />
					</panel>
				</panel>


				<!-- Hero Name -->
				<panel x="0h" y="0h" width="19.0h" height="1.9h" align="left" valign="bottom" color="0 0 0 .6" noclick="false" passivechildren="true"
						onmouseoverlua="GetWidget('experience_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('experience_tooltip', 'game'):SetVisible(0)"
					>
					<!-- OptiUI: Experience and lifetime bars in the Hero Name panel -->
					<panel name="game_center_exp_bar_parent" visible="true" noclick="true" passivechildren="true">
						<panel name="game_center_exp_bar_backer" visible="false" noclick="true" passivechildren="true" >
							<panel texture="/ui/legion/behind_bar.tga" rendermode="additive" color=".1 0 .3 1" noclick="true"/>
							<panel name="game_center_exp_bar" color="0.7 0 1 1" noclick="1">
								<instance name="statusbar_overlay"/>
							</panel>
							<label name="game_center_exp_bar_label" x="-0.5h" width="100%" height="100%" textalign="right" textvalign="center" font="dyn_9" color="white" outline="true" noclick="1"/>
						</panel>
					</panel>
					<panel name="game_center_life_bar_backer" visible="false" noclick="true" passivechildren="true" >
						<panel texture="/ui/legion/behind_bar.tga" rendermode="additive" color=".2 .2 .1 1" noclick="true"/>
						<panel name="game_center_life_bar" color="#e5df2f" noclick="1">
							<instance name="statusbar_overlay"/>
						</panel>
						<label name="game_center_life_bar_label" x="-0.5h" width="100%" height="100%" textalign="right" textvalign="center" font="dyn_9" color="white" outline="true" noclick="1" />
					</panel>
					<label name="game_center_name_label" x="0.5h" width="100%" height="100%" font="dyn_10" color="white" textalign="left" textvalign="center" outline="1" />
					<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="1" />
				</panel>


				<!-- Ability Selection Toggle -->
				<panel x="0h" y="0h" width="1.9h" height="1.9h" align="right" valign="bottom"
					onloadlua="GameUIManager.RegisterSection(self, 'LevelupButtons')"
				>
					<panel x="0h" y="0h" width="1.9h" height="1.9h" color="black">
						<button
							x="0h" y="0"
							align="center"
							valign="center"
							width="1.9h"
							height="1.9h"
							color="invisible"
							numstates="2"
							cvar="cg_displayLevelup"
							onclicklua="PlaySound('/shared/sounds/ui/popup.wav')"
							interactive="false"
						>

							<widgetstate statename="up">
								<image texture="/ui/common/ability_toggle_up.tga" />
							</widgetstate>
							<widgetstate statename="over">
								<image texture="/ui/common/ability_toggle_up_over.tga" />
							</widgetstate>
							<widgetstate statename="down">
								<image y="1" x="1" texture="/ui/common/ability_toggle_up_over.tga" />
							</widgetstate>

							<widgetstate statename="up2">
								<image texture="/ui/common/ability_toggle_down.tga" />
							</widgetstate>
							<widgetstate statename="over2">
								<image texture="/ui/common/ability_toggle_down_over.tga" />
							</widgetstate>
							<widgetstate statename="down2">
								<image y="1" x="1" texture="/ui/common/ability_toggle_down_over.tga" />
							</widgetstate>
						</button>
					</panel>
					<panel x="0h" y="0h" width="1.9h" height="1.9h" color="black" watch="ActiveLevel" ontriggerlua="self:SetVisible(tonumber(param1) > 0);">
						<label x="0h" y="0h" width="100%" height="100%" textalign="center" textvalign="center" font="dyn_10" watch="ActiveLevel" color="yellow" shadow="true" ontriggerlua="self:SetText(param1);" noclick="true"/>
					</panel>
					<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="true" />
				</panel>

				<panel x="0h" y="0h" width="1.9h" height="1.9h" align="right" valign="bottom"
					onloadlua="GameUIManager.RegisterSection(self, 'MultiAbilities')"
				>
					<panel x="0h" y="0h" width="1.9h" height="1.9h" color="black">
						<instance name="ability_button" slot="45"/>
					</panel>
					<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="true" />
				</panel>
			</panel>

			<!-- Shop Indicator -->
			<panel name="item_shop_sign" x="-5.5h" y="-10.8h" width="4.0h" height="4.0h" align="right" valign="bottom" visible="true" >
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .6" />
				<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" />
				<image valign="top" align="center" texture="common/optiui_sign.tga" />
				<!-- UIScript -->
				<button
					color="invisible"
					onmouseoverlua="GetWidget('shop_tooltip', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('shop_tooltip', 'game'):SetVisible(0)"
					onclick="PlaySound('/shared/sounds/ui/shop.wav'); If(ItemCursorVisible and PlayerCanShop, Sell(), ToggleShop());"
					interactive="false"
				/>
			</panel>

			<panel noclick="1"
				onloadlua="
					GameUIManager.RegisterFeatureAndSection(self, 'MultiAbilities',
					function(map)
						return (map == 'prophets')
					end,
					function()
						GetWidget('game_center_health_mana', 'game'):SetY('-10.8h')
						GetWidget('channel_bars', 'game'):SetY('-15.2h')
					end
					)
				"
			>
			</panel>
			<panel noclick="1"
				onloadlua="
					GameUIManager.RegisterFeatureAndSection(self, 'DefaultAbilities',
					function(map)
						return (map ~= 'prophets')
					end,
					function()
						GetWidget('game_center_health_mana', 'game'):SetY('0')
						GetWidget('channel_bars', 'game'):SetY('-25h')
					end
					)
				"
			>
			</panel>

			<!-- Inventory Cover -->
			<panel name="bottom_center_inventory_cover" x="0.0h" y="0.0h" width="16.0h" height="10.1h" align="right" valign="bottom" color="black" noclick="true" watch="ActiveHasInventory" ontriggerlua="self:SetVisible(not AtoB(param))">
				<image width="20.2h" texture="/ui/common/optiui_inventory_cover.tga" noclick="true"/>
				<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="0" />
			</panel>

			<!-- Ward Slot -->
			<panel name="game_ward_slot" width="4.9h" height="4.9h" align="right" valign="bottom" noclick="1"
				watch="ActiveCourier"
				ontriggerlua="self:SetVisible(not AtoB(param))"
			>
				<panel noclick="1" align="center" valign="center" >
					<instance name="inventory_button" slot="63" />
				</panel>
			</panel>

			<!-- Backpack -->
			<panel width="16.0h" height="10.1h" align="right" valign="bottom" color="invisible" noclick="true"
				onloadlua="
					GameUIManager.RegisterFeatureAndSection(self, 'Inventory',
					function(map)
						return (map ~= 'prophets')
					end,
					nil,
					function()
						GetWidget('bottom_center_inventory_cover', 'game'):SetVisible(1)
					end
					)
				"
			>
				<panel width="4.9h" height="4.9h">
						<instance name="inventory_button" slot="48"/>
					</panel>
				<panel width="4.9h" height="4.9h" align="center">
						<instance name="inventory_button" slot="49"/>
					</panel>
				<panel width="4.9h" height="4.9h" align="right">
						<instance name="inventory_button" slot="50"/>
					</panel>

				<panel width="4.9h" height="4.9h" valign="bottom">
						<instance name="inventory_button" slot="51"/>
					</panel>
				<panel width="4.9h" height="4.9h" valign="bottom" align="center">
						<instance name="inventory_button" slot="52"/>
					</panel>
				<panel width="4.9h" height="4.9h" valign="bottom" align="right">
						<instance name="inventory_button" slot="53"/>
				</panel>
			</panel>

			<!-- Inventory -->
			<panel name="inventory" width="16.0h" height="13.0h" align="right" valign="bottom" color="invisible" noclick="true">
				<!-- Gold Amt / Shop Button -->
				<panel name="shop_button" width="6.4h" height="2.3h" >
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .6" />
					<frame texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" />

					<!-- UIScript -->
					<image x="1" y="-1" height="2.2h" width="2.2h" valign="bottom" align="left" texture="common/optiui_gold.tga"/>
					<label name="game_center_gold_label" y="0.0h" x="1.6h" fitx="1" height="100%" align="left" textalign="left" textvalign="bottom" font="dyn_11" color="white" outline="1" />
					<!-- UIScript -->
					<button
						color="invisible"
						onmouseoverlua="GetWidget('shop_tooltip_gold_report', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('shop_tooltip_gold_report', 'game'):SetVisible(0)"
						onclick="PlaySound('/shared/sounds/ui/shop.wav'); If(ItemCursorVisible and PlayerCanShop, Sell(), ToggleShop());"
						interactive="false"
					/>
				</panel>

				<!-- Gold Report -->
				<instance name="simple_tooltip" tip_id="shop_tooltip" x="6.65h" y="-7.5h" width="13.0h" height="2.8h" color="1 1 1 1" align="right" label="game_button_open_close_shop" visible="0"/>
			</panel>

		</panel>

		<!-- Level Up Buttons -->
		<!-- OptiUI: Moved ability level up button holder above everything else -->
		<panel name="game_center_levelup_btn_holder_parent" x="0.6h" y="-11.2h" width="40.2h" height="4.0h" align="center" valign="bottom" color="invisible" noclick="true"
			onloadlua="
				GameUIManager.RegisterFeatureAndSection(self, 'LevelupButtons',
				function(map)
					return (map ~= 'prophets')
				end
				)
			"
		>
			<panel name="game_center_levelup_btn_holder" color="invisible" noclick="true" >
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .4" noclick="true" />
				<frame name="game_center_levelup_btn_holder_frame" texture="/ui/frames/roundframe.tga" bordercolor="gray" borderthickness=".6h" noclick="true"/>

				<panel float="right" noclick="true"> 
					<panel width="4.0h" noclick="1" >
						<panel valign="center" align="center" height="70%" width="70@" >
							<instance name="ability_button_lvlup" slot="4"/>
						</panel>
					</panel>
					<panel width="9.0h" noclick="1" >
						<panel valign="center" align="center" height="80%" width="80@" >
							<instance name="ability_button_lvlup" slot="0"/>
						</panel>
					</panel>
					<panel width="9.0h" noclick="1" >
						<panel valign="center" align="center" height="80%" width="80@" >
							<instance name="ability_button_lvlup" slot="1"/>
						</panel>
					</panel>
					<panel width="9.0h"  noclick="1" >
						<panel valign="center" align="center" height="80%" width="80@" >
							<instance name="ability_button_lvlup" slot="2"/>
						</panel>
					</panel>
					<panel width="9.0h" noclick="1" >
						<panel valign="center" align="center" height="80%" width="80@" >
							<instance name="ability_button_lvlup" slot="3"/>
						</panel>
					</panel>
				</panel>
			</panel>
		</panel>>
		
		<!-- Error Messages -->
		<textbuffer name="game_center_error_messages"
			x="2.6h"
			y="-18.75h"
			width="63h"
			height="7h"
			align="center"
			valign="bottom"
			textalign="center"
			font="dyn_14"
			fadecolor="white"
			fadetime="5000"
			color="invisible"
			textcolor="#F0E68C"
			shadow="true"
			shadowcolor="black"
			shadowoffset="2"
			wrap="false"
			anchorbottom="true"
			usesmileys="false"
			usescrollbar="false"
			noclick="true"
			maxlines="3"
		/>

	</panel>
	<!-- END BOTTOM CENTER -->

	<!-- BOTTOM LEFT -->
	<!-- Attack Modifiers -->
	<panel name="attack_modifiers_left" group="game_attack_modifiers"  x="0.5h" y="-24.0h" width="28.8h" height="3.2h" align="left" valign="bottom" color="invisible" noclick="true" visible="1">
		<instance name="attack_modifier" x="0%"    align="left" index="0"/>
		<instance name="attack_modifier" x="12.5%" align="left" index="1"/>
		<instance name="attack_modifier" x="25%"   align="left" index="2"/>
		<instance name="attack_modifier" x="37.5%" align="left" index="3"/>
		<instance name="attack_modifier" x="50%"   align="left" index="4"/>
		<instance name="attack_modifier" x="62.5%" align="left" index="5"/>
		<instance name="attack_modifier" x="75%"   align="left" index="6"/>
		<instance name="attack_modifier" x="87.5%" align="left" index="7"/>
	</panel>

	<panel name="attack_modifiers_right"  group="game_attack_modifiers" x="-0.5h" y="-24.0h" width="28.8h" height="3.2h" align="right" valign="bottom" color="invisible" noclick="true" visible="0">
		<instance name="attack_modifier" x="-87.5%" align="right" index="7"/>
		<instance name="attack_modifier" x="-75%"   align="right" index="6"/>
		<instance name="attack_modifier" x="-62.5%" align="right" index="5"/>
		<instance name="attack_modifier" x="-50%"   align="right" index="4"/>
		<instance name="attack_modifier" x="-37.5%" align="right" index="3"/>
		<instance name="attack_modifier" x="-25%"   align="right" index="2"/>
		<instance name="attack_modifier" x="-12.5%" align="right" index="1"/>
		<instance name="attack_modifier" x="-0%"    align="right" index="0"/>
	</panel>

	<!-- Lag indicator -->
	<image name="game_lag_indicator" width="5h" height="5h" align="left" valign="center" texture="/ui/elements/disconnect.tga" watch="Lag" ontriggerlua="self:SetVisible(AtoB(param0))" visible="false" />

	<!-- Map Left -->
	<!-- UIScript -->
	<!-- Minimap radial menu, it will be left/right aligned when it's opened depending on the minimap position -->
	<instance name="radial_minimap" />

	<panel name="mini_map_left" group="game_mini_map" visible="true" width="23.2h" height="23.2h" align="left" valign="bottom" noclick="true">
		<map hoversize="0.5" outlinesize="0.19h" name="minimap" texture="!minimap_texture" watch="Minimap" onclick="If(MinimapClick(param0, param1), BreakDrag());" onrightclick="If(MinimapRightClick(param0, param1), BreakDrag());"/>
		<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="true" />
		<panel color="invisible" x="1%" y="1%" height="10%" width="10%" align="left" valign="top">
			<button noclick="1" cvar="cg_unitPlayerColors" numstates="2" color="invisible" interactive="false">
				<widgetstate statename="up" >
					<image texture="/ui/elements/team_colors_up.tga"/>
				</widgetstate>
				<widgetstate statename="up2" >
					<image texture="/ui/elements/team_colors_up2.tga"/>
				</widgetstate>
			</button>
			<button
				texture="/ui/elements/button_roundhl.tga"
				onclicklua="Set('cg_unitPlayerColors', not GetCvarBool('cg_unitPlayerColors')) GetWidget('teamcolors_tooltip', 'game'):SetVisible(0)"
				onmouseoverlua="GetWidget('teamcolors_tooltip', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('teamcolors_tooltip', 'game'):SetVisible(0)"
				interactive="false"
			/>
		</panel>
	</panel>

	<!-- Map Right (Alt View) -->
	<panel name="mini_map_right" group="game_mini_map" visible="false" width="23.2h" height="23.2h" align="right" valign="bottom" noclick="true">
		<map hoversize="0.5" outlinesize="0.19h" name="minimap_altview" texture="!minimap_texture" watch="Minimap" onclick="If(MinimapClick(param0, param1), BreakDrag());" onrightclick="If(MinimapRightClick(param0, param1), BreakDrag());"/>
		<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="true" />
		<panel color="invisible" x="-1%" y="1%" height="10%" width="10%" align="right" valign="top">
			<button noclick="1" cvar="cg_unitPlayerColors" numstates="2" color="invisible" interactive="false">
				<widgetstate statename="up" >
					<image texture="/ui/elements/team_colors_up.tga"/>
				</widgetstate>
				<widgetstate statename="up2" >
					<image texture="/ui/elements/team_colors_up2.tga"/>
				</widgetstate>
			</button>
			<button
				texture="/ui/elements/button_roundhl.tga"
				onclicklua="Set('cg_unitPlayerColors', not GetCvarBool('cg_unitPlayerColors')) GetWidget('team_colors_tooltip_altview', 'game'):SetVisible(0)"
				onmouseoverlua="GetWidget('team_colors_tooltip_altview', 'game'):SetVisible(1)"
				onmouseoutlua="GetWidget('team_colors_tooltip_altview', 'game'):SetVisible(0)"
				interactive="false"
			/>
		</panel>
	</panel>
	<!-- END BOTTOM LEFT -->

	<!-- Map Hover Popup
		Needs to align left or right based on mini map location selection
	-->
	<floater grow="true" regrow="1" x="0.5h" y="1.0h" align="left" valign="bottom" color="invisible" noclick="true" name="mini_map_hover" onloadlua="self:ForceToFront()" visible="false"
		watch="MinimapHover"
		ontriggerlua="
			if (GetCvarBool('ui_minimap_rightside')) then
				self:SetAlign('right')
			else
				self:SetAlign('left')
			end

			if (AtoB(param0)) then
				self:SetVisible(1)
			else
				self:SetVisible(0)
			end
		"
	>

		<panel grow="true" regrow="1" growinvis="0" color="0 0 0 .6" noclick="true">
			<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" />

			<!-- Hero -->
			<panel
				visible="false"
				grow="true"
				regrow="true"
				float="bottom"
				watch="MinimapHover"
				ontriggerlua="if (AtoB(param0)) then self:SetVisible(AtoB(param1) and (not AtoB(param2))) end"
			>
				<panel grow="true" height="1.8h">
					<panel x="0.3h" y="0.3h" width="1.8h" height="1.8h">
						<image watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetTexture(param4) end" />
						<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" />
					</panel>
					<label x="2.3h" y="0.1h" height="100%" font="dyn_9" textvalign="center" color="1 1 1 1" noclick="true" watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetText(param3) self:SetWidth(GetStringWidth('dyn_9', param3) + self:GetXFromString('0.3h')) end" content="--" />
				</panel>
				<panel width="100%" height="0.2h" />
				<!-- HP -->
				<panel
					width="100%" height="0.5h"
					visible="true"
					watch="MinimapHover"
					ontriggerlua="
						if (AtoB(param0)) then
							self:SetVisible(tonumber(param5) > 0)
						end
					"
				>
					<panel width="-0.6h" align="center">
						<panel watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetWidth(FtoP(param5)) self:SetColor(Saturate(1 - (tonumber(param5) - 0.50) / 0.50), (tonumber(param5) + (((tonumber(param5) - 0.05) / 1.0) * 0.2)) / 0.45, 0, 1) end" color="0 1 0 0">
							<frame color="invisible" borderthickness="1" bordercolor="0 0 0 1" />
						</panel>
					</panel>
				</panel>
				<!-- Mana -->
				<panel
					width="100%" height="0.5h"
					visible="true"
					watch="MinimapHover"
					ontriggerlua="if (AtoB(param0)) then self:SetVisible(tonumber(param6) > 0) end"
				>
					<panel width="-0.6h" align="center">
						<panel texture="/ui/info/mana_pos.tga" watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetWidth(round(tonumber(param6)*100.0)..'%') end">
							<frame color="invisible" borderthickness="1" bordercolor="0 0 0 1" />
						</panel>
					</panel>
				</panel>
				<panel width="100%" height="0.2h" />
				<!-- Inventory -->
				<panel grow="true" regrow="1" growinvis="0" height="1.7h" float="right" padding="0.1h" >
					<panel width="0.3h" height="100%"/>
					<instance name="minimap_inventory_item" param="7" />
					<instance name="minimap_inventory_item" param="8" />
					<instance name="minimap_inventory_item" param="9" />
					<instance name="minimap_inventory_item" param="10" />
					<instance name="minimap_inventory_item" param="11" />
					<instance name="minimap_inventory_item" param="12" />
					<instance name="minimap_inventory_item_hiding" param="13" />
					<panel width="0.3h" height="100%" sticky="1" stickytoinvis="0"/>
				</panel>

				<panel width="100%" height="0.2h" />
			</panel>

			<!-- Shop -->
			<panel
				visible="false"
				grow="true"
				float="bottom"
				watch="MinimapHover"
				ontriggerlua="if (AtoB(param0)) then self:SetVisible(AtoB(param2) and (not AtoB(param1))) end"
			>
				<panel grow="true" height="1.8h">
					<panel x="0.3h" y="0.3h" width="1.8h" height="1.8h">
						<image watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetTexture(param4) end" />
						<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" />
					</panel>
					<label x="2.3h" y="0.1h" height="100%" font="dyn_9" textvalign="center" color="1 1 1 1" noclick="true" watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetText(param3) self:SetWidth(GetStringWidth('dyn_9', param3) + self:GetXFromString('0.3h')) end" content="--" />
				</panel>
				<panel width="100%" height="0.2h" sticky="true" stickytoinvis="false" />
			</panel>

			<!-- Building -->
			<panel
				visible="false"
				grow="true"
				growinvis="false"
				float="bottom"
				watch="MinimapHover"
				ontriggerlua="if (AtoB(param0)) then self:SetVisible((not AtoB(param2)) and (not AtoB(param1))) end"
			>
				<panel grow="true" height="1.8h">
					<panel x="0.3h" y="0.3h" width="1.8h" height="1.8h">
						<image watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetTexture(param4) end" />
						<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" />
					</panel>
					<label x="2.3h" y="0.1h" height="100%" font="dyn_9" textvalign="center" color="1 1 1 1" noclick="true" watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetText(param3) self:SetWidth(GetStringWidth('dyn_9', param3) + self:GetXFromString('0.3h')) end" content="--" />
				</panel>
				<!-- HP -->
				<panel
					width="100%" height="0.5h"
					visible="true"
					watch="MinimapHover"
					ontriggerlua="if (AtoB(param0)) then self:SetVisible(tonumber(param5) > 0) end"
				>
					<panel width="-0.6h" align="center">
						<panel width="2" color="1 0 0 1"/>
						<panel watch="MinimapHover" ontriggerlua="if (AtoB(param0)) then self:SetWidth(FtoP(param5)) if (not AtoB(param14)) then self:SetColor(Saturate(1 - (tonumber(param5) - 0.50) / 0.50), (tonumber(param5) + (((tonumber(param5) - 0.05) / 1.0) * 0.2)) / 0.45, 0, 1) else self:SetColor('1 1 0') end end" color="0 1 0 0">							<frame color="invisible" borderthickness="1" bordercolor="0 0 0 1" />
						</panel>
					</panel>
				</panel>
				<panel width="100%" height="0.2h" sticky="true" stickytoinvis="false" />
			</panel>
		</panel>
	</floater>

	<!-- BOTTOM RIGHT -->

	<!-- Selection Info(s)-->
	<!-- Selection Info Right -->
	<panel name="selection_info_right" group="game_selection_info" visible="true" width="29.8h" height="29.8h" align="right" valign="bottom" color="invisible" noclick="1">
		<!-- Unit Selected -->
		<panel name="game_selected_info_orders" color="invisible" visible="1" noclick="1" height="50%" valign="bottom" watch="SelectedVisible0" ontriggerlua="self:SetVisible(not AtoB(param))">
			<panel name="game_selected_info_orders_pos" y="-0.5h" width="16.0h" height="10.1h" align="center" valign="bottom" color="invisible" noclick="1" >
				<!-- dice -->
				<panel name="game_info_dice" x="0" y="0" width="4.9h" height="4.9h" align="left" valign="top">
					<instance name="inventory_game_button"
						visible="0"
						main_watch="DiceInfo"
						main_ontriggerlua="self:SetVisible(AtoB(param1))"
						button_watch="DiceInfo"
						button_ontriggerlua="self:SetEnabled(AtoB(param2))"
						texture="/ui/common/dice.tga"
						hasCharges="true"
						charges_watch="DiceInfo"
						charges_ontriggerlua="self:SetText(param0)"
						onclicklua="Trigger('DicePrompt')"
						onmouseoverlua="GetWidget('dice_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('dice_tooltip', 'game'):SetVisible(0)"
						cover_watch="DiceInfo"
						cover_ontriggerlua="self:SetVisible(not AtoB(param2))"
						cover_onmouseoverlua="GetWidget('dice_tooltip', 'game'):SetVisible(1)"
						cover_onmouseoutlua="GetWidget('dice_tooltip', 'game'):SetVisible(0)"
						charges_panel_watch="DiceInfo"
						charges_panel_ontriggerlua="self:SetVisible(tonumber(param0) > 0)"
						cooldown_timer=""
						cooldown_percent=""
					/>
				</panel>
				<!-- taunt -->
				<panel name="game_info_taunt" x="0" y="0" width="4.9h" height="4.9h" align="center" valign="top">
					<instance name="inventory_button" slot="8" simple_tooltip_interface="game_shop_shared"/>
				</panel>
				<!-- fortification -->
				<panel name="game_info_fortification" x="0" y="0" width="4.9h" height="4.9h" align="center" valign="bottom">
					<instance name="inventory_button" slot="45" simple_tooltip_interface="game_shop_shared"/>
				</panel>
				<!-- Courier Status Icon -->
				<panel name="game_info_courier_status" x="0" y="0" width="4.9h" height="4.9h" align="right" valign="top">
					<instance name="inventory_game_icon"
						watch="CourierState"
						ontriggerlua="self:SetTexture('/ui/common/courier/courier_state_'..param..'.tga')"
						watch2="CourierControllable"
						ontrigger2lua="
							if (AtoB(param)) then
								self:SetRenderMode('normal')
							else
								self:SetRenderMode('grayscale')
							end
						"
						onmouseoverlua="GetWidget('courier_state_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('courier_state_tooltip', 'game'):SetVisible(0)"
					/>

					<!-- courier stats bubbles -->
					<!-- status (private, dead) -->
					<panel name="game_info_courier_private" x="0" y="0" width="33%" height="33%" align="right" valign="bottom">
						<panel color="black" noclick="1" />
						<label font="dyn_9" color="yellow" textalign="center" textvalign="center"
							onmouseoverlua="GetWidget('courier_status_tooltip', 'game'):SetVisible(1)"
							onmouseoutlua="GetWidget('courier_status_tooltip', 'game'):SetVisible(0)"
							watch1="CourierPrivate"
							ontrigger1="If(StringEquals(CourierState, 'Dead'),
											Split(
												SetText('D'),
												SetColor('red')
											),
											If(param,
												Split(
													SetText('P'),
													SetColor('yellow')
												),
												Split(
													SetText('S'),
													SetColor('white')
												)
											)
										);"
							watch2="CourierState"
							ontrigger2="If(StringEquals(param, 'Dead'),
											Split(
												SetText('D'),
												SetColor('red')
											),
											If(CourierPrivate,
												Split(
													SetText('P'),
													SetColor('yellow')
												),
												Split(
													SetText('S'),
													SetColor('white')
												)
											)
										);"
						/>
						<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="true"/>
					</panel>

					<!-- controller (player, color) -->
					<panel name="game_info_courier_controller" x="0" y="0" width="33%" height="33%" align="left" valign="bottom">
						<panel color="black" noclick="1" />
						<panel
							color="invisible"
							watch="CourierController"
							ontriggerlua="
								if (NotEmpty(param0)) then
									self:SetColor(param0)
								else
									self:SetColor('invisible')
								end
							"
							onmouseoverlua="GetWidget('courier_controller_tooltip', 'game'):SetVisible(1)"
							onmouseoutlua="GetWidget('courier_controller_tooltip', 'game'):SetVisible(0)"
						/>
						<!-- <image
							texture="$invis" noclick="1"
							watch="CourierController"
							ontriggerlua="
								if (NotEmpty(param2)) then
									self:SetTexture(GetEntityIconPath(param2))
								else
									self:SetTexture('$invis')
								end
							"
						/> -->
						<frame borderthickness="1" bordercolor="gray" color="invisible" noclick="true"/>
					</panel>
				</panel>

				<!-- Courier Button -->
				<panel name="game_info_courier_button" x="0" y="0" width="4.9h" height="4.9h" align="right" valign="bottom">
					<instance name="inventory_game_button"
						texture="/ui/common/courier/courier_action.tga"
						onclicklua="UseBestCourier()"
						onmouseoverlua="GetWidget('courier_action_tooltip', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('courier_action_tooltip', 'game'):SetVisible(0)"
						button_watch="CourierControllable"
						button_ontriggerlua="self:SetEnabled(AtoB(param))"
						cover_onmouseoverlua="GetWidget('courier_action_tooltip', 'game'):SetVisible(1)"
						cover_onmouseoutlua="GetWidget('courier_action_tooltip', 'game'):SetVisible(0)"
						cover_watch="CourierControllable"
						cover_ontriggerlua="self:SetVisible(not AtoB(param))"
					/>
				</panel>
			</panel>
			<!-- Framing -->
			<!-- OptiUI: Removed texture from framing of the move, taunt etc commands box -->
		</panel>


		<!-- Info - Units/Heroes -->
		<!-- UIScript -->
		<panel name="game_selected_info_unit" width="22.0h" height="13.5h" align="right" valign="bottom" group="selected_info" watch="SelectedVisible0 SelectedVisible1 SelectedType0" ontrigger="SetVisible(SelectedVisible0 and !SelectedVisible1 and !StringEquals(SelectedType0, 'building'));" color="invisible" noclick="1">

			<!-- <frame name="game_selected_info_unit_bg" texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 .9" noclick="true" > -->
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 .8" noclick="true" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor=".3 .3 .3 1" borderthickness=".6h" noclick="true"/>

			<!-- Icon -->
			<panel name="game_selected_info_unit_icon" height="4.9h" width="4.9h" align="right" >
				<image texture="/ui/legion/portrait_background.tga" />
				<image name="game_botright_portrait_icon_0"
					onmouseldownlua="Action('PortraitCenterInfo', 1.0)" onmouseluplua="Action('PortraitCenterInfo', 0.0)"
					onmouseoverlua="GetWidget('unit_tooltip_info0', 'game'):SetVisible(1)"   onmouseoutlua="GetWidget('unit_tooltip_info0', 'game'):SetVisible(0)"
					onhidelua="Action('PortraitCenterInfo', 0.0);"
				/>

				<!-- lifetime bar section-->
				<panel name="game_botright_life_bar_backer" visible="false" noclick="true" passivechildren="true">
					<piegraph texture="/ui/common/exp_ring.tga" start="90" end="360" square="1" color=".2 .2 .1 1" value="1" noclick="true"/>
					<piegraph name="game_botright_life_bar_ring" texture="/ui/common/exp_ring.tga" start="90" end="360" square="1" color="#e5df2f" value=".2" noclick="true"/>
					<label name="game_botright_life_bar_label" width="100%" height="100%" valign="center" textalign="center" textvalign="center" font="dyn_14" color="white" shadow="true" shadowoffset="2" />
				</panel>

				<!-- Level -->
				<panel name="game_botright_level_bg_0" height="35%" width="35%" valign="bottom" color="black"
					passivechildren="true"
					onmouseoverlua="GetWidget('experience_tooltip_info', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('experience_tooltip_info', 'game'):SetVisible(0)"
				>
					<!-- <image name="game_botright_level_img_0" x="-0.5h" y="-0.5h" width="5.0h" height="5.0h" texture="/ui/common/ability_toggle.tga" noclick="true" /> -->
					<label name="game_botright_level_label_0" width="100%" textalign="center" height="100%" textvalign="center" font="dyn_10" color="yellow" shadow="true" />
					<frame borderthickness="1" bordercolor=".3 .3 .3 1" color="invisible" noclick="true" />
				</panel>

				<!-- Item catcher -->
				<!-- UIScript -->
				<panel name="game_selected_info_unit_item_catcher"
					color="invisible"
					texture="/ui/info/drop.tga"
					watch="ItemCursorVisible"
					ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
					onmouseoverlua="self:SetColor('white');"
					onmouseoutlua="self:SetColor('invisible');"
					onclick="ItemPlaceSelected(0);"
					onrightclick="ItemPlaceSelected(0);"
				/>

				<frame borderthickness="1" bordercolor=".3 .3 .3 1" color="invisible" noclick="true" />
			</panel>

			<!-- OptiUI: Name/Health/Mana/Inventory/Cover -->
			<panel name="game_botright_info_unit_status_parent" x="0.7h" width="15.9h" align="left" color="invisible" noclick="true" >
				<panel float="bottom" padding="1" color="invisible" noclick="true" >

					<!-- Name -->
					<panel name="game_botright_name_label_0_parent" height="1.6h" noclick="true" >
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .7" noclick="true" />
						<frame texture="/ui/frames/roundframe.tga" bordercolor=".3 .3 .3 1" borderthickness=".6h" noclick="true"/>
						<label name="game_botright_name_label_0" x="-0.5h" textalign="right"  textvalign="top" color="white" font="dyn_9" shadow="true" shadowoffset="2" noclick="true" />
						<label name="game_botright_name_label_0B" x="0.5h" textalign="left" textvalign="top" color="white" font="dyn_9" shadow="true" shadowoffset="2" noclick="true" />
					</panel>

					<!-- Health -->
					<panel name="game_botright_health_bar_bg_0"
						height="1.5h"
						width="12.5h"
						align="right"
						color="invisible"
						onmouseoverlua="GetWidget('health_tooltip_info', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('health_tooltip_info', 'game'):SetVisible(0)"
						passivechildren="true"
					>
						<panel name="game_botright_health_bar_backer_0" color="0 1 0 1" noclick="1">
							<panel color="0 0 0 .9"/>
						</panel>
						<frame borderthickness="1" bordercolor=".3 .3 .3 1" color="invisible" noclick="true" />
						<panel name="game_botright_health_bar_0" color="0 1 0 1" noclick="1">
							<instance name="statusbar_overlay" bordercolor=".3 .3 .3 1" />
						</panel>
						<label name="game_botright_health_label_0" font="dyn_9" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="top" />
					</panel>

					<!-- Mana -->
					<panel name="game_botright_mana_bar_bg_0"
						height="1.5h"
						width="12.5h"
						align="right"
						color="invisible"
						onmouseoverlua="GetWidget('mana_tooltip_info', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('mana_tooltip_info', 'game'):SetVisible(0)"
						passivechildren="true"
					>
						<panel name="game_botright_mana_bar_backer_0" color="0 0 1 1" noclick="1">
							<panel color="0 0 0 .9"/>
						</panel>
						<frame borderthickness="1" bordercolor=".3 .3 .3 1" color="invisible" noclick="true" />
						<panel name="game_botright_mana_bar_0" color="0 .4 1 1">
							<instance name="statusbar_overlay" bordercolor=".3 .3 .3 1" />
						</panel>
						<label name="game_botright_mana_label_0" font="dyn_9" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="top" />
					</panel>
				</panel>

				<!-- Inventory -->
				<panel name="game_selected_info_unit_inventory_parent" y="-0.5h" width="12.0h" height="7.7h" valign="bottom" color="invisible" noclick="true" >
					<!-- <panel name="game_selected_info_unit_inventory" color="invisible" noclick="true"> -->
						<panel height="48%" width="48@" align="left" valign="top" color="invisible">
							<instance name="inventory_info" slot="48" bordercolor=".3 .3 .3 1" />
						</panel>
						<panel height="48%" width="48@" align="center" valign="top" color="invisible">
							<instance name="inventory_info" slot="49" bordercolor=".3 .3 .3 1" />
						</panel>
						<panel height="48%" width="48@" align="right" valign="top" color="invisible">
							<instance name="inventory_info" slot="50" bordercolor=".3 .3 .3 1" />
						</panel>
						<panel height="48%" width="48@" align="left" valign="bottom" color="invisible">
							<instance name="inventory_info" slot="51" bordercolor=".3 .3 .3 1" />
						</panel>
						<panel height="48%" width="48@" align="center" valign="bottom" color="invisible">
							<instance name="inventory_info" slot="52" bordercolor=".3 .3 .3 1" />
						</panel>
						<panel height="48%" width="48@" align="right" valign="bottom" color="invisible">
							<instance name="inventory_info" slot="53" bordercolor=".3 .3 .3 1" />
						</panel>
					<!-- </panel> -->

					<!-- Ward Slot -->
					<!-- <panel width="12.0h" height="7.7h" align="right" valign="bottom" color="invisible" noclick="1" > -->
						<panel name="game_selected_info_unit_inventory_ward" height="3.1h" width="3.1h" y="-8.1h" valign="bottom" noclick="1" >
							<image texture="/ui/legion/empty_pack.tga"/>
							<frame color="invisible" bordercolor=".3 .3 .3 1" borderthickness="1" noclick="1" />
							<instance name="inventory_info_ward" slot="63" bordercolor=".3 .3 .3 1" />
						</panel>
					<!-- </panel> -->

					<!-- Inventory Cover -->
					<panel name="game_selected_info_unit_inventory_cover" color="invisible" passivechildren="true"
						watch="SelectedHasInventory"
						ontriggerlua="self:SetVisible(not AtoB(param))"
					>
						<frame texture="/ui/frames/rounded_bg_white.tga" color=".1 .1 .1 .9" borderthickness="0" bordercolor="gray" noclick="true" />
					</panel>
				</panel>
			</panel>

			<!-- Selected Stats -->
			<panel name="game_selected_info_unit_stats" y="-0.5h" width="8.8h" height="7.7h" align="right" valign="bottom" color="invisible" float="bottom" padding="0.3h" noclick="true">
				<!-- Damage -->
				<panel height="1.7h" passivechildren="true"
					watch="SelectedDamage"
					ontriggerlua="self:SetVisible(tonumber(param1) ~= 0)"
					onmouseoverlua="GetWidget('attack_tooltip_info', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('attack_tooltip_info', 'game'):SetVisible(0)"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".5 0 0 .25" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor=".5 0 0 .25" />
					<image width="1.5h" height="1.5h" valign="center" texture="/ui/common/damage_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_9" color="white" shadow="1" textalign="left" textvalign="center" outline="1"
						watch="SelectedDamage"
						ontriggerlua="self:SetText(round(tonumber(param0) + tonumber(param2)) .. ' - ' .. round(tonumber(param1) + tonumber(param2)))"
					/>
				</panel>
				<!-- Movement Speed -->
				<panel height="1.7h" passivechildren="true"
					watch="SelectedMoveSpeed"
					ontriggerlua="self:SetVisible(tonumber(param1) ~= 0)"
					onmouseoverlua="GetWidget('movement_tooltip_info', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('movement_tooltip_info', 'game'):SetVisible(0)"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 .5 0 .25" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 .5 0 .25" />
					<image width="1.5h" height="1.5h" valign="center" texture="/ui/common/move_speed_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_9" color="white" shadow="1" textalign="left" textvalign="center" outline="1"
						watch="SelectedMoveSpeed"
						ontriggerlua="self:SetText(round(param1))"
					/>
				</panel>
				<!-- Armor -->
				<panel height="1.7h" passivechildren="true"
					onmouseoverlua="GetWidget('defense_tooltip_info', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('defense_tooltip_info', 'game'):SetVisible(0)"
					onload="
						CreateFloat('game_player_info_armor', 0);
						CreateFloat('game_player_info_magicarmor', 0);
					"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".5 0 0 .25" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor=".5 0 0 .25" />
					<image width="1.5h" height="1.5h" valign="center" texture="/ui/common/armor_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_9" color="white" shadow="1" textalign="left" textvalign="center" outline="1"
						watch="SelectedArmor"
						ontriggerlua="self:SetText(FtoA(param1, 1)..' ^777/^999 '..FtoA(GetCvarNumber('game_player_info_magicarmor'), 1)) Set('game_player_info_armor', param1)"
						watch1="SelectedMagicArmor"
						ontrigger1lua="self:SetText(FtoA(GetCvarNumber('game_player_info_armor'), 1)..' ^777/^999 '..FtoA(param1, 1)) Set('game_player_info_magicarmor', param1)"
					/>
				</panel>
				<!-- Attributes -->
				<panel height="1.7h" passivechildren="true"
					watch="SelectedHasAttributes" ontriggerlua="self:SetVisible(AtoB(param))"
					onmouseoverlua="GetWidget('attribute_tooltip_info', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('attribute_tooltip_info', 'game'):SetVisible(0)"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 .5 0 .25" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 .5 0 .25" />
					<image width="1.5h" height="1.5h" valign="center" texture="/ui/common/plus_icon.tga"/>
					<label x="15@" width="-100@" height="100%" align="right" font="dyn_9" color="white" shadow="1" textalign="left" textvalign="center" outline="1"
						watch="SelectedAttributes"
						ontriggerlua="self:SetText(round(param0)..' '..round(param1)..' '..round(param2))"
					/>
				</panel>
			</panel>

			<!-- Targetting Catcher -->
			<!-- UIScript -->
			<button
				color="invisible"
				watch="ToolTargetingEntity"
				ontrigger="SetVisible(param); RefreshCursor();"
				onclick="SelectUnit(SelectedIndex0);"
				interactive="false"
			/>
		</panel>


		<!-- Info - Buildings -->
		<!-- UIScript -->
		<panel name="game_selected_info_building" width="22.0h" height="11.5h" align="right" valign="bottom" visible="1" color="invisible" noclick="1" watch="SelectedVisible0 SelectedVisible1 SelectedType0" ontrigger="SetVisible(SelectedVisible0 and !SelectedVisible1 and StringEquals(SelectedType0, 'building'));">

			<!-- <frame name="game_selected_info_building_bg" texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 .9" noclick="true" > -->
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 .8" noclick="true" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor=".3 .3 .3 1" borderthickness=".6h" noclick="true"/>

			<!-- Icon -->
			<panel name="game_selected_info_building_icon" height="4.9h" width="4.9h" align="right" >
				<image name="game_botright_portrait_icon_1"
					onmouseldownlua="Action('PortraitCenterInfo', 1.0)"
					onmouseluplua="Action('PortraitCenterInfo', 0.0)"
					onmouseoverlua="GetWidget('unit_tooltip_info0', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('unit_tooltip_info0', 'game'):SetVisible(0)"
					onhidelua="Action('PortraitCenterInfo', 0.0)"
				/>
				
				<!-- Level -->
				<panel name="game_botright_level_bg_1" height="35%" width="35%" valign="bottom" color="black"
					passivechildren="true"
					onmouseoverlua="GetWidget('experience_tooltip_info', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('experience_tooltip_info', 'game'):SetVisible(0)"
				>
					<label name="game_botright_level_label_1" width="100%" textalign="center" height="100%" textvalign="center" font="dyn_10" color="yellow" shadow="true" />
					<frame borderthickness="1" bordercolor=".3 .3 .3 1" color="invisible" noclick="true" />
				</panel>

				<!-- Item catcher -->
				<!-- UIScript -->
				<panel name="game_selected_info_building_item_catcher"
					color="invisible"
					texture="/ui/info/drop.tga"
					watch="ItemCursorVisible"
					ontrigger="SetVisible(ItemCursorVisible); RefreshCursor();"
					onmouseoverlua="self:SetColor('white');"
					onmouseoutlua="self:SetColor('invisible');"
					onclick="ItemPlaceSelected(0);"
					onrightclick="ItemPlaceSelected(0);"
				/>

				<frame borderthickness="1" bordercolor=".3 .3 .3 1" color="invisible" noclick="true" />
			</panel>

			<!-- OptiUI: Name/Health/Mana/Inventory/Cover -->
			<panel name="game_botright_info_building_status_parent" x="0.7h" width="15.9h" color="invisible" noclick="true" >		
				<panel float="bottom" padding="1" color="invisible" noclick="true" >
					<!-- Name -->
					<panel name="game_botright_name_label_1_parent" height="1.6h" noclick="true">
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 0 0 .7" noclick="true" />
						<frame texture="/ui/frames/roundframe.tga" bordercolor=".3 .3 .3 1" borderthickness=".6h" noclick="true"/>
						<label name="game_botright_name_label_1" x="-0.5h" textalign="right" textvalign="top" color="white" font="dyn_9" shadow="true" shadowoffset="2" noclick="true" />
						<label name="game_botright_name_label_1B" x="0.5h" textalign="left" textvalign="top" color="white" font="dyn_9" shadow="true" shadowoffset="2" noclick="true" />
					</panel>

					<!-- Health -->
					<panel name="game_botright_health_bar_bg_1"
						height="1.5h"
						color="invisible"
						onmouseoverlua="GetWidget('health_tooltip_info', 'game'):SetVisible(1)"
						onmouseoutlua="GetWidget('health_tooltip_info', 'game'):SetVisible(0)"
						passivechildren="true"
					>
						<panel name="game_botright_health_bar_backer_1" color="0 1 0 1" noclick="1">
							<panel color="0 0 0 .9"/>
						</panel>
						<frame borderthickness="1" bordercolor=".3 .3 .3 1" color="invisible" noclick="true" />
						<panel name="game_botright_health_bar_1" color="0 1 0 1" noclick="1">
							<instance name="statusbar_overlay" bordercolor=".3 .3 .3 1" />
						</panel>
						<label name="game_botright_health_label_1" font="dyn_9" color="white" outline="1" width="100%" height="100%" textalign="center" textvalign="top" />
					</panel>
				</panel>

				<!-- Shared abilities -->
				<panel name="game_selected_info_building_shared_abilities" width="12.0h" height="6.0h" align="left" valign="bottom" color="invisible" noclick="true" >
					<panel name="game_selected_info_building_shared_abilities_pos" width="100%" align="center" color="invisible" padding="0" noclick="true" >
						<instance name="ability_frame_shared" align="left"   slot="45" bordercolor=".3 .3 .3 1" />
						<instance name="ability_frame_shared" align="center" slot="46" bordercolor=".3 .3 .3 1" />
						<instance name="ability_frame_shared" align="right"  slot="47" bordercolor=".3 .3 .3 1" />
					</panel>
				</panel>

			</panel>

			<!-- Selected Stats -->
			<panel name="game_selected_info_building_stats" y="-1.0h" width="8.8h" height="3.7h" align="right" valign="bottom" color="invisible" float="bottom" padding="0.3h" noclick="true" >
				<!-- Selected Damage -->
				<panel height="1.7h" passivechildren="true"
					watch="SelectedDamage"
					ontriggerlua="self:SetVisible(tonumber(param1) ~= 0)"
					onmouseoverlua="GetWidget('attack_tooltip_info', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('attack_tooltip_info', 'game'):SetVisible(0)"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".5 0 0 .25" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor=".5 0 0 .25" />
					<image width="1.5h" height="1.5h" valign="center" texture="/ui/common/damage_icon.tga"/>
					<label width="-1.7h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="center"
						watch="SelectedDamage"
						ontriggerlua="
							if (tonumber(param1) == 0) then
								self:SetText('')
							elseif (tonumber(param2) == 0) then
								self:SetText(round(param0)..' - '..round(param1))
							elseif (tonumber(param2) > 0) then
								self:SetText(round(param0)..' - '..round(param1)..' ^g+'..round(param2))
							else
								self:SetText(round(param0)..' - '..round(param1)..' ^r'..round(param2))
							end
						"
					/>
				</panel>
				<!-- Selected Armor -->
				<panel height="1.7h" passivechildren="true"
					onmouseoverlua="GetWidget('defense_tooltip_info', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('defense_tooltip_info', 'game'):SetVisible(0)"
				>
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color="0 .5 0 .25" />
					<frame texture="/ui/frames/roundframe.tga" borderthickness=".6h" bordercolor="0 .5 0 .25" />
					<image width="1.5h" height="1.5h" valign="center" texture="/ui/common/armor_icon.tga"/>
					<label width="-1.7h" height="100%" align="right" font="dyn_9" color="white" outline="1" textalign="left" textvalign="center"
						watch="SelectedArmor"
						ontriggerlua="
							local diff = (tonumber(param1) - tonumber(param0))
							if (diff == 0.0) then
								self:SetText(FtoA(param0, 2))
							elseif (diff > 0) then
								self:SetText(FtoA(param0, 2)..' ^g+'..FtoA(diff, 2))
							else
								self:SetText(FtoA(param0, 2)..' ^r'..FtoA(diff, 2))
							end
						"
					/>
				</panel>
			</panel>
		</panel>

		<!-- Multiple Selected -->
		<!-- UIScript -->
		<panel name="game_selected_info_mult" watch="SelectedVisible0 SelectedVisible1" width="22.0h" height="13.5h" align="right" valign="bottom" ontrigger="SetVisible(SelectedVisible0 and SelectedVisible1);" noclick="1">

			<!-- Framing -->
			<!-- <frame name="game_selected_info_mult_backer" texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 .9" noclick="true" > -->
			<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness=".6h" color=".1 .1 .1 .8" noclick="true" />
			<frame texture="/ui/frames/roundframe.tga" bordercolor=".3 .3 .3 1" borderthickness=".6h" noclick="true"/>

			<panel name="game_selected_info_mult_units" x="3" y="3" width="-6" height="-6" color="invisible" visible="1" >
				<panel height="4.2h" valign="top" float="right" padding=".3h">
					<instance name="multi_select_unit" index="0"/>
					<instance name="multi_select_unit" index="1"/>
					<instance name="multi_select_unit" index="2"/>
					<instance name="multi_select_unit" index="3"/>
					<instance name="multi_select_unit" index="4"/>
				</panel>

				<panel height="4.2h" valign="center" float="right" padding=".3h">
					<instance name="multi_select_unit" index="5"/>
					<instance name="multi_select_unit" index="6"/>
					<instance name="multi_select_unit" index="7"/>
					<instance name="multi_select_unit" index="8"/>
					<instance name="multi_select_unit" index="9"/>
				</panel>

				<panel height="4.2h" valign="bottom" float="right" padding=".3h">
					<instance name="multi_select_unit" index="10"/>
					<instance name="multi_select_unit" index="11"/>
					<instance name="multi_select_unit" index="12"/>
					<instance name="multi_select_unit" index="13"/>
					<instance name="multi_select_unit" index="14"/>
				</panel>
			</panel>
		</panel>

	</panel>
	<!-- END BOTTOM RIGHT -->

	<!-- OptiUI: MOVABLE TEAM ICONS -->
	<!-- Team Icons -->
	<!-- Top left position -->
	<panel name="game_ally_display_holder" x="0.0h" y="6.1h" width="5.8h" height="26.6h" color="invisible" noclick="true" reverse="true" direction="1"
		onloadlua="
			GameUIManager.RegisterFeatureAndSection(self, 'AllyInfo',
			function(map)
				return (map ~= 'prophets')
			end,
			function()
				local displayAllies = GetCvarBool('cg_displayAllies')
				GetWidget('game_ally_display_holder', 'game'):SetVisible(displayAllies)
				GetWidget('game_top_left_ally_expand_btn', 'game'):SetVisible(not displayAllies)
			end)
		"
	>
		<!-- OptiUI: Instances are generated inside the lua script -->
	</panel>
	<!-- OptiUI: END MOVABLE TEAM ICONS -->

	<!-- OptiUI: MOVABLE STASH -->
	<!-- Stash -->
	<instance name="stash"/>
	<!-- OptiUI: END MOVABLE STASH -->

	<!-- Animated preview for various images (typically grows on hover) -->
	<!-- UIScript -->
	<panel noclick="true" color="invisible" visible="false"
		width="1h" height="1h"
		watch="GameImagePreviewInit"
		ontriggerlua="
			self:SetWidth(param0)
			self:SetHeight(param1)
			self:UICmd('SetAbsoluteX('..param2..')')
			self:UICmd('SetAbsoluteY('..param3..')')
		"
		watch1="GameImagePreviewVis"
		ontrigger1lua="
			if (AtoB(param0)) then
				self:FadeIn(200)
			else
				self:FadeOut(200)
			end
		"
	>
		<webimage noclick="true" align="center" valign="center"
			watch="GameImagePreviewInit"
			ontriggerlua="
				if (AtoB(param4)) then
					self:SetTextureURL(param5)
				else
					self:SetTexture(param5)
				end
			"
			watch1="GameImagePreviewVis"
			ontrigger1lua="
				if ((not self:IsVisible()) or (AtoB(param0) and self:IsVisible())) then
					self:SetWidth('100%')
					self:SetHeight('100%')
				end

				if (AtoB(param0)) then
					self:ScaleWidth(param1, 200)
					self:ScaleHeight(param1, 200)
				elseif (self:IsVisible()) then
					self:ScaleWidth('100%', 200)
					self:ScaleHeight('100%', 200)
				end
			"
		/>
	</panel>

	<!-- Tooltips -->
	<instance name="command_tooltip" slot="1" header="game_command_tooltip_name_move" description="game_command_tooltip_desc_move" texture="/shared/icons/move.tga" command="OrderMove" />
	<instance name="command_tooltip" slot="2" header="game_command_tooltip_name_attack" description="game_command_tooltip_desc_attack" texture="/shared/icons/attack.tga" command="OrderAttack" />
	<instance name="command_tooltip" slot="3" header="game_command_tooltip_name_stop" description="game_command_tooltip_desc_stop" texture="/shared/icons/stop.tga" command="OrderStop" />
	<instance name="command_tooltip" slot="4" header="game_command_tooltip_name_hold" description="game_command_tooltip_desc_hold" texture="/shared/icons/hold.tga" command="OrderHold" />
	<instance name="command_tooltip" slot="5" header="game_command_tooltip_name_patrol" description="game_command_tooltip_desc_patrol" />
	<instance name="command_tooltip" slot="6" header="game_command_tooltip_name_taunt" description="game_command_tooltip_desc_taunt" />

	<panel
		name="tooltip_placement"
		x="-1.0h"
		y="-21h"
		align="right"
		valign="bottom"
		width="0"
		height="0"
		noclick="true"
		passivechildren="true"
	>

		<instance name="ability_tooltip" id="ability_tooltip0" slot="0" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip1" slot="1" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip2" slot="2" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip3" slot="3" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip4" slot="4" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip5" slot="5" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip6" slot="6" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip7" slot="7" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip8" slot="8" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip9" slot="9" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip10" slot="10" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip11" slot="11" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip12" slot="12" help="true" />

		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip0" slot="0" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip1" slot="1" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip2" slot="2" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip3" slot="3" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip4" slot="4" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip45" slot="45" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip48" slot="48" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip49" slot="49" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip50" slot="50" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip51" slot="51" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip52" slot="52" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip53" slot="53" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip63" slot="63" help="true" />

		<instance name="ability_tooltip" id="stash_tooltip0" slot="64" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip1" slot="65" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip2" slot="66" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip3" slot="67" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip4" slot="68" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip5" slot="69" help="false" />

		<instance name="ability_tooltip" id="state_tooltip13" slot="13" help="false" />
		<instance name="ability_tooltip" id="state_tooltip14" slot="14" help="false" />
		<instance name="ability_tooltip" id="state_tooltip15" slot="15" help="false" />
		<instance name="ability_tooltip" id="state_tooltip16" slot="16" help="false" />
		<instance name="ability_tooltip" id="state_tooltip17" slot="17" help="false" />
		<instance name="ability_tooltip" id="state_tooltip18" slot="18" help="false" />
		<instance name="ability_tooltip" id="state_tooltip19" slot="19" help="false" />
		<instance name="ability_tooltip" id="state_tooltip20" slot="20" help="false" />
		<instance name="ability_tooltip" id="state_tooltip21" slot="21" help="false" />
		<instance name="ability_tooltip" id="state_tooltip22" slot="22" help="false" />
		<instance name="ability_tooltip" id="state_tooltip23" slot="23" help="false" />

		<instance name="ability_tooltip" id="ability_tooltip_shared45" slot="45" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_shared46" slot="46" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_shared47" slot="47" help="true" />
		
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared45" slot="45" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared46" slot="46" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared47" slot="47" help="true" />

		<instance name="attack_tooltip" />
		<instance name="defense_tooltip" />
		<instance name="attribute_tooltip" />
		<instance name="attribute2_tooltip" />
		<instance name="health_tooltip" />
		<instance name="mana_tooltip" />
		<instance name="experience_tooltip" />
		<instance name="movement_tooltip" />
		<instance name="unit_tooltip" />

		<instance name="attack_tooltip_info" />
		<instance name="defense_tooltip_info" />
		<instance name="attribute_tooltip_info" />
		<instance name="health_tooltip_info" />
		<instance name="mana_tooltip_info" />
		<instance name="experience_tooltip_info" />
		<instance name="movement_tooltip_info" />

		<instance name="unit_tooltip_info" slot="0" />
		<instance name="unit_tooltip_info" slot="1" />
		<instance name="unit_tooltip_info" slot="2" />
		<instance name="unit_tooltip_info" slot="3" />
		<instance name="unit_tooltip_info" slot="4" />
		<instance name="unit_tooltip_info" slot="5" />
		<instance name="unit_tooltip_info" slot="6" />
		<instance name="unit_tooltip_info" slot="7" />
		<instance name="unit_tooltip_info" slot="8" />
		<instance name="unit_tooltip_info" slot="9" />
		<instance name="unit_tooltip_info" slot="10" />
		<instance name="unit_tooltip_info" slot="11" />
		<instance name="unit_tooltip_info" slot="12" />
		<instance name="unit_tooltip_info" slot="13" />
		<instance name="unit_tooltip_info" slot="14" />

		<instance name="unit_tooltip_hero" />
		<instance name="health_tooltip_hero" />
		<instance name="mana_tooltip_hero" />
		<instance name="experience_tooltip_hero" />

		<instance name="ability_info_tooltip" id="inventory_info_tooltip48" slot="48" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip49" slot="49" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip50" slot="50" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip51" slot="51" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip52" slot="52" help="true" />
		<instance name="ability_info_tooltip" id="inventory_info_tooltip53" slot="53" help="true" />

		<instance name="ability_info_tooltip" id="inventory_info_tooltip63" slot="63" help="true" />

		<instance name="ability_info_tooltip" id="state_info_tooltip13" slot="13" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip14" slot="14" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip15" slot="15" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip16" slot="16" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip17" slot="17" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip18" slot="18" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip19" slot="19" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip20" slot="20" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip21" slot="21" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip22" slot="22" help="false" />
		<instance name="ability_info_tooltip" id="state_info_tooltip23" slot="23" help="false" />

		<instance name="ability_hero_tooltip" id="hero_state_tooltip13" slot="13" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip14" slot="14" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip15" slot="15" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip16" slot="16" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip17" slot="17" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip18" slot="18" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip19" slot="19" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip20" slot="20" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip21" slot="21" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip22" slot="22" help="false" />
		<instance name="ability_hero_tooltip" id="hero_state_tooltip23" slot="23" help="false" />

		<instance name="hero_tooltip" id="ally_tooltip0" type="Ally" slot="0" help="false" />
		<instance name="hero_tooltip" id="ally_tooltip1" type="Ally" slot="1" help="false" />
		<instance name="hero_tooltip" id="ally_tooltip2" type="Ally" slot="2" help="false" />
		<instance name="hero_tooltip" id="ally_tooltip3" type="Ally" slot="3" help="false" />

		<instance name="ability_tooltip" id="ability_tooltip_simple48" slot="48" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple49" slot="49" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple50" slot="50" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple51" slot="51" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple52" slot="52" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_simple53" slot="53" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip_simple63" slot="63" help="true" />

		<instance name="ability_tooltip" id="stash_tooltip_simple0" slot="64" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple1" slot="65" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple2" slot="66" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple3" slot="67" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple4" slot="68" help="false" />
		<instance name="ability_tooltip" id="stash_tooltip_simple5" slot="69" help="false" />

		<instance name="ability_tooltip" id="state_tooltip_simple9" slot="9" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple10" slot="10" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple11" slot="11" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple12" slot="12" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple13" slot="13" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple14" slot="14" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple15" slot="15" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple16" slot="16" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple17" slot="17" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple18" slot="18" help="false" />
		<instance name="ability_tooltip" id="state_tooltip_simple19" slot="19" help="false" />

		<instance name="ability_tooltip" id="ability_tooltip_shared_simple45" slot="45" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_shared_simple46" slot="46" help="true" />
		<instance name="ability_tooltip" id="ability_tooltip_shared_simple47" slot="47" help="true" />

		<instance name="ability_tooltip" id="ability_tooltip_shared_simple63" slot="63" help="true" />
		
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared_simple45" slot="45" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared_simple46" slot="46" help="true" />
		<instance name="ability_levelup_tooltip" id="ability_levelup_tooltip_shared_simple47" slot="47" help="true" />

		<instance name="courier_state_tooltip" />
		<instance name="courier_status_tooltip" />
		<instance name="courier_controller_tooltip" />
		<instance name="courier_action_tooltip" />

		<instance name="dice_tooltip" />
	</panel>

	<childinterface file="game_shop_shared.interface" />

	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_menu" title="game_button_menu" label="game_menu_menu_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_vote" title="game_menu_vote" label="game_menu_vote_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_chat" title="game_menu_chat" label="game_menu_chat_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_options" title="general_options" label="game_menu_options_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_disconnect" title="general_disconnect" label="game_menu_disconnect_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_quit" title="main_button_quit" label="game_menu_quit_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_kick" title="game_menu_kick_afk" label="game_menu_kick_afk_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_spec" title="game_menu_spec" label="game_menu_spec_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_mentor" title="game_menu_mentor" label="game_menu_mentor_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_pause" title="game_menu_pause_button" label="game_menu_pause_tip" />

	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_sharing" title="game_menu_sharing_button" label="game_menu_sharing_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_nohelp" title="game_menu_nohelp_button" label="game_menu_nohelp_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_voice" title="game_menu_voice_button" label="game_menu_voice_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_voice_spec" title="game_menu_voice_button" label="game_menu_voice_tip_spec" />

	<instance name="generic_tooltip_floater" width="18h" x="22h" y="-1.8h" align="right" tip_id="game_menu_tip_RAP" title="game_menu_report_a_player" label="game_menu_report_a_player_tip" />

	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_nopauseleft" title="game_menu_nopauseleft" label="game_menu_nopauseleft_tooltip" />

	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_unpause" title="game_menu_unpause_button" label="game_menu_unpause_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_remake" title="game_menu_remake_button" label="game_menu_remake_tip" />
	<instance name="generic_tooltip_floater" width="18h" x="0" y="-1.8h" align="right" tip_id="game_menu_tip_concede" title="game_menu_concede_button" label="game_menu_concede_tip" />

	<instance name="simple_tooltip_floater" tip_id="alt_courier_select_tip" align="left" valign="bottom" width="13.0h" x="-6.5h" y="16" label="game_alt_couriers"  />
	<instance name="simple_tooltip_nowrap" tip_id="alt_courier_lock_tip" align="center" valign="bottom" y="20" label="game_alt_couriers_lock"  />
	<instance name="simple_tooltip_nowrap" tip_id="alt_courier_unlock_tip" align="center" valign="bottom" y="20" label="game_alt_couriers_unlock"  />

	<instance name="team_colors_tooltip" />
	<instance name="teamshare_tooltip" />
	<instance name="score_tooltips" />

	<!-- Menu Tootlips -->
	<!-- Tooltip -->
	<floater name="menu_tooltip" visible="false" grow="true" color="invisible" align="right" valign="top" x="-0.5h" y="-0.5h">
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" align="left" valign="top" noclick="1"/>
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" noclick="1"/>
		<label
			y="0.8h" x="0.8h"
			name="tooltip_label"
			textalign="left" textvalign="top"
			fitx="true" fity="true"
			fitxpadding="0.8h" fitypadding="0.8h"
			color="white" font="dyn_10"
			watch="GameMenuTooltipText"
			ontriggerlua="self:SetText(param)"
		/>
	</floater>


	<!-- Stash Tooltips -->
	<floater
		name="stash_tooltip"
		x="-0.8h" y="-0.5h"
		width="30.0h"
		align="right"
		valign="bottom"
		color="invisible"
		visible="false"
		passivechildren="true"
		grow="true"
	>
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" />
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" />
			<label
				y="0.6h"
				width="-1.6h"
				textvalign="top"
				textalign="left"
				align="center"
				font="dyn_10"
				noclick="1"
				color="white"
				shadow="1"
				wrap="1"
				fity="true"
				fitypadding="2.5h"
				content="game_label_stash_tool_tip"
			/>
	</floater>

	<floater
		name="stash_deconstruct_tooltip"
		x="-0.8h" y="-0.5h"
		width="24.0h"
		align="right"
		valign="bottom"
		color="invisible"
		visible="false"
		passivechildren="true"
		grow="true"
	>
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" />
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" />
			<label
				y="0.6h"
				width="-1.6h"
				textvalign="top"
				textalign="left"
				align="center"
				font="dyn_10"
				noclick="1"
				color="white"
				shadow="1"
				wrap="1"
				fity="true"
				fitypadding="0.6h"
				content="game_label_stash_deconstruct_tool_tip"
			/>
	</floater>

	<effectpanel
		name="effect_panel"
		camerawidth="100a"
		cameraheight="100"
		noclick="true"
	/>

	<instance name="vote_panel" align="center"/>

	<!-- Test ++ -->
	<!-- UIScript -->
	<panel name="testpp_mainButton" x="28h" height="2h" width="8h" noclick="true">
		<instance name="button_game" label="Test++" font="dyn_9"
			onloadlua="
				SetSave('testpp_ToggleExtraWin', '0', 'string', true)
				SetSave('testpp_ToggleCameraWin', '0', 'string', true)
				SetSave('testpp_ToggleSpawnerWin', '0', 'string', true)
				SetSave('testpp_ToggleItemWin', '0', 'string', true)
				SetSave('testpp_ToggleHelpWin', '0', 'string', true)
				SetSave('testpp_mod_version', '1.45', 'string')
			"
			onload="
				CreateBool('is_dev_game', Dev);
				SetVisible(Dev);
			"
			watch="Dev EventEnterGame GamePhase" ontrigger="
				Set('is_dev_game', Dev);
				SetVisible(Dev and (!ui_isBotMatch or releaseStage_test));
				If(ui_isBotMatch, Set('g_disableFogOfWar', false));
				If(ui_isBotMatch, Set('testpp_autoRefresh', false));
				if((!Dev or (ui_isBotMatch and !releaseStage_test)) and WidgetExists('testpp_Win_Main'),
					Split(
						HideWidget('testpp_Win_Main'),
						HideWidget('testpp_Win_Extra'),
						HideWidget('testpp_Win_Camera'),
						HideWidget('testpp_Win_Spawner'),
						HideWidget('testpp_Win_Items'),
						HideWidget('testpp_Win_Help')
					)
				);
			"
			onclick="
				##Cmd('LoadChildInterface /ui/testpp/game_dev.interface');##
				SleepWidget(50, '
					if(testpp_ButtonToggleWindows,
						Cmd(\'Trigger testpp_ToggleWindows\'),
						If(IsVisibleExt(\'game_dev\', \'testpp_Win_Main\'), Cmd(\'HideWidget testpp_Win_Main\'), Cmd(\'ShowWidget testpp_Win_Main\'))
					);
					## Cmd(\'Trigger movf_InitRetrieveAll\'); ##
					## SleepWidget(500, \'Cmd(\\\'Trigger movf_InitUpdateAll\\\');\'); ##
				');
				SetOnClick('
					if(testpp_ButtonToggleWindows,
						Cmd(\'Trigger testpp_ToggleWindows\'),
						If(IsVisibleExt(\'game_dev\', \'testpp_Win_Main\'), Cmd(\'HideWidget testpp_Win_Main\'), Cmd(\'ShowWidget testpp_Win_Main\'))
					);
				');
			"
		/>
	</panel>


	<style name="friends_border" bordercolor=".4 .4 .4 1" />
	<style name="clans_border" bordercolor=".4 .4 .4 1" />
	<style name="tourney_border" bordercolor=".4 .4 .4 1" />
	<style name="invite_border" bordercolor=".4 .4 .4 1" />
	<style name="patch_border" bordercolor=".4 .4 .4 1" />

	<style name="friends_dependent" color=".8 .8 .8 1" />
	<style name="clans_dependent" color=".8 .8 .8 1" />
	<style name="tourney_dependent" color=".8 .8 .8 1" />
	<style name="invite_dependent" color=".8 .8 .8 1" />
	<style name="patch_dependent" color=".8 .8 .8 1" />

	<style name="friends_situation_bgcolor" color=".4 .4 .4 1" />
	<style name="clans_situation_bgcolor" color=".4 .4 .4 1" />
	<style name="tourney_situation_bgcolor" color=".4 .4 .4 1" />
	<style name="invite_situation_bgcolor" color=".4 .4 .4 1" />
	<style name="patch_situation_bgcolor" color=".4 .4 .4 1" />

	<template name="sp_notification_history_close_btn_template">
		<!-- Remove From History List  -->
		<panel x="{x=0}" y="{y=0.1h}" width="1.5h" height="1.5h" valign="{valign=top}" align="{align=right}" color="invisible" visible="{visible=1}">
			<button
				name="sp_notification_history_template_{index}_button_3"
				color="invisible"
				onclicklua="PlaySound('/shared/sounds/ui/ccpanel/notification_close.wav') HoN_Notifications.NotificationButtonClicked(3, {index}, 'history')"
				onmouseover="Set({var=sp_notification_history_template_?_mouseover}, true);"
				onmouseout="Set({var=sp_notification_history_template_?_mouseover}, false); Call('{call}', 'DoEvent(1)');"
			>
				<widgetstate statename="up">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.3h" color="{up_color}" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="{framecolor=0 0 0 1}" borderthickness="0.3h" blockinput="false" noclick="true"/>
					<image width="1.3h" height="1.3h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/fe2/elements/closex.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="over">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.3h" color="{over_color}" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="{framecolor=0 0 0 1}" borderthickness="0.3h" blockinput="false" noclick="true"/>
					<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/fe2/elements/closex.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="down" x="1" y="1">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.3h" color="{dn_color}" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="{framecolor=0 0 0 1}" borderthickness="0.3h" blockinput="false" noclick="true"/>
					<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/fe2/elements/closex.tga" noclick="true" />
				</widgetstate>
			</button>
		</panel>
	</template>

	<template name="sp_notification_history_expand_btn_template">
		<!-- Notification History Maximize -->
		<panel name="sp_notification_history_expand_btn_{index}" x="{x=0}" y="{y=0.1h}" width="1.5h" height="1.5h" valign="{valign=top}" align="{align=left}" color="invisible" visible="{visible=1}" passivechildren="1" noclick="1" >
			<button noclick="1" color="invisible" >
				<widgetstate statename="up">
					<!--
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.3h" color="{up_color}" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="{framecolor=0 0 0 1}" borderthickness="0.3h" blockinput="false" noclick="true"/>
					-->
					<image width="1.3h" height="1.3h" align="center" valign="center" color=".75 .75 .75 1" rotation="0" texture="/ui/fe2/elements/notification_expand.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="over">
					<!--
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.3h" color="{over_color}" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="{framecolor=0 0 0 1}" borderthickness="0.3h" blockinput="false" noclick="true"/>
					-->
					<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" rotation="0" texture="/ui/fe2/elements/notification_expand.tga" noclick="true" />
				</widgetstate>
				<widgetstate statename="down" x="1" y="1">
					<!--
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.3h" color="{dn_color}" blockinput="false" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" color="{framecolor=0 0 0 1}" borderthickness="0.3h" blockinput="false" noclick="true"/>
					-->
					<image width="1.3h" height="1.3h" align="center" valign="center" color=".1 1 1 1" rotation="0" texture="/ui/fe2/elements/notification_expand.tga" noclick="true" />
				</widgetstate>
			</button>
		</panel>
	</template>

	<template name="sp_notification_toast_template">
		<panel name="sp_notification_sleeper_{index}" noclick="1" color="invisible"/>
		<panel name="sp_notification_toast_template_{index}" group="sp_notification_toast_templates" width="25h" height="6.5h" sticky="1" stickytoinvis="0" visible="0" noclick="0" align="right" valign="top"
			oninstantiatelua="Set('sp_notification_toast_template_{index}_mouseover', false, 'bool');"
			onrightclicklua="HoN_Notifications.NotificationButtonClicked(3, {index}, 'toast')"
			onmouseoverlua=""
			onmouseover=""
			onmouseout="
				Set(sp_notification_toast_template_{index}_mouseover, false);
				DoEvent(1);
			"
			onevent1lua="GetWidget('sp_notification_sleeper_{index}', 'game'):Sleep(1, function() GetWidget('sp_notification_toast_template_{index}'):DoEvent() end)"
			onevent="
				If(!sp_notification_toast_template_{index}_mouseover,
					Split(
						Call('sp_notification_toast_template_{index}_buttons', 'FadeOut(100)'),
						Call('sp_notification_toast_template_{index}_game_info', 'FadeOut(100)')
					)
				);
			"
			oneventlua="
				if (not GetCvarBool('sp_notification_toast_template_{index}_mouseover')) then
					HoN_Notifications.MouseoverToastNotification(false, {index})
					if (not (HoN_Notifications.toastWidgetTable[{index}].isClosing or
						HoN_Notifications.toastWidgetTable[{index}].isOpening)) then

						self:ScaleHeight('6.5h', 100)
						GetWidget('sp_notification_sleeper_{index}', 'game'):Sleep(101, function() HoN_Notifications.toastWidgetTable[{index}].isOpen = false end)
					end
				end
			"
		>
			<frame texture="/ui/frames/rounded_bg_blue.tga" borderthickness="0.6h" color=".6 .6 .6 .6" blockinput="0" noclick="1" visible="1" />
			<frame texture="/ui/frames/roundframe.tga" color=".2 .2 .2 1" borderthickness="0.6h" blockinput="false" noclick="1" />

			<panel y="0.3h" x="0.3h" height="5.9h" width="5.9h" noclick="1">
				<image name="sp_notification_toast_template_{index}_icon" texture="{icon=/ui/fe2/store/icons/account_icons/default.tga}" noclick="1"  />
			</panel>

			<panel x="6.0h" height="5.9h" width="-6.0h" noclick="1" >
				<panel height="2.5h" x="5%" width="-5%" noclick="1" >
					<label name="sp_notification_toast_template_{index}_label_1" align="left" height="100%" width="100%" textalign="left" textvalign="center" font="dyn_11" color="{namecolor=white}" shadow="true" content="" noclick="1" visible="1" />
				</panel>
				<panel height="-3.5h" y="2.0h" x="5%" width="-5%" noclick="1" >
					<label name="sp_notification_toast_template_{index}_label_2" align="left" height="100%" width="100%" textalign="left" textvalign="top" font="dyn_9" color="1 1 1 1" shadow="true" content="" noclick="1" visible="1" wrap="1" />
				</panel>
				<panel height="1.1h" valign="bottom"  x="5%" width="-5%" noclick="1" >
					<label name="sp_notification_toast_template_{index}_label_3" align="left" height="100%" width="100%" textalign="left" textvalign="center" font="dyn_8" color="0.7 0.7 0.7 1" shadow="true" content="" noclick="1" visible="1" />
				</panel>
			</panel>

			<panel name="sp_notification_toast_template_{index}_game_info" visible="0" y="0.3h" height="8.9h" width="-2" align="center" noclick="1" color="0 0 0 0.93" float="bottom" padding="0.2h"
			>
				<panel x="0" y="0" height="1.7h" noclick="1" sticky="1" stickytoinvis="0" >
					<label name="sp_notification_toast_template_{index}_label_4" align="left" height="100%" width="100%" textalign="center" textvalign="center" font="dyn_11" color="#ffb300" shadow="true" content="" noclick="1" visible="1" />
				</panel>

				<panel height="1.8h" align="center" noclick="1" float="right" padding="0.5h" sticky="1" stickytoinvis="0" >
					<label name="sp_notification_toast_template_{index}_label_5" align="left" height="100%" width="100%" textalign="center" textvalign="top" font="dyn_9" color="1 1 1 1" shadow="true" content="" noclick="1" visible="1" wrap="1" />
				</panel>

				<panel grow="1" regrow="1" growinvis="0" align="center" noclick="1" float="right" padding="0.2h" sticky="0" stickytoinvis="0" >
					<image name="sp_notification_toast_template_{index}_icon_1" visible="1" texture="$invis" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_2" visible="1" texture="$invis" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_3" visible="{isVerifiedOnly=1}" texture="/ui/icons/verified.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />

					<image name="sp_notification_toast_template_{index}_icon_4" visible="{isCasualMode=1}" texture="/ui/icons/casual.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_5" visible="{isHardcore=1}" texture="/ui/icons/hardcore.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_6" visible="{isGated=1}" texture="/ui/icons/gated.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_7" visible="{isAdvOptions=1}" texture="/ui/icons/more.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
				</panel>
				<panel grow="1" regrow="1" growinvis="0" align="center" noclick="1" float="right" padding="0.2h" sticky="1" stickytoinvis="0" >
					<image name="sp_notification_toast_template_{index}_icon_8"  visible="{isAutoBalanced=1}" texture="/ui/icons/autobalance.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_9"  visible="0" oninstantiate="SetVisible({statsLevel=0} == 1);" texture="/ui/icons/official.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_10" visible="0" oninstantiate="SetVisible({statsLevel=0} == 2);" texture="/ui/icons/official_2.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_11" visible="{isNoLeaver=1}" texture="/ui/icons/noleaver.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_12" visible="{isPrivate=1}" texture="/ui/icons/private.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_13" visible="{isDevHeroes=1}" texture="/ui/icons/devheroes.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
					<image name="sp_notification_toast_template_{index}_icon_14" visible="{isBots=1}" texture="/ui/icons/botmatch.tga" align="left" sticky="1" stickytoinvis="0" height="2.4h" width="2.4h" noclick="0" />
				</panel>
			</panel>

			<panel name="sp_notification_toast_template_{index}_buttons" visible="0" y="-0.3h" height="2.3h" width="100%" valign="bottom" align="center" noclick="1" sticky="true" stickytoinvis="false"
				onshow="Call('sp_notification_history_expand_btn_toast_{index}', 'SetVisible(0);');"
				onhide="Call('sp_notification_history_expand_btn_toast_{index}', 'SetVisible(1);');"
			>
				<instance name="button2"
					button_name="sp_notification_toast_template_{index}_button_1"
					x="-0.3h"
					width="47%" height="2.2h"
					align="right" valign="bottom"
					borderthickness="0.5h"
					label="general_ignore"
					onclicklua=""
					onmouseoverlua="HoN_Notifications.MouseoverToastNotification(true, {index})"
					onmouseover="Set(sp_notification_toast_template_{index}_mouseover, true);"
					onmouseout="Set(sp_notification_toast_template_{index}_mouseover, false); Call('sp_notification_toast_template_{index}', 'DoEvent(1)');"
					labelgroup="sp_notification_toast_template_{index}_buttons_1"
				/>
				<instance name="button2"
					button_name="sp_notification_toast_template_{index}_button_2"
					x="0.3h"
					width="47%" height="2.2h"
					align="left" valign="bottom"
					borderthickness="0.5h"
					label="general_approve"
					onclicklua=""
					onmouseoverlua="HoN_Notifications.MouseoverToastNotification(true, {index})"
					onmouseover="Set(sp_notification_toast_template_{index}_mouseover, true);"
					onmouseout="Set(sp_notification_toast_template_{index}_mouseover, false); Call('sp_notification_toast_template_{index}', 'DoEvent(1)');"
					labelgroup="sp_notification_toast_template_{index}_buttons_2"
				/>

			</panel>

			<instance name="sp_notification_history_close_btn_template" call="sp_notification_toast_template_{index}" var="sp_notification_toast_template_{index}_mouseover" visible="1" x="-0.3h" y="0.3h" align="right" valign="top" index="toast_{index}" framecolor=".7 .7 .7 1" up_color=".3 .3 .3 1" over_color=".5 .5 .5 1" dn_color=".4 .4 .4 1" />
			<instance name="sp_notification_history_expand_btn_template" call="sp_notification_toast_template_{index}" var="sp_notification_toast_template_{index}_mouseover" visible="0" x="0.2h" y="0.2h" align="left" valign="top" index="toast_{index}" framecolor=".7 .7 .7 1" up_color=".3 .3 .3 1" over_color=".5 .5 .5 1" dn_color=".4 .4 .4 1" />

		</panel>
	</template>

	<panel name="notification_toast_game" y="2.5h" x="-0.5h" width="25.0h" noclick="1" visible="true" align="right" padding="0.4h" color="invisible"
	>
			<instance name="sp_notification_toast_template" index="4" label_1="1" label_2="2" label_3="3" label_4="4" label_5="5" hasExpandBtns="1" hasHoverInfo="1" icon="/ui/fe2/store/icons/account_icons/default.tga" namecolor="red" scaleheight="11.9h" />

			<instance name="sp_notification_toast_template" index="5" label_1="1" label_2="2" label_3="3" label_4="4" label_5="5" hasExpandBtns="1" hasHoverInfo="1" icon="/ui/fe2/store/icons/account_icons/default.tga" namecolor="red" scaleheight="11.9h" />

			<instance name="sp_notification_toast_template" index="6" label_1="1" label_2="2" label_3="3" label_4="4" label_5="5" hasExpandBtns="1" hasHoverInfo="1" icon="/ui/fe2/store/icons/account_icons/default.tga" namecolor="red" scaleheight="11.9h" />

	</panel>

	<instance name="cc_rightclick_menu2" menu_name="chat_userlist_rtclick" />

	<!-- Movable Frames GUI -->
	<panel name="movf_control_button" noclick="1" x="37.0h"  height="2.0h" width="9.0h" />
	<panel noclick="1" watch="movf_show" ontriggerlua="self:BringToFront()">
		<panel visible="false" noclick="1" watch="movf_show" ontriggerlua="self:SetVisible(AtoB(param))">
			<instance name="movf_dragcollect"/>
		</panel>
		<panel name="movf_overlays" visible="false" noclick="1" watch="movf_show" ontriggerlua="self:SetVisible(AtoB(param))"/>
		<panel visible="false" noclick="1" watch="movf_show" ontriggerlua="self:SetVisible(AtoB(param))">
			<instance name="movf_dragbox"/>
		</panel>
		<include file="movf_control.package"/>
	</panel>

	<!-- Enhanced Buff Timers -->
	<include file="ebuff.package"/>

	<!-- Report a player stuff -->
	<include file="rap_templates.package" />

	<!-- Confirmations -->
	<instance name="disband_confirm" interactive="false" visible="0"/>
	<instance name="disconnect_confirm" interactive="false" visible="0"/>
	<instance name="quit_confirm" interactive="false" visible="0"/>
	<instance name="disconnect_confirm_leaver" interactive="false" visible="0"/>
	<instance name="quit_confirm_leaver" interactive="false" visible="0"/>

	<!-- Super temp display for level up mode - replace this -->
	<!--
	<panel align="center" valign="center" height="50%" width="50%" onload="ForceToFront();" noclick="1">
		<label align="center" valign="center"
			content="Level up mode enabled"
			color="white"
			outline="true"
			font="dyn_18"
			visible="false"
			noclick="1"
			watch="HeroLevelupMode"
			ontrigger="SetVisible(param0);" />
	</panel>

	-->

	<!-- Channeling bar -->
	<panel name="channel_bars"
		x="3.4h" y="-25h"
		width="27h"
		valign="bottom"
		align="center"
		noclick="true"
		passivechildren="true"
		grow="true"
		regrow="true"
		growinvis="false"
	>
		<!-- Inventory slots -->
		<instance name="channel_bar" slot="0" />
		<instance name="channel_bar" slot="1" />
		<instance name="channel_bar" slot="2" />
		<instance name="channel_bar" slot="3" />
		<instance name="channel_bar" slot="4" />
		<instance name="channel_bar" slot="5" />
		<instance name="channel_bar" slot="6" />
		<instance name="channel_bar" slot="7" />
		<instance name="channel_bar" slot="8" />

		<!-- State slots -->
		<instance name="channel_bar" slot="9" />
		<instance name="channel_bar" slot="10" />
		<instance name="channel_bar" slot="11" />
		<instance name="channel_bar" slot="12" />
		<instance name="channel_bar" slot="13" />
		<instance name="channel_bar" slot="14" />
		<instance name="channel_bar" slot="15" />
		<instance name="channel_bar" slot="16" />
		<instance name="channel_bar" slot="17" />
		<instance name="channel_bar" slot="18" />
		<instance name="channel_bar" slot="19" />
		<instance name="channel_bar" slot="20" />
		<instance name="channel_bar" slot="21" />
		<instance name="channel_bar" slot="22" />
		<instance name="channel_bar" slot="23" />
		<instance name="channel_bar" slot="24" />
		<instance name="channel_bar" slot="25" />
		<instance name="channel_bar" slot="26" />
		<instance name="channel_bar" slot="27" />
		<instance name="channel_bar" slot="28" />
		<instance name="channel_bar" slot="29" />
		<instance name="channel_bar" slot="30" />
		<instance name="channel_bar" slot="31" />
		<instance name="channel_bar" slot="32" />
		<instance name="channel_bar" slot="33" />
		<instance name="channel_bar" slot="34" />
		<instance name="channel_bar" slot="35" />
		<instance name="channel_bar" slot="36" />
		<instance name="channel_bar" slot="37" />
		<instance name="channel_bar" slot="38" />
		<instance name="channel_bar" slot="39" />
		<instance name="channel_bar" slot="40" />
		<instance name="channel_bar" slot="41" />
		<instance name="channel_bar" slot="42" />
		<instance name="channel_bar" slot="43" />
		<instance name="channel_bar" slot="44" />

		<!-- Backpack slots -->
		<instance name="channel_bar" slot="48" />
		<instance name="channel_bar" slot="49" />
		<instance name="channel_bar" slot="50" />
		<instance name="channel_bar" slot="51" />
		<instance name="channel_bar" slot="52" />
		<instance name="channel_bar" slot="53" />

	</panel>
	<!-- /Channeling bar -->

	<style name="altav_current" color="#00b164" bordercolor="#00b164" />
	<style name="altav_currentbg" color="#0059458d" />

	<template name="altcourier_item">
		<panel
			width="24.0h"
			height="100%"
			noclick="true"
			visible="false"
			watch="AltCourierList{slot}"
			ontriggerlua="self:SetVisible(NotEmpty(param0))"
		>
			<panel width="23.4h" align="center" noclick="true">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .4" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".3 .3 .3 1" noclick="true" watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetBorderColor('#57420c') else self:SetBorderColor('.3 .3 .3 1') end" />

				<!-- Selection Catcher -->
				<!-- UIScript -->
				<button
					color="invisible"
					onmouseoverlua="GetWidget('AltCourierHighlight{slot}', 'game'):SetVisible(1)"
					onmouseoutlua="GetWidget('AltCourierHighlight{slot}', 'game'):SetVisible(0)"
					onclicklua="GetWidget('altcourier_select', 'game'):DoEventN(1)"
					watch="AltCourierList{slot}"
					ontriggerlua="
						self:SetVisible(AtoB(param1))
						local onClick = function() end
						if (AtoB(param9)) then
							local index = param0
							onClick = function()
								GetWidget('altcourier_select', 'game'):DoEventN(1)
								self:UICmd('SelectControlAvatar(\''..index..'\')')
							end
						end

						self:SetCallback('onclick', onClick)
						self:RefreshCallbacks()
					"
				/>

				<!-- Over Highlight -->
				<panel noclick="true" name="AltCourierHighlight{slot}" visible="false">
					<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" style="altav_current" noclick="true" />
				</panel>

				<!-- Current Highlight -->
				<panel noclick="true" watch="AltCourierList{slot}" ontriggerlua="self:SetVisible(AtoB(param10))">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" style="altav_currentbg" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" style="altav_current" noclick="true" />
				</panel>

				<!-- Model 1 -->
				<panel x="0.5h" y="-3.0h" width="11.0h" height="12.0h" align="left" valign="bottom" noclick="true">
					<!-- UIScript -->
					<modelpanel
						noclick="true"
						model=""
						anim="idle"

						cameranear="1.0"
						camerafar="30000.0"
						depthclear="true"
						depthcompress="false"
						lookat="false"
						cameradistance="30"
						camerapos="0 1000 1005"
						cameraangles="-45 0 180"
						camerafov="6"
						modelpos="0 0 0"
						modelangles="0.0 0.0 0.0"
						modelscale="1.0"

						sunazimuth="120"
						sunaltitude="50"
						suncolor="0.9 0.9 0.9"
						ambientcolor="0.6 0.7 0.7"
						onload="SetTeamColor('1 0 0');"

						watch="AltCourierList{slot}"
						ontrigger="SetModel(param4); SetEffect(param5); SetModelPos(param6); SetModelAngles(param7); SetModelScale(param8);"
					/>
					<frame color="invisible" bordercolor=".2 .2 .2 1" borderthickness="1" noclick="true"
						watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetBorderColor('#57420c') else self:SetBorderColor('0.2 .2 .2 1') end"
					/>

					<!-- Icon 1 -->
					<panel x="0.4h" y="0.4h" width="3.6h" height="3.6h" noclick="true">
						<image
							texture=""
							noclick="true"
							watch="AltCourierList{slot}"
							ontriggerlua="self:SetTexture(param3);"
						/>
						<frame color="invisible" bordercolor=".2 .2 .2 1" borderthickness="1" noclick="true"
							watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetBorderColor('#57420c') else self:SetBorderColor('0.2 .2 .2 1') end"
						/>
					</panel>

				</panel>


				<!-- Model 2 -->
				<panel x="-0.5h" y="-3.0h" width="11.0h" height="12.0h" align="right" valign="bottom" noclick="true">
					<!-- UIScript -->
					<modelpanel
						noclick="true"
						model=""
						anim="idle"

						cameranear="1.0"
						camerafar="30000.0"
						depthclear="true"
						depthcompress="false"
						lookat="false"
						cameradistance="30"
						camerapos="0 1000 1015"
						cameraangles="-45 0 180"
						camerafov="6"
						modelpos="0 0 0"
						modelangles="0.0 0.0 0.0"
						modelscale="1.0"

						sunazimuth="120"
						sunaltitude="50"
						suncolor="0.9 0.9 0.9"
						ambientcolor="0.6 0.7 0.7"
						onload="SetTeamColor('1 0 0');"

						watch="AltCourierList{slot}"
						ontrigger="SetModel(param18); SetEffect(param19); SetModelPos(param20); SetModelAngles(param21); SetModelScale(param22);"
					/>
					<frame color="invisible" bordercolor=".2 .2 .2 1" borderthickness="1" noclick="true"
						watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetBorderColor('#57420c') else self:SetBorderColor('0.2 .2 .2 1') end"
					/>

					<!-- Icon 2 -->
					<panel x="0.4h" y="0.4h" width="3.6h" height="3.6h" noclick="true">
						<image
							texture=""
							noclick="true"
							watch="AltCourierList{slot}"
							ontriggerlua="self:SetTexture(param17);"
						/>
						<frame color="invisible" bordercolor=".2 .2 .2 1" borderthickness="1" noclick="true"
							watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetBorderColor('#57420c') else self:SetBorderColor('0.2 .2 .2 1') end"
						/>
					</panel>

				</panel>

				<!-- Avatar Name -->
				<panel y="-1.1h" width="94%" height="3.8h" align="center" noclick="true">
					<!--
						<image x="-50@" height="100%" width="-80@" align="right" utile="true" uscale=".4" texture="/ui/fe2/store/store_tab_center.tga" noclick="true"/>
						<image height="100%" width="50@" texture="/ui/fe2/store/store_tab_left.tga" noclick="true"/>
						<image align="right" height="100%" width="50@" texture="/ui/fe2/store/store_tab_right.tga" noclick="true"/>
						<image x="8%" y="10%" align="left" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true"/>
						<image x="-8%" y="10%" align="right" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true"/>
					-->

					<image x="-50@" height="100%" width="-80@" align="right" utile="true" uscale=".4" texture="/ui/fe2/store/store_tab_center.tga" noclick="true" watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetTexture('/ui/fe2/store/store_tab_premium_center.tga') else self:SetTexture('/ui/fe2/store/store_tab_center.tga') end" />
					<image height="100%" width="50@" texture="/ui/fe2/store/store_tab_left.tga" noclick="true" watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetTexture('/ui/fe2/store/store_tab_premium_left.tga') else self:SetTexture('/ui/fe2/store/store_tab_left.tga') end"/>
					<image align="right" height="100%" width="50@" texture="/ui/fe2/store/store_tab_right.tga" noclick="true" watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetTexture('/ui/fe2/store/store_tab_premium_right.tga') else self:SetTexture('/ui/fe2/store/store_tab_right.tga') end"/>
					<image x="8%" y="10%" align="left" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true" watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetTexture('/ui/fe2/store/store_tab_premium_connector.tga') else self:SetTexture('/ui/fe2/store/store_tab_connector.tga') end"/>
					<image x="-8%" y="10%" align="right" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true" watch="AltCourierList{slot}" ontriggerlua="if (AtoB(param14)) then self:SetTexture('/ui/fe2/store/store_tab_premium_connector.tga') else self:SetTexture('/ui/fe2/store/store_tab_connector.tga') end"/>
					<image x="7%" y="43%" height="80%" width="119%" texture="/ui/fe2/store/book_item_premium.tga" noclick="true" visible="false" watch="AltCourierList{slot}" ontriggerlua="self:SetVisible(AtoB(param14))"/>

					<label
						y="-8%"
						height="50%"
						width="100%"
						valign="bottom"
						textalign="center"
						textvalign="center"
						font="dyn_9"
						color="white"
						outline="true"
						noclick="true"
						watch="AltCourierList{slot}"
						ontriggerlua="self:SetText(param12);"
					/>
				</panel>

				<!-- Footers -->

				<!-- Purchase  Courier -->
				<panel y="-0.5h" width="-1.0h" height="2.2h" align="center" valign="bottom" noclick="true" visible="{PurchaseAv=false}">
					<panel width="6.0h" noclick="true"
						onloadlua="
							Set('_game_buycourier_couriername', '', 'string')
							Set('_game_buycourier_avatarcode', '', 'string')
							Set('_game_buycourier_avatarname', '', 'string')
							Set('_game_buycourier_cost', 0, 'int')
							Set('_game_buycourier_SilverCost', 0, 'int')
							Set('_game_buycourier_premium', false, 'bool')
						"
					>
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 1" noclick="true"/>
						<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".2 .2 .2 1" noclick="true" />
						<image x="0.4h" width="1.6h" height="1.6h" valign="center" texture="/ui/elements/stat_icons/total_gold.tga"/>
						<label
							width="4.4h"
							height="100%"
							align="right"
							textalign="center"
							textvalign="center"
							font="dyn_9"
							color="white"
							shadow="true"
							noclick="true"
							watch="AltCourierList{slot}"
							ontriggerlua="self:SetText(param13);"
						/>
					</panel>
					<instance
						name="button2"
						y="-0.1h"
						width="16.0h"
						height="2.0h"
						align="right" valign="bottom"
						borderthickness="0.4h"
						label="game_alt_couriers_purchase"
						enabled="true"
						watch="AltCourierList{slot}"
						ontriggerlua="
							if (NotEmpty(param14) and NotEmpty(UIGoldCoins()) and NotEmpty(UISilverCoins())) then
								if (AtoB(param14)) and ((tonumber(UIGoldCoins()) >= tonumber(param13)) or ((tonumber(UISilverCoins()) >= tonumber(param15)) and (tonumber(param15) > 0))) then
									self:SetEnabled(1)
								elseif (not AtoB(param14)) and ((tonumber(UIGoldCoins()) + tonumber(UISilverCoins())) >= tonumber(param13)) then
									self:SetEnabled(1)
								else
									self:SetEnabled(0)
								end

								local p11, p0, p12, p13, p15, p14 = param11, param0, param12, tonumber(param13), tonumber(param15), AtoB(param14)
								local onClick = function()
									PlaySound('shared/sounds/ui/button_click_02.wav')
									Set('_game_buycourier_couriername', p11, 'string')
									Set('_game_buycourier_avatarcode', p0, 'string')
									Set('_game_buycourier_avatarname', p12, 'string')
									Set('_game_buycourier_cost', p13, 'int')
									Set('_game_buycourier_SilverCost', p15, 'int')
									Set('_game_buycourier_premium', p14, 'bool')
									GetWidget('game_buycourier_confirmationPrem', 'game'):DoEventN(0)
									GetWidget('game_buycourier_confPrem_couriername', 'game'):DoEventN(0)
									GetWidget('game_buycourier_confPrem_goldcost', 'game'):DoEventN(0)
									GetWidget('game_buycourier_confPrem_silvercost', 'game'):DoEventN(0)
									GetWidget('game_buycourier_confPrem_goldbtn', 'game'):DoEvent()
									GetWidget('game_buycourier_confPrem_silverbtn', 'game'):DoEvent()
								end
								self:SetCallback('onclick', onClick)
								self:RefreshCallbacks()
							else
								self:SetEnabled(0)
							end
						"
					/>
				</panel>

				<!-- Select Avatar -->
				<panel
					y="-0.5h"
					width="-1.2h"
					height="2.2h"
					align="center"
					valign="bottom"
					noclick="false"
					watch="AltCourierList{slot}"
					ontriggerlua="self:SetVisible(AtoB(param1) and (not AtoB(param10)))"
				>
					<!-- UIScript -->
					<instance
						name="button2"
						y="-0.1h"
						height="2.0h"
						valign="bottom"
						borderthickness="0.4h"
						label="game_alt_couriers_select"
						watch="AltCourierList{slot}"
						ontriggerlua="
							self:SetVisible(AtoB(param1))
							self:SetEnabled(AtoB(param9))
							local p0 = param0
							local onClick = function()
								PlaySound('shared/sounds/ui/button_click_02.wav')
								GetWidget('altcourier_select', 'game'):DoEventN(1)
								self:UICmd('SelectControlAvatar(\''..p0..'\')')
							end
							self:SetCallback('onclick', onClick)
							self:RefreshCallbacks()
						"
					/>
				</panel>

				<!-- Currently Selected -->
				<panel y="-0.4h" width="-0.8h" height="2.3h" align="center" valign="bottom" noclick="false" watch="AltCourierList{slot}" ontriggerlua="self:SetVisible(AtoB(param10))">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 1" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" style="altav_current" noclick="true" />
					<label height="100%" textalign="center" textvalign="center" font="dyn_9" style="altav_current" shadow="true" noclick="true" content="game_alt_couriers_current"/>
				</panel>

				<!-- / Footers -->

			</panel>

		</panel>
	</template>

	<!-- Alt Courier Display - Full -->
	<panel
		name="altcourier_select"
		grow="true" align="center" valign="center" y="-7.0h"
		visible="false"
		cangrab="true"
		onevent0lua="self:SetVisible(true); UpdateAltCourierList()"
		onevent1lua="self:SetVisible(false)"
		onevent2lua="self:SetVisible(false)"
		watch="AltCourierAccess"
		ontriggerlua="if (not AtoB(param1)) then self:SetVisible(0) end"
	>
		<panel y="-1.2h" width="105%" height="101.75%" align="center" valign="top" noclick="true" >
			<panel width="-1.6h" height="-1.6h" align="center" valign="center" color="0 0 0 .8" noclick="true" />
			<frame texture="/ui/frames/standard.tga" borderthickness="2.3h" blockinput="false" noclick="true"/>
		</panel>

		<panel name="altcourier_container" x="-1%" y="4.2h" height="74h" width="120h" align="center" noclick="1" clip="1" >
			<panel name="altcourier_slider" noclick="1" >
				<panel grow="true" float="right" padding="0" height="18.0h" align="center" noclick="true">
					<instance name="altcourier_item" slot="0" PurchaseAv="true" />
					<instance name="altcourier_item" slot="1" PurchaseAv="true" />
					<instance name="altcourier_item" slot="2" PurchaseAv="true" />
					<instance name="altcourier_item" slot="3" PurchaseAv="true" />
					<instance name="altcourier_item" slot="4" PurchaseAv="true" />
				</panel>
				<panel y="18.3h" grow="true" float="right" padding="0" height="18.0h" align="center" noclick="true">
					<instance name="altcourier_item" slot="5" PurchaseAv="true" />
					<instance name="altcourier_item" slot="6" PurchaseAv="true" />
					<instance name="altcourier_item" slot="7" PurchaseAv="true" />
					<instance name="altcourier_item" slot="8" PurchaseAv="true" />
					<instance name="altcourier_item" slot="9" PurchaseAv="true" />
				</panel>
				<panel y="36.6h" grow="true" float="right" padding="0" height="18.0h" align="center" noclick="true">
					<instance name="altcourier_item" slot="10" PurchaseAv="true" />
					<instance name="altcourier_item" slot="11" PurchaseAv="true" />
					<instance name="altcourier_item" slot="12" PurchaseAv="true" />
					<instance name="altcourier_item" slot="13" PurchaseAv="true" />
					<instance name="altcourier_item" slot="14" PurchaseAv="true" />
				</panel>
				<panel y="54.9h" grow="true" float="right" padding="0" height="18.0h" align="center" noclick="true">
					<instance name="altcourier_item" slot="15" PurchaseAv="true" />
					<instance name="altcourier_item" slot="16" PurchaseAv="true" />
					<instance name="altcourier_item" slot="17" PurchaseAv="true" />
					<instance name="altcourier_item" slot="18" PurchaseAv="true" />
					<instance name="altcourier_item" slot="19" PurchaseAv="true" />
				</panel>
				<panel y="73.2h" grow="true" float="right" padding="0" height="18.0h" align="center" noclick="true">
					<instance name="altcourier_item" slot="20" PurchaseAv="true" />
					<instance name="altcourier_item" slot="21" PurchaseAv="true" />
					<instance name="altcourier_item" slot="22" PurchaseAv="true" />
					<instance name="altcourier_item" slot="23" PurchaseAv="true" />
					<instance name="altcourier_item" slot="24" PurchaseAv="true" />
				</panel>
				<panel y="91.5h" grow="true" float="right" padding="0" height="18.0h" align="center" noclick="true">
					<instance name="altcourier_item" slot="25" PurchaseAv="true" />
					<instance name="altcourier_item" slot="26" PurchaseAv="true" />
					<instance name="altcourier_item" slot="27" PurchaseAv="true" />
					<instance name="altcourier_item" slot="28" PurchaseAv="true" />
					<instance name="altcourier_item" slot="29" PurchaseAv="true" />
				</panel>
			</panel>
			<panel name="altcourier_scroll_catcher" processonlyscroll="true" />
		</panel>

		<scrollbar
			name="altcourier_scroller"
			visible="true"
			align="right" width="2.0h" y="4.2h" height="74h" x="0.6h"
			texture="/ui/info/newstoreslider.tga"
			minvalue="0"
			maxvalue="1"
			handlewidth="2h"
			handleheight="2h"
			vertical="true"
			slotwidth="0.6h" slotheight="1"
		>
		</scrollbar>
		
		<!-- Store Title -->
		<panel x="0.2h" y="-1.3h" width="99%" height="5.4h" align="center" noclick="true">
			<image x="-50@" height="100%" width="-80@" align="right" utile="true" uscale=".4" texture="/ui/fe2/store/store_tab_center.tga" noclick="true"/>
			<image height="100%" width="50@" texture="/ui/fe2/store/store_tab_left.tga" noclick="true"/>
			<image align="right" height="100%" width="50@" texture="/ui/fe2/store/store_tab_right.tga" noclick="true"/>
			<image x="3%" y="10%" align="left" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true"/>
			<image x="-3%" y="10%" align="right" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true"/>
			<label x="3.5%" y="-8%" height="50%" valign="bottom" textalign="left" textvalign="center" font="dyn_14" color="white" outline="true" noclick="true" content="game_alt_couriers"/>

			<panel x="-7.5%" y="-0.4h" width="17.5h" height="2.5h" valign="bottom" align="right" noclick="true">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .4" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".2 .2 .2 1" noclick="true" />
				<image x="-1.0h" y="0.1h" texture="/ui/fe2/lobby/altav_goldsack.tga" height="3.2h" width="3.2h" valign="bottom" noclick="true"/>
				<panel color="invisible" height="100%" float="right" padding="0.5h" x="1.75h" width="-2.5h">
					<label
						width="5h"
						height="100%"
						align="left"
						textalign="right"
						textvalign="center"
						font="dyn_9"
						color="#FFCC00"
						outline="true"
						noclick="true"
						watch="GoldCoins"
						ontriggerlua="self:DoEventN(0)"
						onshowlua="self:DoEventN(0)"
						onevent0lua="self:SetText(FtoA2(tonumber(UIGoldCoins()), 0, 0, 3, ','))"
					/>

					<panel height="100%" width="1.75h">
						<image width="1.75h" height="1.75h" valign="center" noclick="true" texture="/ui/fe2/store/gold_coins.tga" />
					</panel>



					<label
						width="5h"
						height="100%"
						align="left"
						textalign="right"
						textvalign="center"
						font="dyn_9"
						color="#c0d5ed"
						outline="true"
						noclick="true"
						watch="SilverCoins"
						ontriggerlua="self:DoEventN(0)"
						onshowlua="self:DoEventN(0)"
						onevent0lua="self:SetText(FtoA2(tonumber(UISilverCoins()), 0, 0, 3, ','))"
					/>

					<panel height="100%" width="1.75h">
						<image width="1.75h" height="1.75h" valign="center" noclick="true" texture="/ui/fe2/store/silver_coins.tga" />
					</panel>



				</panel>
			</panel>

			<panel x="-3.0%" y="-0.7h" width="2.0h" height="2.0h" valign="bottom" align="right" noclick="true">
				<button
					color="invisible"
					onclicklua="PlaySound('/shared/sounds/ui/ccpanel/button_close_02.wav') GetWidget('altcourier_select', 'game'):DoEventN(1)"
					onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_01.wav')"
				>
					<widgetstate statename="up">
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#520000" blockinput="false" noclick="true"/>
						<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
						<image width="1.3h" height="1.3h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/elements/closex.tga" noclick="true" />
					</widgetstate>
					<widgetstate statename="over">
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#c50000" blockinput="false" noclick="true"/>
						<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
						<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="true" />
					</widgetstate>
					<widgetstate statename="down" x="1" y="1">
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#9c0000" blockinput="false" noclick="true"/>
						<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
						<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="true" />
					</widgetstate>
				</button>
			</panel>

		</panel>
		
		<!-- Confirmation/etc. popups -->		
		<panel width="100%" height="100%" color="0 0 0 0.5" name="game_buycourier_confirmation" onevent0lua="self:FadeIn(150)" onevent1lua="self:FadeOut(150)" visible="false">
			<panel width="35h" grow="true" regrow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true" regrow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="globby_purchase"
						show_close="true"
						onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav')"
						onclicklua="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav') GetWidget('game_buycourier_confirmation', 'game'):DoEventN(1)"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true" regrow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1" regrow="true">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" regrow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_11" wrap="true" fity="true" textalign="center" color="#00FF00" shadow="true" name="game_buycourier_conf_couriername" onevent0lua="self:SetText(GetCvarString('_game_buycourier_avatarname'))"/>
								<panel height="0.5h"/>
								<label font="dyn_12" wrap="true" fity="true" textalign="center" color="white" shadow="true" content="game_purchase_courier"/>
								<panel height="0.25h"/>
								<panel height="2.5h">
									<panel width="18h" align="center"
										onmouseoverlua="
											GetWidget('mstore_tip_costbreakdown', 'game'):SetVisible(1)
										"
										onmouseoutlua="
											GetWidget('mstore_tip_costbreakdown', 'game'):SetVisible(0)
										"
										onhidelua="
											GetWidget('mstore_tip_costbreakdown', 'game'):SetVisible(0)
										"
									>
										<panel align="left" width="48%" color="0 0 0 1" noclick="true">
											<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
											<panel align="center" valign="center" width="-0.5h" height="-0.5h" noclick="true">
												<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/gold_coins.tga"/>


												<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" color="#FFCC00" name="game_buycourier_conf_goldcost"
												onevent0lua="
													if (1 > GetCvarInt('_game_buycourier_cost')) then
														self:SetText('-')
													else
														self:SetText(GetCvarString('_game_buycourier_cost'))
													end
												"/>

											</panel>
										</panel>
										<panel align="right" width="48%" color="0 0 0 1" noclick="true">
											<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
											<panel align="center" valign="center" width="-0.5h" height="-0.5h" noclick="true">
												<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/silver_coins.tga"/>
												<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" color="#c0d5ed"
													name="game_buycourier_conf_silvercost"
													onevent0lua="
														if (1 > GetCvarInt('_game_buycourier_SilverCost')) then
															self:SetText('-')
														else
															self:SetText(GetCvarString('_game_buycourier_SilverCost'))
														end"
												/>
											</panel>
										</panel>
									</panel>
								</panel>
								<panel height="0.5h"/>
								<panel width="100%" grow="true">
									<panel height="2.5h" grow="true" align="center" float="right" padding="0.5h">
										<instance
											width="9h" height="2.5h"
											name="button2"
											label="mstore_purchase"
											onclicklua="
												PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav')
												SubmitForm('gameBuycourier', 'account_id', Client.GetAccountID(), 'request_code', 8, 'cookie', Client.GetCookie(), 'hero_name', GetCvarString('_game_buycourier_couriername'), 'avatar_code', GetCvarString('_game_buycourier_avatarcode'), 'type', 'Couriers')
												GetWidget('game_buycourier_confirmation', 'game'):DoEventN(1)
											"
										/>
										<instance
											width="7h" height="2.5h"
											name="button2"
											label="general_cancel"
											onclicklua="GetWidget('game_buycourier_confirmation', 'game'):DoEventN(1)"
										/>
									</panel>


								</panel>
								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>

		<panel width="100%" height="100%" color="0 0 0 0.5" name="game_buycourier_confirmationPrem" onevent0lua="self:FadeIn(150)" onevent1lua="self:FadeOut(150)" visible="false">
			<panel width="35h" grow="true" regrow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true" regrow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="globby_purchase"
						show_close="true"
						onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav')"
						onclicklua="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav') GetWidget('game_buycourier_confirmationPrem', 'game'):DoEventN(1)"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true" regrow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1" regrow="true">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" regrow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_11" wrap="true" fity="true" textalign="center" color="#00FF00" shadow="true" name="game_buycourier_confPrem_couriername" onevent0lua="self:SetText(GetCvarString('_game_buycourier_avatarname'))"/>
								<panel height="0.5h"/>
								<label font="dyn_12" wrap="true" fity="true" textalign="center" color="white" shadow="true" content="game_purchase_courier"/>
								<panel height="0.25h"/>
								<panel grow="true" width="100%">
									<panel grow="true" align="center" width="-1h" color="0 0 0 1">
										<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
										<panel float="bottom" width="100%" grow="true">
											<panel height="0.5h"/>
											<label font="dyn_10" align="center" width="-0.5h" wrap="true" fity="true" textalign="center" color="white" shadow="true" content="mstore_purchase_choosecurrency_desc"/>
											<panel height="0.5h"/>
										</panel>
									</panel>
								</panel>

								<panel height="0.5h"/>

								<panel height="6h">
									<panel align="left" width="33.3%">
										<panel vmargin="0.5h" width="10h" align="center">
											<panel height="2h" color="0 0 0 1">
												<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
												<panel hmargin="0.25h" vmargin="0.25h">
													<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" outline="true" name="game_buycourier_confPrem_goldcost" color="#FFCC00" onevent0lua="self:SetText(GetCvarString('_game_buycourier_cost'))"/>
													<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/gold_coins.tga"/>
												</panel>
											</panel>
											<panel height="3h" valign="bottom">
												<instance name="button2" watch1="MicroStoreUpdateSelection" ontrigger1lua="self:SetVisible(GetCvarInt('_game_buycourier_cost') > tonumber(UIGoldCoins()))" visible="false" enabled="false" label="mstore_needcoins" />
												<instance name="button2" button_name="game_buycourier_confPrem_goldbtn" oneventlua="self:SetVisible(tonumber(UIGoldCoins()) >= GetCvarInt('_game_buycourier_cost'))" visible="false" label="mstore_purchase_gold"
													onclicklua="
														PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav')
														SubmitForm('gameBuycourier', 'account_id', Client.GetAccountID(), 'request_code', 8, 'cookie', Client.GetCookie(), 'hero_name', GetCvarString('_game_buycourier_couriername'), 'avatar_code', GetCvarString('_game_buycourier_avatarcode'), 'currency', 0, 'type', 'Couriers')
														GetWidget('game_buycourier_confirmationPrem', 'game'):DoEventN(1)
													"
												/>
											</panel>
										</panel>
									</panel>
									<panel align="center" width="33.3%">
										<panel vmargin="0.5h" width="10h" align="center">
											<panel height="2h" color="0 0 0 1">
												<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
												<panel hmargin="0.25h" vmargin="0.25h">
													<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" outline="true" name="game_buycourier_confPrem_silvercost" color="#c0d5ed" onevent0lua="self:SetText(GetCvarString('_game_buycourier_SilverCost'))"/>
													<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/silver_coins.tga"/>
												</panel>
											</panel>
											<panel height="3h" valign="bottom">
												<instance name="button2" button_name="game_buycourier_confPrem_silverbtn" oneventlua="self:SetVisible(tonumber(UISilverCoins()) >= GetCvarInt('_game_buycourier_SilverCost') and (GetCvarInt('_game_buycourier_SilverCost') > 0))" visible="false" label="mstore_purchase_silver"
													onclicklua="
														PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav')
														SubmitForm('gameBuycourier', 'account_id', Client.GetAccountID(), 'request_code', 8, 'cookie', Client.GetCookie(), 'hero_name', GetCvarString('_game_buycourier_couriername'), 'avatar_code', GetCvarString('_game_buycourier_avatarcode'), 'currency', 1, 'type', 'Couriers')
														GetWidget('game_buycourier_confirmationPrem', 'game'):DoEventN(1)
													"
												/>
												<instance name="button2" watch1="MicroStoreUpdateSelection" ontrigger1lua="self:SetVisible(GetCvarInt('_game_buycourier_SilverCost') > tonumber(UISilverCoins()))" visible="false" label="mstore_needcoins" enabled="false"/>
											</panel>
										</panel>
									</panel>
									<panel align="right" width="33.3%">
										<instance
											width="7h" height="2.5h"
											name="button2"
											label="general_cancel"
											align="center" valign="center"
											onclicklua="
												GetWidget('game_buycourier_confirmationPrem', 'game'):DoEventN(1)
											"
										/>
									</panel>
								</panel>

								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>

		<panel width="100%" height="100%" color="0 0 0 0.5" name="game_buycourier_Success" onevent0lua="self:FadeIn(150)" onevent1lua="self:FadeOut(150)" visible="false">
			<panel width="30h" grow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="mstore_buyitem_success"
						show_close="true"
						onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav')"
						onclicklua="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav') GetWidget('game_buycourier_Success', 'game'):DoEventN(1)"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_10" wrap="true" fity="true" color="white" shadow="true" textalign="center" content="mstore_buyitem_success_body"/>
								<panel height="0.5h"/>
								<panel width="100%" grow="true">
									<instance
										width="6h" height="2.5h"
										align="center"
										name="button2"
										label="general_ok"
										onclicklua="PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav') GetWidget('game_buycourier_Success', 'game'):DoEventN(1)"
									/>
								</panel>
								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>

		<panel width="100%" height="100%" color="0 0 0 0.5" name="game_buycourier_Error" onevent0lua="self:FadeIn(150)" onevent1lua="self:FadeOut(150)" visible="false">
			<panel width="35h" grow="true" regrow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true" regrow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="mstore_error_generic"
						show_close="true"
						onmouseoverlua="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav')"
						onclicklua="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav') GetWidget('game_buycourier_Error', 'game'):DoEventN(1)"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true" regrow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1" regrow="true">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" regrow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_10" wrap="true" fity="true" color="white" shadow="true" watch0="gameBuycourierResults" ontriggerlua="if ((tonumber(param2) >= 0) and (tonumber(param1) == 1)) then self:SetText(Translate('mstore_error'..param2)) end" watch1="gameBuycourierStatus" ontrigger1lua="if (tonumber(param0) == 3) then self:SetText(Translate('mstore_error_connect')) end"/>
								<panel height="0.5h"/>
								<panel width="100%" grow="true">
									<instance
										width="6h" height="2.5h"
										align="center"
										name="button2"
										label="general_ok"
										onclicklua="GetWidget('game_buycourier_Error', 'game'):DoEventN(1)"
									/>
								</panel>
								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>


	</panel>
	<!-- / Alt Courier Display - Full -->

	<!-- Buy a courier -->
	<template name="buy_courier_confirm_body">
		<panel width="100%" grow="true" align="center" float="bottom" padding="1.0h" noclick="true">
			<panel grow="true" y="1.0h" width="100%"  noclick="1">
				<label fity="true" width="-1.0h" align="center" textalign="center" textvalign="top" font="dyn_11" color="white" shadow="true" wrap="true" content="confirm_buy_courier_msg"/>
			</panel>
			<panel height="2.4h" noclick="true">
				<instance
					name="button2"
					x="7.0h"
					width="12.0h" height="2.4h"
					align="center"
					valign="center"
					label="general_cancel"
					onmouseoverlua="PlaySound('/shared/sounds/ui/button_over_01.wav')"
					onclicklua="GetWidget('buy_courier_confirm', 'game'):FadeOut(250)"
					interactive="{interactive}"
				/>
				<!-- UIScript -->
				<instance
					name="button2"
					x="-7.0h"
					width="12.0h" height="2.4h"
					align="center"
					valign="center"
					label="general_ok"
					onmouseoverlua="PlaySound('/shared/sounds/ui/button_over_01.wav')"
					onclicklua="GetWidget('buy_courier_confirm', 'game'):FadeOut(250)"
					watch="CourierUpgrade"
					ontrigger="
						SetOnClick(
						'
							Call(\'buy_courier_confirm\', \'FadeOut(250);\');
							ActivateDelayedTool(\''#param0#'\', \''#param1#'\', \''#param2#'\', \''#param3#'\', \''#param4#'\')
						'
						);
					"
					interactive="{interactive}"
				/>
			</panel>
			<panel height="2.4h" notinoclick="true" align="center"
				onloadlua="SetSave('courier_dontask', false, 'bool', true)
							self:Instantiate('Noptions_checkbox', 'width', '22.0h', 'align', 'right', 'valign', 'center', 'font', 'dyn_10', 'label', 'confirm_switchsub_da', 'cvar', 'courier_dontask', 'interactive', 'false')"
			>
			</panel>
		</panel>
	</template>
	<!-- UIScript -->
	<template name="buy_courier_confirm">
		<panel name="buy_courier_confirm" visible="{visible=0}" color="invisible" noclick="1" onshowlua="self:BringToFront();" valign="center" align="center" y="20h"
			watch="CourierUpgrade" ontrigger="If(courier_dontask, ActivateDelayedTool(param0, param1, param2, param3, param4), FadeIn(150));"
		>
			<panel height="53h" noclick="1">
				<instance
					name="alert_box_growable"
					width="30.0h"
					align="center"
					label="confirm_buy_courier_title"
					show_close="true"
					closebtn_clicklua="GetWidget('buy_courier_confirm', 'game'):FadeOut(250)"
					body="buy_courier_confirm_body"
					interactive="false"
				/>
			</panel>
		</panel>
	</template>

	<instance name="buy_courier_confirm" />

	<if condition="cl_AlienFXEnabled" >
		<frame name="alienfx_delete_me" noclick="1" valign="center" align="center" borderthickness="5h" bordercolor="invisible" color="invisible" />
		<panel name="alienfx_panel_game" noclick="1" />
		<trigger name="AlienFX" />
	</if>

	<panel name="game_hero_tip_parent" grow="1" regrow="1" growinvis="0" noclick="0" onclicklua="self:FadeOut(150)" onrightclicklua="self:FadeOut(150)" width="70h" align="center" valign="bottom" y="-21h" visible="0"
		onshowlua="self:SetNoClick(1) self:Sleep(750, function() self:SetNoClick(0) end)"
	>
		<frame texture="/ui/frames/rounded_bg_blue.tga" borderthickness="0.7h" color="0 0 0 .9" blockinput="false" noclick="1" />
		<frame texture="/ui/frames/roundframe.tga" color="#3e474a" borderthickness="0.7h" blockinput="false" noclick="1" />
		<panel name="game_hero_tip_info_parent" grow="1" regrow="1" growinvis="0" y="1.0h" width="-2.0h" align="center" noclick="1" float="bottom">
			<panel grow="1" regrow="1" growinvis="0" width="100%" noclick="true">
				<panel width="11.0h" height="11.0h" valign="top">
					<image name="game_hero_tip_icon" texture="$invis" noclick="1" visible="0"  />
					<frame color="invisible" bordercolor=".4 .4 .4 1" borderthickness="1" noclick="true" />
				</panel>
				<panel grow="1" regrow="1" growinvis="0" width="-12.0h" align="right" noclick="1" float="bottom" padding="0.3h">
					<label name="game_hero_tip_icon_label" fity="true" color="red" outline="1" font="dyn_16" textalign="left" content="" noclick="1" visible="0" />
					<label name="game_hero_tip_icon_desc" fity="true" wrap="true" color="1 1 1 1" shadow="1" font="dyn_14" noclick="1" visible="0"
						content=""
					/>
				</panel>
			</panel>
			<panel name="game_hero_tip_dontask_parent" width="100%" height="3h" noclick="1" valign="bottom" onloadlua="self:BringToFront()" onshowlua="self:BringToFront()" visible="0">
				<instance
					name="Noptions_checkbox"
					width="10.0h"
					align="right" valign="center"
					font="dyn_10" label="hero_tip_disable_tips"
					tip_id=""
					interactive="false"
					onclicklua="
						local heroTips = GetCvarBool('ui_hideGameHeroTips')
						SetSave('ui_hideGameHeroTips', not heroTips, 'bool')
						if (GetCvarBool('ui_hideGameHeroTips')) then
							self:SetButtonState(1)
						else
							self:SetButtonState(0)
						end
						"
					onloadlua="
						SetSave('ui_hideGameHeroTips', false, 'bool', true)
						if (GetCvarBool('ui_hideGameHeroTips')) then
							self:SetButtonState(1)
						else
							self:SetButtonState(0)
						end
					"
				/>
			</panel>
		</panel>
	</panel>
	
	<trigger name="deadlift_do_you_want_rezzed" />
	<trigger name="hide_deadlift_do_you_want_rezzed" />

	<panel name="deadliftTest" align="center" valign="center" width="35h" height="35h" noclick="true" visible="false" watch="deadlift_do_you_want_rezzed" ontriggerlua="self:SetVisible(1)" watch2="hide_deadlift_do_you_want_rezzed" ontrigger2lua="self:SetVisible(0)">
		<image texture="/ui/common/prompt_revive_backer.tga" noclick="true"/>
		<instance name="promptReviveButtonOK" id="promptReviveButtonOK" width="33@" height="16.5%" x="12@" y="55.35%"
			watch="deadlift_do_you_want_rezzed"
			ontriggerlua="
				local index = tonumber(param2)
				self:SetCallback('onclick', function()
					SendScriptMessage('deadlift_yes_i_want_rezzed', '1', index)
					GetWidget('deadliftTest', 'game'):SetVisible(0)
				end)
			"/>
		<instance name="promptReviveButtonOK" id="promptReviveButtonCancel" width="33@" height="16.5%" x="55@" y="55.35%" texture="/ui/common/prompt_revive_button_cancel.tga"
			watch="deadlift_do_you_want_rezzed"
			ontriggerlua="
				local index = tonumber(param2)
				self:SetCallback('onclick', function()
					SendScriptMessage('deadlift_yes_i_want_rezzed', '-1', index)
					GetWidget('deadliftTest', 'game'):SetVisible(0)
				end)
			"/>

		<label name="promptReviveTitle" noclick="true" align="center" height="3h" valign="bottom" y="-93%" color="white" outline="true" font="dyn_18" textalign="center" textvalign="center" content="game_prompt_revive_title"/><!-- U wanna rez bby? -->
		<label name="promptReviveTime" noclick="true" align="center" y="72.26%" width="24@" height="11%" font="dyn_14" color="white" textalign="center" textvalign="center" outline="true" content=":00"
			watch="deadlift_do_you_want_rezzed"
			ontriggerlua="
			local time = ((tonumber(param0) * 1000) + tonumber(GetTrigger('GameTime'):GetLastValue()))
			self:RegisterWatch('GameTime', function(self, gameTime)
				gameTime = tonumber(gameTime)
				local timeDiff = time - gameTime

				if (0 >= timeDiff) then
					GetWidget('deadliftTest', 'game'):SetVisible(0)
					self:UnregisterWatch('GameTime')
				end
				self:SetText(round(timeDiff / 1000, 1)..'s')
			end)
		"/>
	</panel>

	<instance name="generic_dialog_box_game_template" />
	<instance name="generic_dialog_box_combo_game_template" />
		
	<!-- Gold Report -->
	<template name="goldReportField">
		<panel height="2.5h">
			<frame texture="/ui/frames/rounded_bg_white.tga" color="{bgcolor=1 1 1 0.075}" bordercolor="{bgcolor=1 1 1 0.075}" borderthickness="0.25h"/>
			<panel hmargin="0.25h" vmargin="0.5h">
				<label textvalign="center" color="{color=white}" outline="true" font="dyn_10" content="{label}"/>
				<label textvalign="center" color="{color=white}" outline="true" textalign="right" font="dyn_10" content="-" watch="GoldReport" ontriggerlua="self:SetText({param})"/>
			</panel>
		</panel>
	</template>
	
	<floater name="shop_tooltip_gold_report" grow="true" regrow="true" width="34h" x="-4h" y="2h" valign="bottom" color="invisible" visible="false">
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness="0.5h" />
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness="0.5h" />	
		<panel grow="true" align="center" width="-1h" float="bottom" padding="0">
			<panel height="0.5h"/>
			<instance name="goldReportField" label="gold_report_kills" param="param0"/>
			<instance name="goldReportField" label="gold_report_assists" param="param1" bgcolor="0 0 0 0.15"/>
			<instance name="goldReportField" label="gold_report_buildings" param="param2"/>
			<instance name="goldReportField" label="gold_report_creeps" param="param4" bgcolor="0 0 0 0.15"/>
			<instance name="goldReportField" label="gold_report_lost_to_death" param="param3" color="#FF2222"/>
			<instance name="goldReportField" label="gold_report_buyback_cost" param="param5" bgcolor="0 0 0 0.15" color="#999999"/>
			<instance name="goldReportField" label="gold_report_to_lose_on_death" param="param6" color="#999999"/>
			<instance name="goldReportField" label="gold_report_gpm" param="param7" bgcolor="0 0 0 0.15" color="#FFCC00"/>
			<panel height="0.5h"/>
		</panel>
	</floater>

	<!--
		Generic Floating Tooltip System
		=========================
		Just a generally flexible tooltip with up to a title, 3 text bodies and a top-right corner image.  Can be expanded later on.

		param0		General visibility (you can also just hidewidget on genericGameFloatingTip so you don't need to re-trigger)
		param1		Width
		param2		Icon Path (blank for none) - small square icon at top-right
		param3		Title text
		param4		Body text 1
		param5		Body text 2
		param6		Body text 3
		param7		X
		param8		Y
	-->

	<trigger name="genericGameFloatingTip"/>
	<floater passivechildren="true" visible="false" x="22" y="-22" width="20h" grow="true" regrow="true" name="genericGameFloatingTip"
		watch="genericGameFloatingTip" ontriggerlua="self:SetVisible(AtoB(param0)) if (NotEmpty(param1)) then self:SetWidth(param1) end if (NotEmpty(param7)) then self:SetX(param7) end if (NotEmpty(param8)) then self:SetY(param8) end"
	>
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .95" borderthickness=".6h" />
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" />
		<image visible="false" align="right" valign="top" width="2h" height="2h" x="-0.5h" y="0.5h" watch="genericGameFloatingTip" ontriggerlua="if (NotEmpty(param2)) then self:SetTexture(param2) self:SetVisible(1) else self:SetVisible(0) end"/>
		<panel grow="true" regrow="true" growinvis="false" float="bottom" width="-1h" align="center">
			<panel height="2" /><!-- Spacer and to get rid of the padding issue -->
			<panel width="100%" grow="true" regrow="true" growinvis="false" float="bottom" padding="0.5h"><!-- Actual usable space -->
				<label align="center" color="#ffab01" font="dyn_12" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" watch="genericGameFloatingTip" ontriggerlua="if (NotEmpty(param3)) then self:SetVisible(1) self:SetText(Translate(param3)) else self:SetVisible(0) end" content="-"/>
				<label align="center" color="white" font="dyn_10" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" visible="false" watch="genericGameFloatingTip" ontriggerlua="if (NotEmpty(param4)) then self:SetVisible(1) self:SetText(FormatStringNewline(Translate(param4))) else self:SetVisible(0) end" content="-"/>
				<panel height="0.5h" width="100%" visible="false" sticky="true" stickytoinvis="false" watch="genericGameFloatingTip" ontriggerlua="self:SetVisible(NotEmpty(param5))" >
					<panel align="center" valign="center" height="1" width="-1h" color="#555555" />
				</panel>
				<label align="center" color="white" font="dyn_10" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" visible="false" watch="genericGameFloatingTip" ontriggerlua="if (NotEmpty(param5)) then self:SetVisible(1) self:SetText(FormatStringNewline(Translate(param5))) else self:SetVisible(0) end" content="-"/>
				<panel height="0.5h" width="100%" visible="false" sticky="true" stickytoinvis="false" watch="genericGameFloatingTip" ontriggerlua="self:SetVisible(NotEmpty(param6))">
					<panel align="center" valign="center" height="1" width="-1h" color="#555555" />
				</panel>
				<label align="center" color="white" font="dyn_10" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" visible="false" watch="genericGameFloatingTip" ontriggerlua="if (NotEmpty(param6)) then self:SetVisible(1) self:SetText(FormatStringNewline(Translate(param6))) else self:SetVisible(0) end" content="-"/>
			</panel>
			<panel height="1h"/><!-- Spacer and to get rid of the padding issue -->
		</panel>

	</floater>

	<!-- loading dialog, sits above everything if used -->
	<instance name="simple_loading_dialog" />
	
</interface>
